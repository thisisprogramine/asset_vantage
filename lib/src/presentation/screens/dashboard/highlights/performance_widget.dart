import 'dart:async';

import 'package:asset_vantage/src/config/constants/favorite_constants.dart';
import 'package:asset_vantage/src/config/constants/strings_constants.dart';
import 'package:asset_vantage/src/config/extensions/num_extensions.dart';
import 'package:asset_vantage/src/config/extensions/string_extensions.dart';
import 'package:asset_vantage/src/data/models/return_percentage/return_percentage_model.dart';
import 'package:asset_vantage/src/presentation/blocs/dashboard_filter/dashboard_filter_cubit.dart';
import 'package:asset_vantage/src/presentation/blocs/performance/performance_holding_method/performance_holding_method_cubit.dart';
import 'package:asset_vantage/src/presentation/blocs/performance/performance_primary_grouping/performance_primary_grouping_cubit.dart';
import 'package:asset_vantage/src/presentation/blocs/performance/performance_primary_sub_grouping/performance_primary_sub_grouping_cubit.dart';
import 'package:asset_vantage/src/presentation/screens/performance_report/performance_universal_filter.dart';
import 'package:asset_vantage/src/presentation/widgets/editable_title_row.dart';
import 'package:asset_vantage/src/presentation/widgets/entity_asondate_label.dart';
import 'package:asset_vantage/src/presentation/widgets/favorite_icon.dart';
import 'package:asset_vantage/src/presentation/widgets/filter_icon.dart';
import 'package:asset_vantage/src/presentation/widgets/navigation_arrow.dart';
import 'package:asset_vantage/src/presentation/widgets/delete_favorite_dialog.dart';
import 'package:asset_vantage/src/utilities/helper/flash_helper.dart';
import 'package:dotted_line/dotted_line.dart';
import 'package:flutter/material.dart';
import 'package:flutter/services.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:flutter_screenutil/flutter_screenutil.dart';
import 'package:flutter_svg/svg.dart';
import 'package:intl/intl.dart';
import 'package:shimmer/shimmer.dart';
import 'package:super_tooltip/super_tooltip.dart';

import '../../../../config/constants/route_constants.dart';
import '../../../../config/constants/size_constants.dart';
import '../../../../domain/entities/app_error.dart';
import '../../../../domain/entities/authentication/user_entity.dart';
import '../../../../domain/entities/favorites/favorites_entity.dart';
import '../../../../domain/entities/performance/performance_report_entity.dart';
import '../../../../domain/entities/return_percentage/return_percentage_entity.dart';
import '../../../../utilities/helper/app_helper.dart';
import '../../../../utilities/helper/ui_helper.dart';
import '../../../arguments/performance_argument.dart';
import '../../../blocs/authentication/user/user_cubit.dart';
import '../../../blocs/favorites/favorites_cubit.dart';
import '../../../blocs/performance/performance_as_on_date/performance_as_on_date_cubit.dart';
import '../../../blocs/performance/performance_currency/performance_currency_cubit.dart';
import '../../../blocs/performance/performance_denomination/performance_denomination_cubit.dart';
import '../../../blocs/performance/performance_entity/performance_entity_cubit.dart';
import '../../../blocs/performance/performance_loading/performance_loading_cubit.dart';
import '../../../blocs/performance/performance_number_of_period/performance_number_of_period_cubit.dart';
import '../../../blocs/performance/performance_partnership_method/performance_partnership_method_cubit.dart';
import '../../../blocs/performance/performance_period/performance_period_cubit.dart';
import '../../../blocs/performance/performance_report/performance_report_cubit.dart';
import '../../../blocs/performance/performance_return_percent/performance_return_percent_cubit.dart';
import '../../../blocs/performance/performance_secondary_grouping/performance_secondary_grouping_cubit.dart';
import '../../../blocs/performance/performance_secondary_sub_grouping/performance_secondary_sub_grouping_cubit.dart';
import '../../../blocs/performance/performance_sort_cubit/performance_sort_cubit.dart';
import '../../../blocs/stealth/stealth_cubit.dart';
import '../../../blocs/universal_filter/as_on_date_universal_filter/universal_filter_as_on_date_cubit.dart';
import '../../../blocs/universal_filter/enitity_universal_filter/universal_entity_filter_cubit.dart';
import '../../../blocs/universal_filter/favourite_as_on_date_universal_filter/favourite_universal_filter_as_on_date_cubit.dart';
import '../../../theme/theme_color.dart';
import '../../../widgets/EditableTitle.dart';
import '../../../widgets/blue_dot_icon.dart';
import '../../../widgets/custom_popup_menu.dart';
import '../../../widgets/filter_personalization_hint.dart';
import '../../../widgets/loading_widgets/loading_bg.dart';
import '../../../widgets/performance_text.dart';

class PerformanceWidget extends StatefulWidget {
  bool isSummary;
  int? currentLevel;
  bool isFavorite;
  final Favorite? favorite;
  final ReturnType? selectedReturnType;
  Function()? changeBoolFromDetails;
  List<int>? selectedItemIndex;
  Function(ReturnType index)? returnTypeChanged;
  PerformanceSortCubit performanceSortCubit;
  PerformanceEntityCubit performanceEntityCubit;
  PerformanceReportCubit performanceReportCubit;
  PerformancePrimaryGroupingCubit performancePrimaryGroupingCubit;
  PerformanceSecondaryGroupingCubit performanceSecondaryGroupingCubit;
  PerformancePrimarySubGroupingCubit performancePrimarySubGroupingCubit;
  PerformanceSecondarySubGroupingCubit performanceSecondarySubGroupingCubit;
  final PerformanceNumberOfPeriodCubit performanceNumberOfPeriodCubit;
  final PerformancePartnershipMethodCubit performancePartnershipMethodCubit;
  final PerformanceHoldingMethodCubit performanceHoldingMethodCubit;
  final PerformanceReturnPercentCubit performanceReturnPercentCubit;
  final PerformanceCurrencyCubit performanceCurrencyCubit;
  final PerformanceDenominationCubit performanceDenominationCubit;
  final PerformanceAsOnDateCubit performanceAsOnDateCubit;
  final PerformanceLoadingCubit performanceLoadingCubit;
  PerformancePeriodCubit performancePeriodCubit;
  final UniversalEntityFilterCubit universalEntityFilterCubit;
  final UniversalFilterAsOnDateCubit universalFilterAsOnDateCubit;
  final FavouriteUniversalFilterAsOnDateCubit favouriteUniversalFilterAsOnDateCubit;
  String? marketValue;

  PerformanceWidget({
    super.key,
    this.isSummary = true,
    this.isFavorite = false,
    this.favorite,
    this.returnTypeChanged,
    this.marketValue,
    this.currentLevel,
    this.selectedItemIndex,
    this.selectedReturnType,
    this.changeBoolFromDetails,
    required this.performanceSortCubit,
    required this.universalEntityFilterCubit,
    required this.universalFilterAsOnDateCubit,
    required this.performanceEntityCubit,
    required this.performanceReportCubit,
    required this.performancePrimaryGroupingCubit,
    required this.performanceSecondaryGroupingCubit,
    required this.performancePrimarySubGroupingCubit,
    required this.performanceSecondarySubGroupingCubit,
    required this.performanceNumberOfPeriodCubit,
    required this.performanceReturnPercentCubit,
    required this.performanceCurrencyCubit,
    required this.performanceDenominationCubit,
    required this.performanceAsOnDateCubit,
    required this.performancePeriodCubit,
    required this.performanceLoadingCubit,
    required this.favouriteUniversalFilterAsOnDateCubit,
    required this.performancePartnershipMethodCubit,
    required this.performanceHoldingMethodCubit
  });

  @override
  State<PerformanceWidget> createState() => _PerformanceWidgetState();
}

class _PerformanceWidgetState extends State<PerformanceWidget> {
  ReturnType selectedType = ReturnType.MTD;
  bool canEdit = false;
  late final SuperTooltipController _tooltipController = SuperTooltipController();
  Timer? timer;
  bool fromApply = false;

  late final SuperTooltipController _returnTooltipController=SuperTooltipController();
  @override
  void initState() {
    super.initState();

    selectedType = widget.selectedReturnType ?? ((widget.performanceReturnPercentCubit.state
                .selectedPerformanceReturnPercentList?.isNotEmpty ??
            false)
        ? widget.performanceReturnPercentCubit.state
            .selectedPerformanceReturnPercentList!.first!.value
        : ReturnType.MTD);
    changeBool();
  }

  void changeBool() {
    fromApply = true;
}

  returnTypeChangedForSummary(ReturnType returnType) {
    setState(() {
      selectedType = returnType;
    });
  }

  
  void setReturn(List<ReturnPercentItemData?>? selectedReturnTypeList) {

    if(fromApply) {
      if(selectedReturnTypeList?.isNotEmpty ?? false) {
        selectedType = _getReturnType(id: selectedReturnTypeList?[(selectedReturnTypeList.length) - 1]?.id);
      }
    }
    fromApply = false;

  }

  ReturnType _getReturnType({required String? id}) {
    switch(id) {
      case 'mtd_twr':
        return ReturnType.MTD;
      case 'qtd_twr':
        return ReturnType.QTD;
      case 'cytd_twr':
        return ReturnType.CYTD;
      case 'fytd_twr':
        return ReturnType.FYTD;
      case 'year_1_twr':
        return ReturnType.Yr1;
      case 'year_2_twr':
        return ReturnType.Yr2;
      case 'year_3_twr':
        return ReturnType.Yr3;
      case 'twr':
        return ReturnType.IncTwr;
      case 'xirr':
        return ReturnType.IncIrr;
      default:
        return ReturnType.MTD;
    }
  }

  @override
  Widget build(BuildContext context) {
    return BlocBuilder<StealthCubit, bool>(builder: (context, stealthValue) {
      return BlocBuilder<PerformanceEntityCubit, PerformanceEntityState>(
          bloc: widget.performanceEntityCubit,
          builder: (context, entity) {
            return BlocBuilder<PerformanceAsOnDateCubit,
                    PerformanceAsOnDateState>(
                bloc: widget.performanceAsOnDateCubit,
                builder: (context, asOnDate) {
                  return BlocBuilder<UserCubit, UserEntity?>(
                      builder: (context, user) {
                    return BlocBuilder<PerformanceReturnPercentCubit,
                            PerformanceReturnPercentState>(
                        bloc: widget.performanceReturnPercentCubit,
                        builder: (context, returnState) {
                          return BlocBuilder<PerformanceReportCubit,
                                  PerformanceReportState>(
                              bloc: widget.performanceReportCubit,
                              builder: (context, state) {
                                if (state is PerformanceReportLoaded) {
                                  if(state.chartData.positions.isNotEmpty) {

                                    setReturn(widget.performanceReturnPercentCubit.state.selectedPerformanceReturnPercentList);

                                    PerformanceReportEntity chartData =
                                    AppHelpers.getPerformanceAsPerPosition(
                                        report: state.chartData,
                                        selectedItemIndex:
                                        widget.selectedItemIndex ?? [],
                                        positionLevel:
                                        widget.currentLevel ?? 0);
                                    bool isNegativeValueContain = AppHelpers.isPerformanceContainNegativeValue(
                                        twrMTD: AppHelpers.shouldShowReturn(
                                            selectedReturnPercentList: returnState
                                                .selectedPerformanceReturnPercentList,
                                            returnType: ReturnType.MTD)
                                            ? chartData.twrMTD ?? 0.00
                                            : 0.00,
                                        twrQTD: AppHelpers.shouldShowReturn(
                                            selectedReturnPercentList: returnState
                                                .selectedPerformanceReturnPercentList,
                                            returnType: ReturnType.QTD)
                                            ? chartData.twrQTD ?? 0.00
                                            : 0.00,
                                        twrCYTD: AppHelpers.shouldShowReturn(
                                            selectedReturnPercentList:
                                            returnState.selectedPerformanceReturnPercentList,
                                            returnType: ReturnType.CYTD)
                                            ? chartData.twrCYTD ?? 0.00
                                            : 0.00,
                                        twrFYTD: AppHelpers.shouldShowReturn(selectedReturnPercentList: returnState.selectedPerformanceReturnPercentList, returnType: ReturnType.FYTD) ? chartData.twrFYTD ?? 0.00 : 0.00,
                                        twr1YR: AppHelpers.shouldShowReturn(selectedReturnPercentList: returnState.selectedPerformanceReturnPercentList, returnType: ReturnType.Yr1) ? chartData.twr1YR ?? 0.00 : 0.00,
                                        twr2YR: AppHelpers.shouldShowReturn(selectedReturnPercentList: returnState.selectedPerformanceReturnPercentList, returnType: ReturnType.Yr2) ? chartData.twr2YR ?? 0.00 : 0.00,
                                        twr3YR: AppHelpers.shouldShowReturn(selectedReturnPercentList: returnState.selectedPerformanceReturnPercentList, returnType: ReturnType.Yr3) ? chartData.twr3YR ?? 0.00 : 0.00,
                                        inceptionTWR: AppHelpers.shouldShowReturn(selectedReturnPercentList: returnState.selectedPerformanceReturnPercentList, returnType: ReturnType.IncTwr) ? chartData.inceptionTWR ?? 0.00 : 0.00,
                                        inceptionIRR: AppHelpers.shouldShowReturn(selectedReturnPercentList: returnState.selectedPerformanceReturnPercentList, returnType: ReturnType.IncIrr) ? chartData.inceptionIRR ?? 0.00 : 0.00,
                                        benchmarkMTD: AppHelpers.shouldShowReturn(selectedReturnPercentList: returnState.selectedPerformanceReturnPercentList, returnType: ReturnType.MTD) ? chartData.benchmarkMTD ?? 0.00 : 0.00,
                                        benchmarkQTD: AppHelpers.shouldShowReturn(selectedReturnPercentList: returnState.selectedPerformanceReturnPercentList, returnType: ReturnType.QTD) ? chartData.benchmarkQTD ?? 0.00 : 0.00,
                                        benchmarkCYTD: AppHelpers.shouldShowReturn(selectedReturnPercentList: returnState.selectedPerformanceReturnPercentList, returnType: ReturnType.CYTD) ? chartData.benchmarkCYTD ?? 0.00 : 0.00,
                                        benchmarkFYTD: AppHelpers.shouldShowReturn(selectedReturnPercentList: returnState.selectedPerformanceReturnPercentList, returnType: ReturnType.FYTD) ? chartData.benchmarkFYTD ?? 0.00 : 0.00,
                                        benchmark1YR: AppHelpers.shouldShowReturn(selectedReturnPercentList: returnState.selectedPerformanceReturnPercentList, returnType: ReturnType.Yr1) ? chartData.benchmark1YR ?? 0.00 : 0.00,
                                        benchmark2YR: AppHelpers.shouldShowReturn(selectedReturnPercentList: returnState.selectedPerformanceReturnPercentList, returnType: ReturnType.Yr2) ? chartData.benchmark2YR ?? 0.00 : 0.00,
                                        benchmark3YR: AppHelpers.shouldShowReturn(selectedReturnPercentList: returnState.selectedPerformanceReturnPercentList, returnType: ReturnType.Yr3) ? chartData.benchmark3YR ?? 0.00 : 0.00,
                                        benchmarkTWR: AppHelpers.shouldShowReturn(selectedReturnPercentList: returnState.selectedPerformanceReturnPercentList, returnType: ReturnType.IncTwr) ? chartData.benchmarkTWR ?? 0.00 : 0.00,
                                        benchmarkIRR: AppHelpers.shouldShowReturn(selectedReturnPercentList: returnState.selectedPerformanceReturnPercentList, returnType: ReturnType.IncIrr) ? chartData.benchmarkIRR ?? 0.00 : 0.00);
                                    return Container(
                                      width: double.infinity,
                                      decoration: widget.isSummary && !widget.isFavorite ? BoxDecoration(
                                        border: Border(
                                            top: BorderSide(
                                              color: AppColor.textGrey
                                                  .withValues(alpha: 0.2),
                                              width: 0.6,
                                            )),
                                      )
                                          : null,
                                      margin: EdgeInsets.symmetric(
                                        horizontal: Sizes.dimen_14.w,
                                      ),
                                      padding: EdgeInsets.symmetric(
                                          vertical: Sizes.dimen_4.h),
                                      child: Column(
                                        mainAxisSize: MainAxisSize.min,
                                        children: [
                                          if (widget.isSummary &&
                                              !widget.isFavorite)
                                            Container(
                                              height: Sizes.dimen_14.h,
                                              child: Column(
                                                children: [
                                                  BlocBuilder<UserCubit,
                                                      UserEntity?>(
                                                      builder: (context, user) {
                                                        return BlocBuilder<
                                                            PerformanceEntityCubit,
                                                            PerformanceEntityState>(
                                                            bloc: widget
                                                                .performanceEntityCubit,
                                                            builder: (context,
                                                                entityState) {
                                                              return BlocBuilder<
                                                                  PerformanceAsOnDateCubit,
                                                                  PerformanceAsOnDateState>(
                                                                  bloc: widget
                                                                      .performanceAsOnDateCubit,
                                                                  builder: (context,
                                                                      asOnDate) {
                                                                    return Row(
                                                                      children: [
                                                                        if(entityState.selectedPerformanceEntity?.id != widget.universalEntityFilterCubit.state.selectedUniversalEntity?.id ||
                                                                            !((entityState.selectedPerformanceEntity?.type?.contains(widget.universalEntityFilterCubit.state.selectedUniversalEntity?.type ?? 'None') ?? false))
                                                                        )
                                                                          ...[

                                                                            EntityAsonDateLabels(text: "${entityState.selectedPerformanceEntity?.name}"),
                                                                            UIHelper
                                                                                .horizontalSpaceSmall
                                                                          ],
                                                                        if(!(asOnDate.asOnDate?.contains(widget.universalFilterAsOnDateCubit.state.asOnDate ?? "None") ?? false))

                                                                          EntityAsonDateLabels(text: "${DateFormat(user?.dateFormat ?? 'dd MMM yyyy').format(DateTime.parse(asOnDate.asOnDate ?? DateTime.now().toString()))}"),

                                                                        if((asOnDate.asOnDate?.contains(widget.universalFilterAsOnDateCubit.state.asOnDate ?? "None") ?? true) && !(entityState.selectedPerformanceEntity?.id != widget.universalEntityFilterCubit.state.selectedUniversalEntity?.id ||
                                                                            !((entityState.selectedPerformanceEntity?.type?.contains(widget.universalEntityFilterCubit.state.selectedUniversalEntity?.type ?? 'None') ?? true))))

                                                                          const FilterPersonalizationHint(),

                                                                        UIHelper
                                                                            .horizontalSpaceSmall,
                                                                        Expanded(
                                                                            child:
                                                                            Container()),

                                                                        GestureDetector(
                                                                          onTap:
                                                                              () async {
                                                                            await showModalBottomSheet(
                                                                              context:
                                                                              context,
                                                                              shape:
                                                                              RoundedRectangleBorder(
                                                                                borderRadius:
                                                                                BorderRadius.only(
                                                                                  topLeft:
                                                                                  Radius.circular(Sizes.dimen_10.r),
                                                                                  topRight:
                                                                                  Radius.circular(Sizes.dimen_10.r),
                                                                                ),
                                                                              ),
                                                                              isScrollControlled:
                                                                              true,
                                                                              builder:
                                                                                  (context) {
                                                                                return PerformanceUniversalFilter(
                                                                                  favorite:
                                                                                  widget.favorite,
                                                                                  isFavorite:
                                                                                  widget.isFavorite,
                                                                                  performanceEntityCubit:
                                                                                  widget.performanceEntityCubit,
                                                                                  changeBool: changeBool,
                                                                                  changeBoolFromDetails: widget.changeBoolFromDetails ?? () {},
                                                                                  performancePrimaryGroupingCubit:
                                                                                  widget.performancePrimaryGroupingCubit,
                                                                                  performanceSecondaryGroupingCubit:
                                                                                  widget.performanceSecondaryGroupingCubit,
                                                                                  performancePrimarySubGroupingCubit:
                                                                                  widget.performancePrimarySubGroupingCubit,
                                                                                  performanceSecondarySubGroupingCubit:
                                                                                  widget.performanceSecondarySubGroupingCubit,
                                                                                  performancePeriodCubit:
                                                                                  widget.performancePeriodCubit,
                                                                                  performanceNumberOfPeriodCubit:
                                                                                  widget.performanceNumberOfPeriodCubit,
                                                                                  performanceReturnPercentCubit:
                                                                                  widget.performanceReturnPercentCubit,
                                                                                  performanceCurrencyCubit:
                                                                                  widget.performanceCurrencyCubit,
                                                                                  performanceDenominationCubit:
                                                                                  widget.performanceDenominationCubit,
                                                                                  performanceAsOnDateCubit:
                                                                                  widget.performanceAsOnDateCubit,
                                                                                  performanceReportCubit:
                                                                                  widget.performanceReportCubit,
                                                                                  performanceLoadingCubit:
                                                                                  widget.performanceLoadingCubit,
                                                                                  performancePartnershipMethodCubit: widget.performancePartnershipMethodCubit,
                                                                                  performanceHoldingMethodCubit: widget.performanceHoldingMethodCubit,
                                                                                );
                                                                              },
                                                                            );
                                                                          },
                                                                          child: Stack(
                                                                            children: [
                                                                              if(!((asOnDate.asOnDate?.contains(widget.universalFilterAsOnDateCubit.state.asOnDate ?? "None") ?? true) && !(entityState.selectedPerformanceEntity?.id != widget.universalEntityFilterCubit.state.selectedUniversalEntity?.id ||
                                                                                  !((entityState.selectedPerformanceEntity?.type?.contains(widget.universalEntityFilterCubit.state.selectedUniversalEntity?.type ?? 'None') ?? true)))))

                                                                                const BlueDotIcon(),

                                                                              const FilterIcon()
                                                                            ],
                                                                          ),
                                                                        ),
                                                                        UIHelper.horizontalSpace(Sizes.dimen_4.w),

                                                                      ],
                                                                    );
                                                                  });
                                                            });
                                                      }),
                                                ],
                                              ),
                                            ),

                                          if(!widget.isSummary)
                                            BlocBuilder<UserCubit, UserEntity?>(
                                                builder: (context, user) {
                                                  return BlocBuilder<PerformanceEntityCubit, PerformanceEntityState>(
                                                      bloc: widget.performanceEntityCubit,
                                                      builder: (context, entityState) {
                                                        return BlocBuilder<PerformanceAsOnDateCubit, PerformanceAsOnDateState>(
                                                            bloc: widget.performanceAsOnDateCubit,
                                                            builder: (context, asOnDate) {
                                                              return Container(
                                                                padding: EdgeInsets.symmetric(vertical: Sizes.dimen_4.h),
                                                                decoration:
                                                                const BoxDecoration(
                                                                  border: Border(
                                                                    bottom: BorderSide(
                                                                        color: AppColor
                                                                            .textGrey,
                                                                        width: 0.1),
                                                                  ),
                                                                ),
                                                                child: Row(
                                                                  crossAxisAlignment: CrossAxisAlignment.start,
                                                                  children: [
                                                                    Expanded(
                                                                      child: Column(
                                                                        crossAxisAlignment: CrossAxisAlignment.start,
                                                                        children: [
                                                                          Row(
                                                                            children: [
                                                                              Flexible(
                                                                                child: Text("${entityState.selectedPerformanceEntity?.name}",
                                                                                  style: Theme.of(context).textTheme.titleMedium?.copyWith(fontWeight: FontWeight.w600),),
                                                                              ),
                                                                            ],
                                                                          ),
                                                                          UIHelper.horizontalSpaceSmall,
                                                                          Text("as on ${DateFormat(user?.dateFormat ?? 'dd MMM yyyy').format(DateTime.parse(asOnDate.asOnDate ?? DateTime.now().toString()))}",
                                                                              style: Theme.of(context).textTheme.bodyLarge?.copyWith(fontWeight: FontWeight.normal, fontSize: Sizes.dimen_12)),
                                                                          UIHelper.horizontalSpaceSmall,
                                                                        ],
                                                                      ),
                                                                    ),
                                                                    if (widget.currentLevel == 0)
                                                                      ...[
                                                                        if(!widget.isSummary)
                                                                          GestureDetector(
                                                                            onTap: () async {
                                                                              await showModalBottomSheet(
                                                                                context: context,
                                                                                shape: RoundedRectangleBorder(
                                                                                  borderRadius: BorderRadius.only(
                                                                                    topLeft: Radius.circular(Sizes.dimen_10.r),
                                                                                    topRight: Radius.circular(Sizes.dimen_10.r),
                                                                                  ),
                                                                                ),
                                                                                isScrollControlled: true,
                                                                                builder: (context) {
                                                                                  return PerformanceUniversalFilter(
                                                                                    favorite: widget.favorite,
                                                                                    isFavorite: widget.isFavorite,
                                                                                    changeBool: changeBool,
                                                                                    changeBoolFromDetails: widget.changeBoolFromDetails ?? () {},
                                                                                    performanceEntityCubit:
                                                                                    widget.performanceEntityCubit,
                                                                                    performancePrimaryGroupingCubit:
                                                                                    widget.performancePrimaryGroupingCubit,
                                                                                    performanceSecondaryGroupingCubit:
                                                                                    widget.performanceSecondaryGroupingCubit,
                                                                                    performancePrimarySubGroupingCubit: widget
                                                                                        .performancePrimarySubGroupingCubit,
                                                                                    performanceSecondarySubGroupingCubit: widget
                                                                                        .performanceSecondarySubGroupingCubit,
                                                                                    performancePeriodCubit:
                                                                                    widget.performancePeriodCubit,
                                                                                    performanceNumberOfPeriodCubit:
                                                                                    widget.performanceNumberOfPeriodCubit,
                                                                                    performanceReturnPercentCubit:
                                                                                    widget.performanceReturnPercentCubit,
                                                                                    performanceCurrencyCubit:
                                                                                    widget.performanceCurrencyCubit,
                                                                                    performanceDenominationCubit:
                                                                                    widget.performanceDenominationCubit,
                                                                                    performanceAsOnDateCubit:
                                                                                    widget.performanceAsOnDateCubit,
                                                                                    performanceReportCubit:
                                                                                    widget.performanceReportCubit,
                                                                                    performanceLoadingCubit:
                                                                                    widget.performanceLoadingCubit,
                                                                                    performancePartnershipMethodCubit: widget.performancePartnershipMethodCubit,
                                                                                    performanceHoldingMethodCubit:  widget.performanceHoldingMethodCubit,
                                                                                  );
                                                                                },
                                                                              );
                                                                            },
                                                                            child: const FilterIcon(isSummary: true,)

                                                                          ),

                                                                        if(widget.isFavorite && widget.isSummary)
                                                                          ...[
                                                                            UIHelper.horizontalSpaceMedium,
                                                                            GestureDetector(
                                                                                onTap: () {
                                                                                  Navigator.of(context)
                                                                                      .pushNamed(
                                                                                      RouteList
                                                                                          .performanceReport,
                                                                                      arguments: PerformanceArgument(
                                                                                          favorite: widget
                                                                                              .favorite,
                                                                                          changeBool: changeBool,
                                                                                          setReturnForDetails: setReturn,
                                                                                          returnTypeChangedForSummary: returnTypeChangedForSummary,
                                                                                          universalEntityFilterCubit: widget.universalEntityFilterCubit,
                                                                                          universalFilterAsOnDateCubit: widget.universalFilterAsOnDateCubit,
                                                                                          favouriteUniversalFilterAsOnDateCubit: widget.favouriteUniversalFilterAsOnDateCubit,
                                                                                          isFavorite: widget
                                                                                              .isFavorite,
                                                                                          performanceEntityCubit: widget
                                                                                              .performanceEntityCubit,
                                                                                          performanceSortCubit: widget
                                                                                              .performanceSortCubit,
                                                                                          performanceReportCubit: widget
                                                                                              .performanceReportCubit,
                                                                                          performancePrimaryGroupingCubit: widget
                                                                                              .performancePrimaryGroupingCubit,
                                                                                          performanceSecondaryGroupingCubit: widget
                                                                                              .performanceSecondaryGroupingCubit,
                                                                                          performancePrimarySubGroupingCubit: widget
                                                                                              .performancePrimarySubGroupingCubit,
                                                                                          performanceSecondarySubGroupingCubit: widget
                                                                                              .performanceSecondarySubGroupingCubit,
                                                                                          performanceNumberOfPeriodCubit: widget
                                                                                              .performanceNumberOfPeriodCubit,
                                                                                          performanceReturnPercentCubit: widget
                                                                                              .performanceReturnPercentCubit,
                                                                                          performanceCurrencyCubit: widget
                                                                                              .performanceCurrencyCubit,
                                                                                          performanceDenominationCubit: widget
                                                                                              .performanceDenominationCubit,
                                                                                          performancePeriodCubit: widget
                                                                                              .performancePeriodCubit,
                                                                                          performanceAsOnDateCubit:
                                                                                          widget
                                                                                              .performanceAsOnDateCubit,
                                                                                          performanceLoadingCubit:
                                                                                          widget
                                                                                              .performanceLoadingCubit,
                                                                                          returnType:
                                                                                          selectedType,
                                                                                          entityData: context
                                                                                              .read<DashboardFilterCubit>()
                                                                                              .state
                                                                                              .selectedFilter,
                                                                                          asOnDate: "30 July 2024",
                                                                                          performancePartnershipMethodCubit: widget.performancePartnershipMethodCubit,
                                                                                          performanceHoldingMethodCubit: widget.performanceHoldingMethodCubit)
                                                                                  );
                                                                                },
                                                                                child: const NavigationArrow()

                                                                            )
                                                                          ]
                                                                      ]
                                                                  ],
                                                                ),
                                                              );
                                                            }
                                                        );
                                                      }
                                                  );
                                                }
                                            ),

                                          if (widget.isSummary && !widget.isFavorite)
                                            Row(
                                              crossAxisAlignment:
                                              CrossAxisAlignment.start,
                                              children: [
                                                Expanded(
                                                  child: Column(
                                                    crossAxisAlignment:
                                                    CrossAxisAlignment.start,
                                                    children: [
                                                      BlocBuilder<FavoritesCubit,
                                                          FavoritesState>(
                                                          builder: (context,
                                                              favoriteState) {
                                                            return EditableTitleRow.editableRowWithoutTransform(
                                                                canEditTransform: canEdit,
                                                                favoriteT: widget.favorite,
                                                                titleT: widget.favorite?.reportname,
                                                                defaultTitle: StringConstants.performanceReport,
                                                                onEditComplete: (){
                                                                  setState(() {
                                                                    canEdit = false;
                                                                  });
                                                                },
                                                                onEditToggle: (){
                                                                  setState(() {
                                                                    canEdit =
                                                                    !canEdit;
                                                                  });
                                                                },
                                                                isFavT: widget.isFavorite,
                                                                context: context);

                                                          }),
                                                    ],
                                                  ),
                                                ),
                                                UIHelper.horizontalSpaceMedium,

                                                if (widget.isSummary)
                                                  GestureDetector(
                                                      onTap: () {
                                                        Navigator.of(context).pushNamed(RouteList.performanceReport,
                                                            arguments: PerformanceArgument(
                                                                favorite: widget
                                                                    .favorite,
                                                                isFavorite: widget
                                                                    .isFavorite,
                                                                changeBool: changeBool,
                                                                setReturnForDetails: setReturn,
                                                                returnTypeChangedForSummary: returnTypeChangedForSummary,
                                                                universalEntityFilterCubit: widget.universalEntityFilterCubit,
                                                                universalFilterAsOnDateCubit: widget.universalFilterAsOnDateCubit,
                                                                favouriteUniversalFilterAsOnDateCubit: widget.favouriteUniversalFilterAsOnDateCubit,
                                                                performanceEntityCubit: widget
                                                                    .performanceEntityCubit,
                                                                performanceSortCubit: widget
                                                                    .performanceSortCubit,
                                                                performanceReportCubit: widget
                                                                    .performanceReportCubit,
                                                                performancePrimaryGroupingCubit: widget
                                                                    .performancePrimaryGroupingCubit,
                                                                performanceSecondaryGroupingCubit: widget
                                                                    .performanceSecondaryGroupingCubit,
                                                                performancePrimarySubGroupingCubit: widget
                                                                    .performancePrimarySubGroupingCubit,
                                                                performanceSecondarySubGroupingCubit: widget
                                                                    .performanceSecondarySubGroupingCubit,
                                                                performanceNumberOfPeriodCubit: widget
                                                                    .performanceNumberOfPeriodCubit,
                                                                performanceReturnPercentCubit: widget
                                                                    .performanceReturnPercentCubit,
                                                                performanceCurrencyCubit: widget
                                                                    .performanceCurrencyCubit,
                                                                performanceDenominationCubit: widget
                                                                    .performanceDenominationCubit,
                                                                performancePeriodCubit: widget
                                                                    .performancePeriodCubit,
                                                                performanceAsOnDateCubit:
                                                                widget
                                                                    .performanceAsOnDateCubit,
                                                                performanceLoadingCubit:
                                                                widget
                                                                    .performanceLoadingCubit,
                                                                returnType:
                                                                selectedType,
                                                                entityData: context
                                                                    .read<DashboardFilterCubit>()
                                                                    .state
                                                                    .selectedFilter,
                                                                asOnDate: "30 July 2024",
                                                                performancePartnershipMethodCubit: widget.performancePartnershipMethodCubit,
                                                                performanceHoldingMethodCubit: widget.performanceHoldingMethodCubit));
                                                      },
                                                      child: const NavigationArrow()

                                                      )
                                              ],
                                            ),

                                          if(widget.isSummary && widget.isFavorite)
                                            ...[
                                              BlocBuilder<UserCubit, UserEntity?>(
                                                  builder: (context, user) {
                                                    return BlocBuilder<PerformanceEntityCubit, PerformanceEntityState>(
                                                        bloc: widget.performanceEntityCubit,
                                                        builder: (context, entityState) {
                                                          return BlocBuilder<PerformanceAsOnDateCubit, PerformanceAsOnDateState>(
                                                              bloc: widget.performanceAsOnDateCubit,
                                                              builder: (context, asOnDate) {
                                                                return Container(
                                                                  padding: EdgeInsets.symmetric(vertical: Sizes.dimen_4.h),
                                                                  decoration:
                                                                  const BoxDecoration(
                                                                    border: Border(
                                                                      bottom: BorderSide(
                                                                          color: AppColor
                                                                              .textGrey,
                                                                          width: 0.1),
                                                                    ),
                                                                  ),
                                                                  child: Row(
                                                                    crossAxisAlignment: CrossAxisAlignment.start,
                                                                    children: [
                                                                      Expanded(
                                                                          child: BlocBuilder<FavoritesCubit, FavoritesState>(
                                                                              builder: (context, favoriteState) {
                                                                                return Column(
                                                                                  crossAxisAlignment: CrossAxisAlignment.start,
                                                                                  children: [

                                                                                    EditableTitleRow(
                                                                                      canEdit: canEdit,
                                                                                      favorite: widget.favorite,
                                                                                      title: widget.favorite?.reportname,
                                                                                      onEditComplete: () {
                                                                                        setState((){
                                                                                          canEdit = false;
                                                                                        });
                                                                                      },
                                                                                       isFav: widget.isFavorite,
                                                                                      defaultTitle: StringConstants.performanceReport,
                                                                                      onEditToggle: () {
                                                                                        setState((){
                                                                                          canEdit = !canEdit;
                                                                                        });
                                                                                      },

                                                                                    ),
                                                                                    UIHelper.verticalSpace(Sizes.dimen_2.h),
                                                                                   Row(
                                                                                      children: [

                                                                                        EntityAsonDateLabels(text: "${entityState.selectedPerformanceEntity?.name}"),
                                                                                        UIHelper.horizontalSpaceSmall,
                                                                                        if(!(asOnDate.asOnDate?.contains(widget.favouriteUniversalFilterAsOnDateCubit.state.asOnDate ?? "None") ?? true))

                                                                                          EntityAsonDateLabels(text: "${DateFormat(user?.dateFormat ?? 'dd MMM yyyy').format(DateTime.parse(asOnDate.asOnDate ?? DateTime.now().toString()))}")
                                                                                      ],
                                                                                    )
                                                                                  ],
                                                                                );

                                                                              }
                                                                          )
                                                                      ),

                                                                      ...[
                                                                        if(!widget.isFavorite)
                                                                          GestureDetector(
                                                                            onTap: () async {
                                                                              await showModalBottomSheet(
                                                                                context: context,
                                                                                shape: RoundedRectangleBorder(
                                                                                  borderRadius: BorderRadius.only(
                                                                                    topLeft: Radius.circular(Sizes.dimen_10.r),
                                                                                    topRight: Radius.circular(Sizes.dimen_10.r),
                                                                                  ),
                                                                                ),
                                                                                isScrollControlled: true,
                                                                                builder: (context) {
                                                                                  return PerformanceUniversalFilter(
                                                                                    favorite:
                                                                                    widget.favorite,
                                                                                    changeBoolFromDetails: widget.changeBoolFromDetails ?? () {},
                                                                                    changeBool: changeBool,
                                                                                    isFavorite:
                                                                                    widget.isFavorite,
                                                                                    performanceEntityCubit:
                                                                                    widget.performanceEntityCubit,
                                                                                    performancePrimaryGroupingCubit:
                                                                                    widget.performancePrimaryGroupingCubit,
                                                                                    performanceSecondaryGroupingCubit:
                                                                                    widget.performanceSecondaryGroupingCubit,
                                                                                    performancePrimarySubGroupingCubit:
                                                                                    widget.performancePrimarySubGroupingCubit,
                                                                                    performanceSecondarySubGroupingCubit:
                                                                                    widget.performanceSecondarySubGroupingCubit,
                                                                                    performancePeriodCubit:
                                                                                    widget.performancePeriodCubit,
                                                                                    performanceNumberOfPeriodCubit:
                                                                                    widget.performanceNumberOfPeriodCubit,
                                                                                    performanceReturnPercentCubit:
                                                                                    widget.performanceReturnPercentCubit,
                                                                                    performanceCurrencyCubit:
                                                                                    widget.performanceCurrencyCubit,
                                                                                    performanceDenominationCubit:
                                                                                    widget.performanceDenominationCubit,
                                                                                    performanceAsOnDateCubit:
                                                                                    widget.performanceAsOnDateCubit,
                                                                                    performanceReportCubit:
                                                                                    widget.performanceReportCubit,
                                                                                    performanceLoadingCubit:
                                                                                    widget.performanceLoadingCubit,
                                                                                    performancePartnershipMethodCubit: widget.performancePartnershipMethodCubit,
                                                                                    performanceHoldingMethodCubit:  widget.performanceHoldingMethodCubit,
                                                                                  );
                                                                                },
                                                                              );
                                                                            },
                                                                            child: FilterIcon.getFilterIcon()

                                                                          ),
                                                                        UIHelper.horizontalSpaceMedium,

                                                                        CustomPopupMenu(
                                                                            onSelect: (int index) async {
                                                                              if (index == 1) {
                                                                                context
                                                                                    .read<FavoritesCubit>()
                                                                                    .saveFilters(
                                                                                  context: context,
                                                                                  shouldUpdate: false,
                                                                                  isPinned: false,
                                                                                  reportId: FavoriteConstants.performanceId,
                                                                                  reportName: "${widget.favorite?.reportname} Copy",
                                                                                  entity: widget.performanceReportCubit.performanceEntityCubit
                                                                                      .state.selectedPerformanceEntity,
                                                                                  performancePrimaryGrouping:
                                                                                  widget.performanceReportCubit.performancePrimaryGroupingCubit
                                                                                      .state.selectedGrouping,
                                                                                  performancePrimarySubGrouping:
                                                                                  widget.performanceReportCubit.performancePrimarySubGroupingCubit
                                                                                      .state.selectedSubGroupingList,
                                                                                  performanceSecondaryGrouping:
                                                                                  widget.performanceReportCubit.performanceSecondaryGroupingCubit
                                                                                      .state.selectedGrouping,
                                                                                  performanceSecondarySubGrouping:
                                                                                  widget.performanceReportCubit.performanceSecondarySubGroupingCubit
                                                                                      .state.selectedSubGroupingList,
                                                                                  performanceReturnPercent: widget.performanceReportCubit.performanceReturnPercentCubit
                                                                                      .state.selectedPerformanceReturnPercentList,
                                                                                  currency: widget.performanceReportCubit.performanceCurrencyCubit
                                                                                      .state.selectedPerformanceCurrency,
                                                                                  denomination: widget.performanceReportCubit.performanceDenominationCubit
                                                                                      .state.selectedPerformanceDenomination,
                                                                                  asOnDate: widget.performanceReportCubit.performanceAsOnDateCubit.state.asOnDate,
                                                                                );

                                                                              } else if (index == 2) {

                                                                                DeleteFavoriteDialog.show(
                                                                                    context: context,
                                                                                  onCancel: (){
                                                                                    Navigator.of(context).popUntil(
                                                                                          (route) =>
                                                                                      route.settings.name ==
                                                                                          RouteList.dashboard,
                                                                                    );
                                                                                  },
                                                                                  onDelete: (){
                                                                                    context
                                                                                        .read<FavoritesCubit>()
                                                                                        .removeFavorites(
                                                                                        context: context,
                                                                                        favorite: widget.favorite);
                                                                                    Navigator.of(context).pop();
                                                                                  }
                                                                                );
                                                                              }
                                                                            }
                                                                        ),

                                                                        if(widget.isFavorite)
                                                                          ...[
                                                                            UIHelper.horizontalSpaceMedium,
                                                                            GestureDetector(
                                                                                onTap: () {
                                                                                  Navigator.of(context)
                                                                                      .pushNamed(
                                                                                      RouteList
                                                                                          .performanceReport,
                                                                                      arguments: PerformanceArgument(
                                                                                          favorite: widget
                                                                                              .favorite,
                                                                                          changeBool: changeBool,
                                                                                          setReturnForDetails: setReturn,
                                                                                          returnTypeChangedForSummary: returnTypeChangedForSummary,
                                                                                          universalEntityFilterCubit: widget.universalEntityFilterCubit,
                                                                                          universalFilterAsOnDateCubit: widget.universalFilterAsOnDateCubit,
                                                                                          favouriteUniversalFilterAsOnDateCubit: widget.favouriteUniversalFilterAsOnDateCubit,
                                                                                          isFavorite: widget
                                                                                              .isFavorite,
                                                                                          performanceSortCubit: widget
                                                                                              .performanceSortCubit,
                                                                                          performanceEntityCubit: widget
                                                                                              .performanceEntityCubit,
                                                                                          performanceReportCubit: widget
                                                                                              .performanceReportCubit,
                                                                                          performancePrimaryGroupingCubit: widget
                                                                                              .performancePrimaryGroupingCubit,
                                                                                          performanceSecondaryGroupingCubit: widget
                                                                                              .performanceSecondaryGroupingCubit,
                                                                                          performancePrimarySubGroupingCubit: widget
                                                                                              .performancePrimarySubGroupingCubit,
                                                                                          performanceSecondarySubGroupingCubit: widget
                                                                                              .performanceSecondarySubGroupingCubit,
                                                                                          performanceNumberOfPeriodCubit:
                                                                                          widget
                                                                                              .performanceNumberOfPeriodCubit,
                                                                                          performanceReturnPercentCubit:
                                                                                          widget
                                                                                              .performanceReturnPercentCubit,
                                                                                          performanceCurrencyCubit:
                                                                                          widget
                                                                                              .performanceCurrencyCubit,
                                                                                          performanceDenominationCubit:
                                                                                          widget
                                                                                              .performanceDenominationCubit,
                                                                                          performancePeriodCubit:
                                                                                          widget
                                                                                              .performancePeriodCubit,
                                                                                          performanceAsOnDateCubit:
                                                                                          widget
                                                                                              .performanceAsOnDateCubit,
                                                                                          performanceLoadingCubit:
                                                                                          widget
                                                                                              .performanceLoadingCubit,
                                                                                          returnType:
                                                                                          selectedType,
                                                                                          entityData: context
                                                                                              .read<
                                                                                              DashboardFilterCubit>()
                                                                                              .state
                                                                                              .selectedFilter,
                                                                                          asOnDate:
                                                                                          "30 July 2024",
                                                                                          performancePartnershipMethodCubit: widget.performancePartnershipMethodCubit,
                                                                                          performanceHoldingMethodCubit: widget.performanceHoldingMethodCubit));
                                                                                },
                                                                                child: const NavigationArrow(isFav: true,)

                                                                            )
                                                                          ]
                                                                      ]
                                                                    ],
                                                                  ),
                                                                );
                                                              }
                                                          );
                                                        }
                                                    );
                                                  }
                                              ),
                                            ],



                                          UIHelper.verticalSpaceSmall,

                                          Flexible(
                                            child: Column(
                                              children: [

                                                Row(
                                                  children: [
                                                    Expanded(
                                                      child: Column(
                                                        children: [
                                                          SizedBox(
                                                            height: ScreenUtil()
                                                                .screenHeight * ((widget.isSummary) ? 0.20 : 0.15),
                                                            child: Stack(
                                                              children: [
                                                                Column(
                                                                  children: [
                                                                    Expanded(
                                                                      child: Container(
                                                                        decoration: BoxDecoration(
                                                                            border: Border(
                                                                              bottom: BorderSide(
                                                                                  color: AppColor
                                                                                      .grey
                                                                                      .withOpacity(
                                                                                      0.1)),
                                                                              left: BorderSide(
                                                                                  color: AppColor
                                                                                      .grey
                                                                                      .withOpacity(
                                                                                      0.1)),
                                                                            )
                                                                        ),
                                                                      ),
                                                                    ),
                                                                    Expanded(
                                                                      child: Container(
                                                                        decoration: BoxDecoration(
                                                                            border: Border(
                                                                              bottom: BorderSide(
                                                                                  color: AppColor
                                                                                      .grey
                                                                                      .withOpacity(
                                                                                      0.1)),
                                                                              left: BorderSide(
                                                                                  color: AppColor
                                                                                      .grey
                                                                                      .withOpacity(
                                                                                      0.1)),
                                                                            )
                                                                        ),
                                                                      ),
                                                                    ),
                                                                    Expanded(
                                                                      child: Container(
                                                                        decoration: BoxDecoration(
                                                                            border: Border(
                                                                              bottom: BorderSide(
                                                                                  color: AppColor
                                                                                      .grey
                                                                                      .withOpacity(
                                                                                      0.1)),
                                                                              left: BorderSide(
                                                                                  color: AppColor
                                                                                      .grey
                                                                                      .withOpacity(
                                                                                      0.1)),
                                                                            )
                                                                        ),
                                                                      ),
                                                                    ),
                                                                    Expanded(
                                                                      child: Container(
                                                                        decoration: BoxDecoration(
                                                                            border: Border(
                                                                              bottom: BorderSide(
                                                                                  color: AppColor
                                                                                      .grey
                                                                                      .withOpacity(
                                                                                      0.1)),
                                                                              left: BorderSide(
                                                                                  color: AppColor
                                                                                      .grey
                                                                                      .withOpacity(
                                                                                      0.1)),
                                                                            )
                                                                        ),
                                                                      ),
                                                                    ),
                                                                    Expanded(
                                                                      child: Container(
                                                                        decoration: BoxDecoration(
                                                                            border: Border(
                                                                              bottom: BorderSide(
                                                                                  color: AppColor
                                                                                      .grey
                                                                                      .withOpacity(
                                                                                      0.1)),
                                                                              left: BorderSide(
                                                                                  color: AppColor
                                                                                      .grey
                                                                                      .withOpacity(
                                                                                      0.1)),
                                                                            )
                                                                        ),
                                                                      ),
                                                                    ),
                                                                  ],
                                                                ),

                                                                Stack(
                                                                  fit: StackFit
                                                                      .expand,
                                                                  children: [
                                                                    FractionallySizedBox(
                                                                      heightFactor: isNegativeValueContain
                                                                          ? 0.5
                                                                          : 1.0,
                                                                      alignment: Alignment
                                                                          .topCenter,
                                                                      child: Row(
                                                                        children: [
                                                                          UIHelper
                                                                              .horizontalSpaceSmall,
                                                                          if(AppHelpers
                                                                              .shouldShowReturn(
                                                                              selectedReturnPercentList: returnState
                                                                                  .selectedPerformanceReturnPercentList,
                                                                              returnType: ReturnType
                                                                                  .MTD))
                                                                            Expanded(
                                                                              child: GestureDetector(
                                                                                onTap: () {
                                                                                  setState(() {
                                                                                    selectedType =
                                                                                        ReturnType
                                                                                            .MTD;
                                                                                    if (widget
                                                                                        .returnTypeChanged !=
                                                                                        null) {
                                                                                      widget
                                                                                          .returnTypeChanged!(
                                                                                          selectedType);
                                                                                    }
                                                                                  });
                                                                                },
                                                                                child: Column(
                                                                                  children: [
                                                                                    Expanded(
                                                                                      child: Stack(
                                                                                        alignment: Alignment
                                                                                            .bottomCenter,
                                                                                        children: [
                                                                                          AnimatedOpacity(
                                                                                            duration: const Duration(
                                                                                                milliseconds: 500),
                                                                                            opacity: selectedType ==
                                                                                                ReturnType
                                                                                                    .MTD
                                                                                                ? 1.0
                                                                                                : 0.5,
                                                                                            child: Row(
                                                                                              crossAxisAlignment: CrossAxisAlignment
                                                                                                  .end,
                                                                                              children: [
                                                                                                Expanded(
                                                                                                  child: (chartData
                                                                                                      .twrMTD ??
                                                                                                      0.00) >=
                                                                                                      0.00
                                                                                                      ? AnimatedFractionallySizedBox(
                                                                                                      duration: const Duration(
                                                                                                          milliseconds: 500),
                                                                                                      heightFactor: AppHelpers
                                                                                                          .getPerformanceChartFraction(
                                                                                                          showBenchmark: !(widget.currentLevel == 0 || widget.isSummary),
                                                                                                          actualReturn: chartData
                                                                                                              .twrMTD ??
                                                                                                              0.00,
                                                                                                          twrMTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .MTD)
                                                                                                              ? chartData
                                                                                                              .twrMTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrQTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .QTD)
                                                                                                              ? chartData
                                                                                                              .twrQTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrCYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .CYTD)
                                                                                                              ? chartData
                                                                                                              .twrCYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrFYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .FYTD)
                                                                                                              ? chartData
                                                                                                              .twrFYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr1YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr1)
                                                                                                              ? chartData
                                                                                                              .twr1YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr2YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr2)
                                                                                                              ? chartData
                                                                                                              .twr2YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr3YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr3)
                                                                                                              ? chartData
                                                                                                              .twr3YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          inceptionTWR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncTwr)
                                                                                                              ? chartData
                                                                                                              .inceptionTWR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          inceptionIRR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncIrr)
                                                                                                              ? chartData
                                                                                                              .inceptionIRR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkMTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .MTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkMTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkQTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .QTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkQTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkCYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .CYTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkCYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkFYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .FYTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkFYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark1YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr1)
                                                                                                              ? chartData
                                                                                                              .benchmark1YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark2YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr2)
                                                                                                              ? chartData
                                                                                                              .benchmark2YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark3YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr3)
                                                                                                              ? chartData
                                                                                                              .benchmark3YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkTWR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncTwr)
                                                                                                              ? chartData
                                                                                                              .benchmarkTWR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkIRR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncIrr)
                                                                                                              ? chartData
                                                                                                              .benchmarkIRR ??
                                                                                                              0.00
                                                                                                              : 0.00
                                                                                                      ),
                                                                                                      alignment: Alignment
                                                                                                          .bottomCenter,
                                                                                                      child: Container(
                                                                                                        color: AppColor
                                                                                                            .seaBlue,
                                                                                                      )
                                                                                                  )
                                                                                                      : const SizedBox
                                                                                                      .shrink(),
                                                                                                ),
                                                                                                UIHelper
                                                                                                    .horizontalSpace(
                                                                                                    Sizes
                                                                                                        .dimen_2
                                                                                                        .w),
                                                                                                if(((chartData.benchmarkMTD ?? 0.0) * 100000).round() != 0 && !(widget.currentLevel == 0 || widget.isSummary))
                                                                                                  Expanded(
                                                                                                    child: (chartData
                                                                                                        .benchmarkMTD ??
                                                                                                        0.00) >=
                                                                                                        0.00
                                                                                                        ? AnimatedFractionallySizedBox(
                                                                                                        duration: const Duration(
                                                                                                            milliseconds: 500),
                                                                                                        heightFactor: AppHelpers
                                                                                                            .getPerformanceChartFraction(
                                                                                                            showBenchmark: !(widget.currentLevel == 0 || widget.isSummary),
                                                                                                            actualReturn: chartData
                                                                                                                .benchmarkMTD ??
                                                                                                                0.00,
                                                                                                            twrMTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .MTD)
                                                                                                                ? chartData
                                                                                                                .twrMTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrQTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .QTD)
                                                                                                                ? chartData
                                                                                                                .twrQTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrCYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .CYTD)
                                                                                                                ? chartData
                                                                                                                .twrCYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrFYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .FYTD)
                                                                                                                ? chartData
                                                                                                                .twrFYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr1YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr1)
                                                                                                                ? chartData
                                                                                                                .twr1YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr2YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr2)
                                                                                                                ? chartData
                                                                                                                .twr2YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr3YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr3)
                                                                                                                ? chartData
                                                                                                                .twr3YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            inceptionTWR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncTwr)
                                                                                                                ? chartData
                                                                                                                .inceptionTWR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            inceptionIRR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncIrr)
                                                                                                                ? chartData
                                                                                                                .inceptionIRR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkMTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .MTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkMTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkQTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .QTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkQTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkCYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .CYTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkCYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkFYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .FYTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkFYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark1YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr1)
                                                                                                                ? chartData
                                                                                                                .benchmark1YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark2YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr2)
                                                                                                                ? chartData
                                                                                                                .benchmark2YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark3YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr3)
                                                                                                                ? chartData
                                                                                                                .benchmark3YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkTWR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncTwr)
                                                                                                                ? chartData
                                                                                                                .benchmarkTWR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkIRR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncIrr)
                                                                                                                ? chartData
                                                                                                                .benchmarkIRR ??
                                                                                                                0.00
                                                                                                                : 0.00),
                                                                                                        alignment: Alignment
                                                                                                            .bottomCenter,
                                                                                                        child: Container(
                                                                                                          color: AppColor
                                                                                                              .purple,
                                                                                                        )
                                                                                                    )
                                                                                                        : const SizedBox
                                                                                                        .shrink(),
                                                                                                  )
                                                                                              ],
                                                                                            ),
                                                                                          ),
                                                                                          if(selectedType ==
                                                                                              ReturnType
                                                                                                  .MTD)
                                                                                            const DottedLine(
                                                                                              direction: Axis
                                                                                                  .vertical,
                                                                                              lineThickness: 1.0,
                                                                                              dashLength: 4.0,
                                                                                              dashColor: Colors
                                                                                                  .black,
                                                                                              dashGapLength: 4.0,
                                                                                              dashGapColor: Colors
                                                                                                  .transparent,
                                                                                            ),
                                                                                          Row(
                                                                                              children: [
                                                                                                Expanded(
                                                                                                    child: Column(
                                                                                                        children: [
                                                                                                          Expanded(
                                                                                                              child: Container(
                                                                                                                  color: AppColor
                                                                                                                      .transparent
                                                                                                              )
                                                                                                          )
                                                                                                        ]
                                                                                                    )
                                                                                                )
                                                                                              ]
                                                                                          ),
                                                                                          Row(
                                                                                              children: [
                                                                                                Expanded(
                                                                                                    child: Column(
                                                                                                        children: [
                                                                                                          Expanded(
                                                                                                              child: Container(
                                                                                                                  color: AppColor
                                                                                                                      .transparent
                                                                                                              )
                                                                                                          )
                                                                                                        ]
                                                                                                    )
                                                                                                )
                                                                                              ]
                                                                                          )
                                                                                        ],
                                                                                      ),
                                                                                    ),
                                                                                  ],
                                                                                ),
                                                                              ),
                                                                            ),
                                                                          if(AppHelpers
                                                                              .shouldShowReturn(
                                                                              selectedReturnPercentList: returnState
                                                                                  .selectedPerformanceReturnPercentList,
                                                                              returnType: ReturnType
                                                                                  .MTD))
                                                                            UIHelper
                                                                                .horizontalSpaceSmall,
                                                                          if(AppHelpers
                                                                              .shouldShowReturn(
                                                                              selectedReturnPercentList: returnState
                                                                                  .selectedPerformanceReturnPercentList,
                                                                              returnType: ReturnType
                                                                                  .QTD))
                                                                            Expanded(
                                                                              child: GestureDetector(
                                                                                onTap: () {
                                                                                  setState(() {
                                                                                    selectedType =
                                                                                        ReturnType
                                                                                            .QTD;
                                                                                    if (widget
                                                                                        .returnTypeChanged !=
                                                                                        null) {
                                                                                      widget
                                                                                          .returnTypeChanged!(
                                                                                          selectedType);
                                                                                    }
                                                                                  });
                                                                                },
                                                                                child: Column(
                                                                                  children: [
                                                                                    Expanded(
                                                                                      child: Stack(
                                                                                        alignment: Alignment
                                                                                            .bottomCenter,
                                                                                        children: [
                                                                                          AnimatedOpacity(
                                                                                            duration: const Duration(
                                                                                                milliseconds: 500),
                                                                                            opacity: selectedType ==
                                                                                                ReturnType
                                                                                                    .QTD
                                                                                                ? 1.0
                                                                                                : 0.5,
                                                                                            child: Row(
                                                                                              crossAxisAlignment: CrossAxisAlignment
                                                                                                  .end,
                                                                                              children: [
                                                                                                Expanded(
                                                                                                  child: (chartData
                                                                                                      .twrQTD ??
                                                                                                      0.00) >=
                                                                                                      0.00
                                                                                                      ? AnimatedFractionallySizedBox(
                                                                                                      duration: const Duration(
                                                                                                          milliseconds: 500),
                                                                                                      heightFactor: AppHelpers
                                                                                                          .getPerformanceChartFraction(
                                                                                                          showBenchmark: !(widget.currentLevel == 0 || widget.isSummary),
                                                                                                          actualReturn: chartData
                                                                                                              .twrQTD ??
                                                                                                              0.00,
                                                                                                          twrMTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .MTD)
                                                                                                              ? chartData
                                                                                                              .twrMTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrQTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .QTD)
                                                                                                              ? chartData
                                                                                                              .twrQTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrCYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .CYTD)
                                                                                                              ? chartData
                                                                                                              .twrCYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrFYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .FYTD)
                                                                                                              ? chartData
                                                                                                              .twrFYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr1YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr1)
                                                                                                              ? chartData
                                                                                                              .twr1YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr2YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr2)
                                                                                                              ? chartData
                                                                                                              .twr2YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr3YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr3)
                                                                                                              ? chartData
                                                                                                              .twr3YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          inceptionTWR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncTwr)
                                                                                                              ? chartData
                                                                                                              .inceptionTWR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          inceptionIRR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncIrr)
                                                                                                              ? chartData
                                                                                                              .inceptionIRR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkMTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .MTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkMTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkQTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .QTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkQTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkCYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .CYTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkCYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkFYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .FYTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkFYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark1YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr1)
                                                                                                              ? chartData
                                                                                                              .benchmark1YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark2YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr2)
                                                                                                              ? chartData
                                                                                                              .benchmark2YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark3YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr3)
                                                                                                              ? chartData
                                                                                                              .benchmark3YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkTWR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncTwr)
                                                                                                              ? chartData
                                                                                                              .benchmarkTWR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkIRR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncIrr)
                                                                                                              ? chartData
                                                                                                              .benchmarkIRR ??
                                                                                                              0.00
                                                                                                              : 0.00),
                                                                                                      alignment: Alignment
                                                                                                          .bottomCenter,
                                                                                                      child: Container(
                                                                                                        color: AppColor
                                                                                                            .seaBlue,
                                                                                                      )
                                                                                                  )
                                                                                                      : const SizedBox
                                                                                                      .shrink(),
                                                                                                ),
                                                                                                UIHelper
                                                                                                    .horizontalSpace(
                                                                                                    Sizes
                                                                                                        .dimen_2
                                                                                                        .w),
                                                                                                if(((chartData.benchmarkQTD ?? 0.0) * 100000).round() != 0 && !(widget.currentLevel == 0 || widget.isSummary))
                                                                                                  Expanded(
                                                                                                    child: (chartData
                                                                                                        .benchmarkQTD ??
                                                                                                        0.00) >=
                                                                                                        0.00
                                                                                                        ? AnimatedFractionallySizedBox(
                                                                                                        duration: const Duration(
                                                                                                            milliseconds: 500),
                                                                                                        heightFactor: AppHelpers
                                                                                                            .getPerformanceChartFraction(
                                                                                                            showBenchmark: !(widget.currentLevel == 0 || widget.isSummary),
                                                                                                            actualReturn: chartData
                                                                                                                .benchmarkQTD ??
                                                                                                                0.00,
                                                                                                            twrMTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .MTD)
                                                                                                                ? chartData
                                                                                                                .twrMTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrQTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .QTD)
                                                                                                                ? chartData
                                                                                                                .twrQTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrCYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .CYTD)
                                                                                                                ? chartData
                                                                                                                .twrCYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrFYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .FYTD)
                                                                                                                ? chartData
                                                                                                                .twrFYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr1YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr1)
                                                                                                                ? chartData
                                                                                                                .twr1YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr2YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr2)
                                                                                                                ? chartData
                                                                                                                .twr2YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr3YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr3)
                                                                                                                ? chartData
                                                                                                                .twr3YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            inceptionTWR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncTwr)
                                                                                                                ? chartData
                                                                                                                .inceptionTWR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            inceptionIRR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncIrr)
                                                                                                                ? chartData
                                                                                                                .inceptionIRR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkMTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .MTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkMTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkQTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .QTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkQTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkCYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .CYTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkCYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkFYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .FYTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkFYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark1YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr1)
                                                                                                                ? chartData
                                                                                                                .benchmark1YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark2YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr2)
                                                                                                                ? chartData
                                                                                                                .benchmark2YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark3YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr3)
                                                                                                                ? chartData
                                                                                                                .benchmark3YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkTWR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncTwr)
                                                                                                                ? chartData
                                                                                                                .benchmarkTWR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkIRR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncIrr)
                                                                                                                ? chartData
                                                                                                                .benchmarkIRR ??
                                                                                                                0.00
                                                                                                                : 0.00),
                                                                                                        alignment: Alignment
                                                                                                            .bottomCenter,
                                                                                                        child: Container(
                                                                                                          color: AppColor
                                                                                                              .purple
                                                                                                              .withOpacity(
                                                                                                              selectedType ==
                                                                                                                  ReturnType
                                                                                                                      .QTD
                                                                                                                  ? 1.0
                                                                                                                  : 0.5),
                                                                                                        )
                                                                                                    )
                                                                                                        : SizedBox
                                                                                                        .shrink(),
                                                                                                  )
                                                                                              ],
                                                                                            ),
                                                                                          ),
                                                                                          if(selectedType ==
                                                                                              ReturnType
                                                                                                  .QTD)
                                                                                            const DottedLine(
                                                                                              direction: Axis
                                                                                                  .vertical,
                                                                                              lineThickness: 1.0,
                                                                                              dashLength: 4.0,
                                                                                              dashColor: Colors
                                                                                                  .black,
                                                                                              dashGapLength: 4.0,
                                                                                              dashGapColor: Colors
                                                                                                  .transparent,
                                                                                            ),
                                                                                          Row(
                                                                                              children: [
                                                                                                Expanded(
                                                                                                    child: Column(
                                                                                                        children: [
                                                                                                          Expanded(
                                                                                                              child: Container(
                                                                                                                  color: AppColor
                                                                                                                      .transparent
                                                                                                              )
                                                                                                          )
                                                                                                        ]
                                                                                                    )
                                                                                                )
                                                                                              ]
                                                                                          )
                                                                                        ],
                                                                                      ),
                                                                                    ),
                                                                                  ],
                                                                                ),
                                                                              ),
                                                                            ),
                                                                          if(AppHelpers
                                                                              .shouldShowReturn(
                                                                              selectedReturnPercentList: returnState
                                                                                  .selectedPerformanceReturnPercentList,
                                                                              returnType: ReturnType
                                                                                  .QTD))
                                                                            UIHelper
                                                                                .horizontalSpaceSmall,
                                                                          if(AppHelpers
                                                                              .shouldShowReturn(
                                                                              selectedReturnPercentList: returnState
                                                                                  .selectedPerformanceReturnPercentList,
                                                                              returnType: ReturnType
                                                                                  .CYTD))
                                                                            Expanded(
                                                                              child: GestureDetector(
                                                                                onTap: () {
                                                                                  setState(() {
                                                                                    selectedType =
                                                                                        ReturnType
                                                                                            .CYTD;
                                                                                    if (widget
                                                                                        .returnTypeChanged !=
                                                                                        null) {
                                                                                      widget
                                                                                          .returnTypeChanged!(
                                                                                          selectedType);
                                                                                    }
                                                                                  });
                                                                                },
                                                                                child: Column(
                                                                                  children: [
                                                                                    Expanded(
                                                                                      child: Stack(
                                                                                        alignment: Alignment
                                                                                            .bottomCenter,
                                                                                        children: [
                                                                                          AnimatedOpacity(
                                                                                            duration: const Duration(
                                                                                                milliseconds: 500),
                                                                                            opacity: selectedType ==
                                                                                                ReturnType
                                                                                                    .CYTD
                                                                                                ? 1.0
                                                                                                : 0.5,
                                                                                            child: Row(
                                                                                              crossAxisAlignment: CrossAxisAlignment
                                                                                                  .end,
                                                                                              children: [
                                                                                                Expanded(
                                                                                                  child: (chartData
                                                                                                      .twrCYTD ??
                                                                                                      0.00) >=
                                                                                                      0.00
                                                                                                      ? AnimatedFractionallySizedBox(
                                                                                                      duration: const Duration(
                                                                                                          milliseconds: 500),
                                                                                                      heightFactor: AppHelpers
                                                                                                          .getPerformanceChartFraction(
                                                                                                          showBenchmark: !(widget.currentLevel == 0 || widget.isSummary),
                                                                                                          actualReturn: chartData
                                                                                                              .twrCYTD ??
                                                                                                              0.00,
                                                                                                          twrMTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .MTD)
                                                                                                              ? chartData
                                                                                                              .twrMTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrQTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .QTD)
                                                                                                              ? chartData
                                                                                                              .twrQTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrCYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .CYTD)
                                                                                                              ? chartData
                                                                                                              .twrCYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrFYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .FYTD)
                                                                                                              ? chartData
                                                                                                              .twrFYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr1YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr1)
                                                                                                              ? chartData
                                                                                                              .twr1YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr2YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr2)
                                                                                                              ? chartData
                                                                                                              .twr2YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr3YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr3)
                                                                                                              ? chartData
                                                                                                              .twr3YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          inceptionTWR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncTwr)
                                                                                                              ? chartData
                                                                                                              .inceptionTWR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          inceptionIRR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncIrr)
                                                                                                              ? chartData
                                                                                                              .inceptionIRR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkMTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .MTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkMTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkQTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .QTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkQTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkCYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .CYTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkCYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkFYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .FYTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkFYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark1YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr1)
                                                                                                              ? chartData
                                                                                                              .benchmark1YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark2YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr2)
                                                                                                              ? chartData
                                                                                                              .benchmark2YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark3YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr3)
                                                                                                              ? chartData
                                                                                                              .benchmark3YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkTWR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncTwr)
                                                                                                              ? chartData
                                                                                                              .benchmarkTWR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkIRR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncIrr)
                                                                                                              ? chartData
                                                                                                              .benchmarkIRR ??
                                                                                                              0.00
                                                                                                              : 0.00),
                                                                                                      alignment: Alignment
                                                                                                          .bottomCenter,
                                                                                                      child: Container(
                                                                                                          color: AppColor
                                                                                                              .seaBlue
                                                                                                      )
                                                                                                  )
                                                                                                      : const SizedBox
                                                                                                      .shrink(),
                                                                                                ),
                                                                                                UIHelper
                                                                                                    .horizontalSpace(
                                                                                                    Sizes
                                                                                                        .dimen_2
                                                                                                        .w),
                                                                                                if(((chartData.benchmarkCYTD ?? 0.0) * 100000).round() != 0 && !(widget.currentLevel == 0 || widget.isSummary))
                                                                                                  Expanded(
                                                                                                    child: (chartData
                                                                                                        .benchmarkCYTD ??
                                                                                                        0.00) >=
                                                                                                        0.00
                                                                                                        ? AnimatedFractionallySizedBox(
                                                                                                        duration: const Duration(
                                                                                                            milliseconds: 500),
                                                                                                        heightFactor: AppHelpers
                                                                                                            .getPerformanceChartFraction(
                                                                                                            showBenchmark: !(widget.currentLevel == 0 || widget.isSummary),
                                                                                                            actualReturn: chartData
                                                                                                                .benchmarkCYTD ??
                                                                                                                0.00,
                                                                                                            twrMTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .MTD)
                                                                                                                ? chartData
                                                                                                                .twrMTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrQTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .QTD)
                                                                                                                ? chartData
                                                                                                                .twrQTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrCYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .CYTD)
                                                                                                                ? chartData
                                                                                                                .twrCYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrFYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .FYTD)
                                                                                                                ? chartData
                                                                                                                .twrFYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr1YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr1)
                                                                                                                ? chartData
                                                                                                                .twr1YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr2YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr2)
                                                                                                                ? chartData
                                                                                                                .twr2YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr3YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr3)
                                                                                                                ? chartData
                                                                                                                .twr3YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            inceptionTWR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncTwr)
                                                                                                                ? chartData
                                                                                                                .inceptionTWR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            inceptionIRR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncIrr)
                                                                                                                ? chartData
                                                                                                                .inceptionIRR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkMTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .MTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkMTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkQTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .QTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkQTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkCYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .CYTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkCYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkFYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .FYTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkFYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark1YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr1)
                                                                                                                ? chartData
                                                                                                                .benchmark1YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark2YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr2)
                                                                                                                ? chartData
                                                                                                                .benchmark2YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark3YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr3)
                                                                                                                ? chartData
                                                                                                                .benchmark3YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkTWR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncTwr)
                                                                                                                ? chartData
                                                                                                                .benchmarkTWR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkIRR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncIrr)
                                                                                                                ? chartData
                                                                                                                .benchmarkIRR ??
                                                                                                                0.00
                                                                                                                : 0.00),
                                                                                                        alignment: Alignment
                                                                                                            .bottomCenter,
                                                                                                        child: Container(
                                                                                                          color: AppColor
                                                                                                              .purple,
                                                                                                        )
                                                                                                    )
                                                                                                        : const SizedBox
                                                                                                        .shrink(),
                                                                                                  )
                                                                                              ],
                                                                                            ),
                                                                                          ),
                                                                                          if(selectedType ==
                                                                                              ReturnType
                                                                                                  .CYTD)
                                                                                            const DottedLine(
                                                                                              direction: Axis
                                                                                                  .vertical,
                                                                                              lineThickness: 1.0,
                                                                                              dashLength: 4.0,
                                                                                              dashColor: Colors
                                                                                                  .black,
                                                                                              dashGapLength: 4.0,
                                                                                              dashGapColor: Colors
                                                                                                  .transparent,
                                                                                            ),
                                                                                          Row(
                                                                                              children: [
                                                                                                Expanded(
                                                                                                    child: Column(
                                                                                                        children: [
                                                                                                          Expanded(
                                                                                                              child: Container(
                                                                                                                  color: AppColor
                                                                                                                      .transparent
                                                                                                              )
                                                                                                          )
                                                                                                        ]
                                                                                                    )
                                                                                                )
                                                                                              ]
                                                                                          )
                                                                                        ],
                                                                                      ),
                                                                                    ),
                                                                                  ],
                                                                                ),
                                                                              ),
                                                                            ),
                                                                          if(AppHelpers
                                                                              .shouldShowReturn(
                                                                              selectedReturnPercentList: returnState
                                                                                  .selectedPerformanceReturnPercentList,
                                                                              returnType: ReturnType
                                                                                  .CYTD))
                                                                            UIHelper
                                                                                .horizontalSpaceSmall,
                                                                          if(AppHelpers
                                                                              .shouldShowReturn(
                                                                              selectedReturnPercentList: returnState
                                                                                  .selectedPerformanceReturnPercentList,
                                                                              returnType: ReturnType
                                                                                  .FYTD))
                                                                            Expanded(
                                                                              child: GestureDetector(
                                                                                onTap: () {
                                                                                  setState(() {
                                                                                    selectedType =
                                                                                        ReturnType
                                                                                            .FYTD;
                                                                                    if (widget
                                                                                        .returnTypeChanged !=
                                                                                        null) {
                                                                                      widget
                                                                                          .returnTypeChanged!(
                                                                                          selectedType);
                                                                                    }
                                                                                  });
                                                                                },
                                                                                child: Column(
                                                                                  children: [
                                                                                    Expanded(
                                                                                      child: Stack(
                                                                                        alignment: Alignment
                                                                                            .bottomCenter,
                                                                                        children: [
                                                                                          AnimatedOpacity(
                                                                                            duration: const Duration(
                                                                                                milliseconds: 500),
                                                                                            opacity: selectedType ==
                                                                                                ReturnType
                                                                                                    .FYTD
                                                                                                ? 1.0
                                                                                                : 0.5,
                                                                                            child: Row(
                                                                                              crossAxisAlignment: CrossAxisAlignment
                                                                                                  .end,
                                                                                              children: [
                                                                                                Expanded(
                                                                                                  child: (chartData
                                                                                                      .twrFYTD ??
                                                                                                      0.00) >=
                                                                                                      0.00
                                                                                                      ? AnimatedFractionallySizedBox(
                                                                                                      duration: const Duration(
                                                                                                          milliseconds: 500),
                                                                                                      heightFactor: AppHelpers
                                                                                                          .getPerformanceChartFraction(
                                                                                                          showBenchmark: !(widget.currentLevel == 0 || widget.isSummary),
                                                                                                          actualReturn: chartData
                                                                                                              .twrFYTD ??
                                                                                                              0.00,
                                                                                                          twrMTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .MTD)
                                                                                                              ? chartData
                                                                                                              .twrMTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrQTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .QTD)
                                                                                                              ? chartData
                                                                                                              .twrQTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrCYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .CYTD)
                                                                                                              ? chartData
                                                                                                              .twrCYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrFYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .FYTD)
                                                                                                              ? chartData
                                                                                                              .twrFYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr1YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr1)
                                                                                                              ? chartData
                                                                                                              .twr1YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr2YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr2)
                                                                                                              ? chartData
                                                                                                              .twr2YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr3YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr3)
                                                                                                              ? chartData
                                                                                                              .twr3YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          inceptionTWR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncTwr)
                                                                                                              ? chartData
                                                                                                              .inceptionTWR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          inceptionIRR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncIrr)
                                                                                                              ? chartData
                                                                                                              .inceptionIRR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkMTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .MTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkMTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkQTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .QTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkQTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkCYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .CYTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkCYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkFYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .FYTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkFYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark1YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr1)
                                                                                                              ? chartData
                                                                                                              .benchmark1YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark2YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr2)
                                                                                                              ? chartData
                                                                                                              .benchmark2YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark3YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr3)
                                                                                                              ? chartData
                                                                                                              .benchmark3YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkTWR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncTwr)
                                                                                                              ? chartData
                                                                                                              .benchmarkTWR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkIRR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncIrr)
                                                                                                              ? chartData
                                                                                                              .benchmarkIRR ??
                                                                                                              0.00
                                                                                                              : 0.00),
                                                                                                      alignment: Alignment
                                                                                                          .bottomCenter,
                                                                                                      child: Container(
                                                                                                          color: AppColor
                                                                                                              .seaBlue
                                                                                                      )
                                                                                                  )
                                                                                                      : const SizedBox
                                                                                                      .shrink(),
                                                                                                ),
                                                                                                UIHelper
                                                                                                    .horizontalSpace(
                                                                                                    Sizes
                                                                                                        .dimen_2
                                                                                                        .w),
                                                                                                if(((chartData.benchmarkFYTD ?? 0.0) * 100000).round() != 0 && !(widget.currentLevel == 0 || widget.isSummary))
                                                                                                  Expanded(
                                                                                                    child: (chartData
                                                                                                        .benchmarkFYTD ??
                                                                                                        0.00) >=
                                                                                                        0.00
                                                                                                        ? AnimatedFractionallySizedBox(
                                                                                                        duration: const Duration(
                                                                                                            milliseconds: 500),
                                                                                                        heightFactor: AppHelpers
                                                                                                            .getPerformanceChartFraction(
                                                                                                            showBenchmark: !(widget.currentLevel == 0 || widget.isSummary),
                                                                                                            actualReturn: chartData
                                                                                                                .benchmarkFYTD ??
                                                                                                                0.00,
                                                                                                            twrMTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .MTD)
                                                                                                                ? chartData
                                                                                                                .twrMTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrQTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .QTD)
                                                                                                                ? chartData
                                                                                                                .twrQTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrCYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .CYTD)
                                                                                                                ? chartData
                                                                                                                .twrCYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrFYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .FYTD)
                                                                                                                ? chartData
                                                                                                                .twrFYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr1YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr1)
                                                                                                                ? chartData
                                                                                                                .twr1YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr2YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr2)
                                                                                                                ? chartData
                                                                                                                .twr2YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr3YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr3)
                                                                                                                ? chartData
                                                                                                                .twr3YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            inceptionTWR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncTwr)
                                                                                                                ? chartData
                                                                                                                .inceptionTWR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            inceptionIRR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncIrr)
                                                                                                                ? chartData
                                                                                                                .inceptionIRR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkMTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .MTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkMTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkQTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .QTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkQTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkCYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .CYTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkCYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkFYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .FYTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkFYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark1YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr1)
                                                                                                                ? chartData
                                                                                                                .benchmark1YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark2YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr2)
                                                                                                                ? chartData
                                                                                                                .benchmark2YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark3YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr3)
                                                                                                                ? chartData
                                                                                                                .benchmark3YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkTWR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncTwr)
                                                                                                                ? chartData
                                                                                                                .benchmarkTWR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkIRR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncIrr)
                                                                                                                ? chartData
                                                                                                                .benchmarkIRR ??
                                                                                                                0.00
                                                                                                                : 0.00),
                                                                                                        alignment: Alignment
                                                                                                            .bottomCenter,
                                                                                                        child: Container(
                                                                                                          color: AppColor
                                                                                                              .purple,
                                                                                                        )
                                                                                                    )
                                                                                                        : const SizedBox
                                                                                                        .shrink(),
                                                                                                  )
                                                                                              ],
                                                                                            ),
                                                                                          ),
                                                                                          if(selectedType ==
                                                                                              ReturnType
                                                                                                  .FYTD)
                                                                                            const DottedLine(
                                                                                              direction: Axis
                                                                                                  .vertical,
                                                                                              lineThickness: 1.0,
                                                                                              dashLength: 4.0,
                                                                                              dashColor: Colors
                                                                                                  .black,
                                                                                              dashGapLength: 4.0,
                                                                                              dashGapColor: Colors
                                                                                                  .transparent,
                                                                                            ),
                                                                                          Row(
                                                                                              children: [
                                                                                                Expanded(
                                                                                                    child: Column(
                                                                                                        children: [
                                                                                                          Expanded(
                                                                                                              child: Container(
                                                                                                                  color: AppColor
                                                                                                                      .transparent
                                                                                                              )
                                                                                                          )
                                                                                                        ]
                                                                                                    )
                                                                                                )
                                                                                              ]
                                                                                          )
                                                                                        ],
                                                                                      ),
                                                                                    ),
                                                                                  ],
                                                                                ),
                                                                              ),
                                                                            ),
                                                                          if(AppHelpers
                                                                              .shouldShowReturn(
                                                                              selectedReturnPercentList: returnState
                                                                                  .selectedPerformanceReturnPercentList,
                                                                              returnType: ReturnType
                                                                                  .FYTD))
                                                                            UIHelper
                                                                                .horizontalSpaceSmall,
                                                                          if(AppHelpers
                                                                              .shouldShowReturn(
                                                                              selectedReturnPercentList: returnState
                                                                                  .selectedPerformanceReturnPercentList,
                                                                              returnType: ReturnType
                                                                                  .Yr1))
                                                                            Expanded(
                                                                              child: GestureDetector(
                                                                                onTap: () {
                                                                                  setState(() {
                                                                                    selectedType =
                                                                                        ReturnType
                                                                                            .Yr1;
                                                                                    if (widget
                                                                                        .returnTypeChanged !=
                                                                                        null) {
                                                                                      widget
                                                                                          .returnTypeChanged!(
                                                                                          selectedType);
                                                                                    }
                                                                                  });
                                                                                },
                                                                                child: Column(
                                                                                  children: [
                                                                                    Expanded(
                                                                                      child: Stack(
                                                                                        alignment: Alignment
                                                                                            .bottomCenter,
                                                                                        children: [
                                                                                          AnimatedOpacity(
                                                                                            duration: const Duration(
                                                                                                milliseconds: 500),
                                                                                            opacity: selectedType ==
                                                                                                ReturnType
                                                                                                    .Yr1
                                                                                                ? 1.0
                                                                                                : 0.5,
                                                                                            child: Row(
                                                                                              crossAxisAlignment: CrossAxisAlignment
                                                                                                  .end,
                                                                                              children: [
                                                                                                Expanded(
                                                                                                  child: (chartData
                                                                                                      .twr1YR ??
                                                                                                      0.00) >=
                                                                                                      0.00
                                                                                                      ? AnimatedFractionallySizedBox(
                                                                                                      duration: const Duration(
                                                                                                          milliseconds: 500),
                                                                                                      heightFactor: AppHelpers
                                                                                                          .getPerformanceChartFraction(
                                                                                                          showBenchmark: !(widget.currentLevel == 0 || widget.isSummary),
                                                                                                          actualReturn: chartData
                                                                                                              .twr1YR ??
                                                                                                              0.00,
                                                                                                          twrMTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .MTD)
                                                                                                              ? chartData
                                                                                                              .twrMTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrQTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .QTD)
                                                                                                              ? chartData
                                                                                                              .twrQTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrCYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .CYTD)
                                                                                                              ? chartData
                                                                                                              .twrCYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrFYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .FYTD)
                                                                                                              ? chartData
                                                                                                              .twrFYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr1YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr1)
                                                                                                              ? chartData
                                                                                                              .twr1YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr2YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr2)
                                                                                                              ? chartData
                                                                                                              .twr2YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr3YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr3)
                                                                                                              ? chartData
                                                                                                              .twr3YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          inceptionTWR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncTwr)
                                                                                                              ? chartData
                                                                                                              .inceptionTWR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          inceptionIRR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncIrr)
                                                                                                              ? chartData
                                                                                                              .inceptionIRR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkMTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .MTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkMTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkQTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .QTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkQTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkCYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .CYTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkCYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkFYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .FYTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkFYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark1YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr1)
                                                                                                              ? chartData
                                                                                                              .benchmark1YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark2YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr2)
                                                                                                              ? chartData
                                                                                                              .benchmark2YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark3YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr3)
                                                                                                              ? chartData
                                                                                                              .benchmark3YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkTWR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncTwr)
                                                                                                              ? chartData
                                                                                                              .benchmarkTWR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkIRR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncIrr)
                                                                                                              ? chartData
                                                                                                              .benchmarkIRR ??
                                                                                                              0.00
                                                                                                              : 0.00),
                                                                                                      alignment: Alignment
                                                                                                          .bottomCenter,
                                                                                                      child: Container(
                                                                                                          color: AppColor
                                                                                                              .seaBlue
                                                                                                      )
                                                                                                  )
                                                                                                      : const SizedBox
                                                                                                      .shrink(),
                                                                                                ),
                                                                                                UIHelper
                                                                                                    .horizontalSpace(
                                                                                                    Sizes
                                                                                                        .dimen_2
                                                                                                        .w),
                                                                                                if(((chartData.benchmark1YR ?? 0.0) * 100000).round() != 0 && !(widget.currentLevel == 0 || widget.isSummary))
                                                                                                  Expanded(
                                                                                                    child: (chartData
                                                                                                        .benchmark1YR ??
                                                                                                        0.00) >=
                                                                                                        0.00
                                                                                                        ? AnimatedFractionallySizedBox(
                                                                                                        duration: const Duration(
                                                                                                            milliseconds: 500),
                                                                                                        heightFactor: AppHelpers
                                                                                                            .getPerformanceChartFraction(
                                                                                                            showBenchmark: !(widget.currentLevel == 0 || widget.isSummary),
                                                                                                            actualReturn: chartData
                                                                                                                .benchmark1YR ??
                                                                                                                0.00,
                                                                                                            twrMTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .MTD)
                                                                                                                ? chartData
                                                                                                                .twrMTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrQTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .QTD)
                                                                                                                ? chartData
                                                                                                                .twrQTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrCYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .CYTD)
                                                                                                                ? chartData
                                                                                                                .twrCYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrFYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .FYTD)
                                                                                                                ? chartData
                                                                                                                .twrFYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr1YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr1)
                                                                                                                ? chartData
                                                                                                                .twr1YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr2YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr2)
                                                                                                                ? chartData
                                                                                                                .twr2YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr3YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr3)
                                                                                                                ? chartData
                                                                                                                .twr3YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            inceptionTWR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncTwr)
                                                                                                                ? chartData
                                                                                                                .inceptionTWR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            inceptionIRR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncIrr)
                                                                                                                ? chartData
                                                                                                                .inceptionIRR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkMTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .MTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkMTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkQTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .QTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkQTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkCYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .CYTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkCYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkFYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .FYTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkFYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark1YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr1)
                                                                                                                ? chartData
                                                                                                                .benchmark1YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark2YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr2)
                                                                                                                ? chartData
                                                                                                                .benchmark2YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark3YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr3)
                                                                                                                ? chartData
                                                                                                                .benchmark3YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkTWR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncTwr)
                                                                                                                ? chartData
                                                                                                                .benchmarkTWR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkIRR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncIrr)
                                                                                                                ? chartData
                                                                                                                .benchmarkIRR ??
                                                                                                                0.00
                                                                                                                : 0.00),
                                                                                                        alignment: Alignment
                                                                                                            .bottomCenter,
                                                                                                        child: Container(
                                                                                                          color: AppColor
                                                                                                              .purple,
                                                                                                        )
                                                                                                    )
                                                                                                        : const SizedBox
                                                                                                        .shrink(),
                                                                                                  )
                                                                                              ],
                                                                                            ),
                                                                                          ),
                                                                                          if(selectedType ==
                                                                                              ReturnType
                                                                                                  .Yr1)
                                                                                            const DottedLine(
                                                                                              direction: Axis
                                                                                                  .vertical,
                                                                                              lineThickness: 1.0,
                                                                                              dashLength: 4.0,
                                                                                              dashColor: Colors
                                                                                                  .black,
                                                                                              dashGapLength: 4.0,
                                                                                              dashGapColor: Colors
                                                                                                  .transparent,
                                                                                            ),
                                                                                          Row(
                                                                                              children: [
                                                                                                Expanded(
                                                                                                    child: Column(
                                                                                                        children: [
                                                                                                          Expanded(
                                                                                                              child: Container(
                                                                                                                  color: AppColor
                                                                                                                      .transparent
                                                                                                              )
                                                                                                          )
                                                                                                        ]
                                                                                                    )
                                                                                                )
                                                                                              ]
                                                                                          )
                                                                                        ],
                                                                                      ),
                                                                                    ),
                                                                                  ],
                                                                                ),
                                                                              ),
                                                                            ),
                                                                          if(AppHelpers
                                                                              .shouldShowReturn(
                                                                              selectedReturnPercentList: returnState
                                                                                  .selectedPerformanceReturnPercentList,
                                                                              returnType: ReturnType
                                                                                  .Yr1))
                                                                            UIHelper
                                                                                .horizontalSpaceSmall,
                                                                          if(AppHelpers
                                                                              .shouldShowReturn(
                                                                              selectedReturnPercentList: returnState
                                                                                  .selectedPerformanceReturnPercentList,
                                                                              returnType: ReturnType
                                                                                  .Yr2))
                                                                            Expanded(
                                                                              child: GestureDetector(
                                                                                onTap: () {
                                                                                  setState(() {
                                                                                    selectedType =
                                                                                        ReturnType
                                                                                            .Yr2;
                                                                                    if (widget
                                                                                        .returnTypeChanged !=
                                                                                        null) {
                                                                                      widget
                                                                                          .returnTypeChanged!(
                                                                                          selectedType);
                                                                                    }
                                                                                  });
                                                                                },
                                                                                child: Column(
                                                                                  children: [
                                                                                    Expanded(
                                                                                      child: Stack(
                                                                                        alignment: Alignment
                                                                                            .bottomCenter,
                                                                                        children: [
                                                                                          AnimatedOpacity(
                                                                                            duration: const Duration(
                                                                                                milliseconds: 500),
                                                                                            opacity: selectedType ==
                                                                                                ReturnType
                                                                                                    .Yr2
                                                                                                ? 1.0
                                                                                                : 0.5,
                                                                                            child: Row(
                                                                                              crossAxisAlignment: CrossAxisAlignment
                                                                                                  .end,
                                                                                              children: [
                                                                                                Expanded(
                                                                                                  child: (chartData
                                                                                                      .twr2YR ??
                                                                                                      0.00) >=
                                                                                                      0.00
                                                                                                      ? AnimatedFractionallySizedBox(
                                                                                                      duration: const Duration(
                                                                                                          milliseconds: 500),
                                                                                                      heightFactor: AppHelpers
                                                                                                          .getPerformanceChartFraction(
                                                                                                          showBenchmark: !(widget.currentLevel == 0 || widget.isSummary),
                                                                                                          actualReturn: chartData
                                                                                                              .twr2YR ??
                                                                                                              0.00,
                                                                                                          twrMTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .MTD)
                                                                                                              ? chartData
                                                                                                              .twrMTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrQTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .QTD)
                                                                                                              ? chartData
                                                                                                              .twrQTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrCYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .CYTD)
                                                                                                              ? chartData
                                                                                                              .twrCYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrFYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .FYTD)
                                                                                                              ? chartData
                                                                                                              .twrFYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr1YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr1)
                                                                                                              ? chartData
                                                                                                              .twr1YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr2YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr2)
                                                                                                              ? chartData
                                                                                                              .twr2YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr3YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr3)
                                                                                                              ? chartData
                                                                                                              .twr3YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          inceptionTWR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncTwr)
                                                                                                              ? chartData
                                                                                                              .inceptionTWR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          inceptionIRR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncIrr)
                                                                                                              ? chartData
                                                                                                              .inceptionIRR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkMTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .MTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkMTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkQTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .QTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkQTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkCYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .CYTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkCYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkFYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .FYTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkFYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark1YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr1)
                                                                                                              ? chartData
                                                                                                              .benchmark1YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark2YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr2)
                                                                                                              ? chartData
                                                                                                              .benchmark2YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark3YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr3)
                                                                                                              ? chartData
                                                                                                              .benchmark3YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkTWR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncTwr)
                                                                                                              ? chartData
                                                                                                              .benchmarkTWR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkIRR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncIrr)
                                                                                                              ? chartData
                                                                                                              .benchmarkIRR ??
                                                                                                              0.00
                                                                                                              : 0.00),
                                                                                                      alignment: Alignment
                                                                                                          .bottomCenter,
                                                                                                      child: Container(
                                                                                                          color: AppColor
                                                                                                              .seaBlue
                                                                                                      )
                                                                                                  )
                                                                                                      : const SizedBox
                                                                                                      .shrink(),
                                                                                                ),
                                                                                                UIHelper
                                                                                                    .horizontalSpace(
                                                                                                    Sizes
                                                                                                        .dimen_2
                                                                                                        .w),
                                                                                                if(((chartData.benchmark2YR ?? 0.0) * 100000).round() != 0 && !(widget.currentLevel == 0 || widget.isSummary))
                                                                                                  Expanded(
                                                                                                    child: (chartData
                                                                                                        .benchmark2YR ??
                                                                                                        0.00) >=
                                                                                                        0.00
                                                                                                        ? AnimatedFractionallySizedBox(
                                                                                                        duration: const Duration(
                                                                                                            milliseconds: 500),
                                                                                                        heightFactor: AppHelpers
                                                                                                            .getPerformanceChartFraction(
                                                                                                            showBenchmark: !(widget.currentLevel == 0 || widget.isSummary),
                                                                                                            actualReturn: chartData
                                                                                                                .benchmark2YR ??
                                                                                                                0.00,
                                                                                                            twrMTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .MTD)
                                                                                                                ? chartData
                                                                                                                .twrMTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrQTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .QTD)
                                                                                                                ? chartData
                                                                                                                .twrQTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrCYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .CYTD)
                                                                                                                ? chartData
                                                                                                                .twrCYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrFYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .FYTD)
                                                                                                                ? chartData
                                                                                                                .twrFYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr1YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr1)
                                                                                                                ? chartData
                                                                                                                .twr1YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr2YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr2)
                                                                                                                ? chartData
                                                                                                                .twr2YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr3YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr3)
                                                                                                                ? chartData
                                                                                                                .twr3YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            inceptionTWR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncTwr)
                                                                                                                ? chartData
                                                                                                                .inceptionTWR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            inceptionIRR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncIrr)
                                                                                                                ? chartData
                                                                                                                .inceptionIRR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkMTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .MTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkMTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkQTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .QTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkQTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkCYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .CYTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkCYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkFYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .FYTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkFYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark1YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr1)
                                                                                                                ? chartData
                                                                                                                .benchmark1YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark2YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr2)
                                                                                                                ? chartData
                                                                                                                .benchmark2YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark3YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr3)
                                                                                                                ? chartData
                                                                                                                .benchmark3YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkTWR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncTwr)
                                                                                                                ? chartData
                                                                                                                .benchmarkTWR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkIRR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncIrr)
                                                                                                                ? chartData
                                                                                                                .benchmarkIRR ??
                                                                                                                0.00
                                                                                                                : 0.00),
                                                                                                        alignment: Alignment
                                                                                                            .bottomCenter,
                                                                                                        child: Container(
                                                                                                          color: AppColor
                                                                                                              .purple,
                                                                                                        )
                                                                                                    )
                                                                                                        : const SizedBox
                                                                                                        .shrink(),
                                                                                                  )
                                                                                              ],
                                                                                            ),
                                                                                          ),
                                                                                          if(selectedType ==
                                                                                              ReturnType
                                                                                                  .Yr2)
                                                                                            const DottedLine(
                                                                                              direction: Axis
                                                                                                  .vertical,
                                                                                              lineThickness: 1.0,
                                                                                              dashLength: 4.0,
                                                                                              dashColor: Colors
                                                                                                  .black,
                                                                                              dashGapLength: 4.0,
                                                                                              dashGapColor: Colors
                                                                                                  .transparent,
                                                                                            ),
                                                                                          Row(
                                                                                              children: [
                                                                                                Expanded(
                                                                                                    child: Column(
                                                                                                        children: [
                                                                                                          Expanded(
                                                                                                              child: Container(
                                                                                                                  color: AppColor
                                                                                                                      .transparent
                                                                                                              )
                                                                                                          )
                                                                                                        ]
                                                                                                    )
                                                                                                )
                                                                                              ]
                                                                                          )
                                                                                        ],
                                                                                      ),
                                                                                    ),
                                                                                  ],
                                                                                ),
                                                                              ),
                                                                            ),
                                                                          if(AppHelpers
                                                                              .shouldShowReturn(
                                                                              selectedReturnPercentList: returnState
                                                                                  .selectedPerformanceReturnPercentList,
                                                                              returnType: ReturnType
                                                                                  .Yr2))
                                                                            UIHelper
                                                                                .horizontalSpaceSmall,
                                                                          if(AppHelpers
                                                                              .shouldShowReturn(
                                                                              selectedReturnPercentList: returnState
                                                                                  .selectedPerformanceReturnPercentList,
                                                                              returnType: ReturnType
                                                                                  .Yr3))
                                                                            Expanded(
                                                                              child: GestureDetector(
                                                                                onTap: () {
                                                                                  setState(() {
                                                                                    selectedType =
                                                                                        ReturnType
                                                                                            .Yr3;
                                                                                    if (widget
                                                                                        .returnTypeChanged !=
                                                                                        null) {
                                                                                      widget
                                                                                          .returnTypeChanged!(
                                                                                          selectedType);
                                                                                    }
                                                                                  });
                                                                                },
                                                                                child: Column(
                                                                                  children: [
                                                                                    Expanded(
                                                                                      child: Stack(
                                                                                        alignment: Alignment
                                                                                            .bottomCenter,
                                                                                        children: [
                                                                                          AnimatedOpacity(
                                                                                            duration: const Duration(
                                                                                                milliseconds: 500),
                                                                                            opacity: selectedType ==
                                                                                                ReturnType
                                                                                                    .Yr3
                                                                                                ? 1.0
                                                                                                : 0.5,
                                                                                            child: Row(
                                                                                              crossAxisAlignment: CrossAxisAlignment
                                                                                                  .end,
                                                                                              children: [
                                                                                                Expanded(
                                                                                                  child: (chartData
                                                                                                      .twr3YR ??
                                                                                                      0.00) >=
                                                                                                      0.00
                                                                                                      ? AnimatedFractionallySizedBox(
                                                                                                      duration: const Duration(
                                                                                                          milliseconds: 500),
                                                                                                      heightFactor: AppHelpers
                                                                                                          .getPerformanceChartFraction(
                                                                                                          showBenchmark: !(widget.currentLevel == 0 || widget.isSummary),
                                                                                                          actualReturn: chartData
                                                                                                              .twr3YR ??
                                                                                                              0.00,
                                                                                                          twrMTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .MTD)
                                                                                                              ? chartData
                                                                                                              .twrMTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrQTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .QTD)
                                                                                                              ? chartData
                                                                                                              .twrQTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrCYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .CYTD)
                                                                                                              ? chartData
                                                                                                              .twrCYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrFYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .FYTD)
                                                                                                              ? chartData
                                                                                                              .twrFYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr1YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr1)
                                                                                                              ? chartData
                                                                                                              .twr1YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr2YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr2)
                                                                                                              ? chartData
                                                                                                              .twr2YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr3YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr3)
                                                                                                              ? chartData
                                                                                                              .twr3YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          inceptionTWR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncTwr)
                                                                                                              ? chartData
                                                                                                              .inceptionTWR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          inceptionIRR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncIrr)
                                                                                                              ? chartData
                                                                                                              .inceptionIRR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkMTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .MTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkMTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkQTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .QTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkQTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkCYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .CYTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkCYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkFYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .FYTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkFYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark1YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr1)
                                                                                                              ? chartData
                                                                                                              .benchmark1YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark2YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr2)
                                                                                                              ? chartData
                                                                                                              .benchmark2YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark3YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr3)
                                                                                                              ? chartData
                                                                                                              .benchmark3YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkTWR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncTwr)
                                                                                                              ? chartData
                                                                                                              .benchmarkTWR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkIRR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncIrr)
                                                                                                              ? chartData
                                                                                                              .benchmarkIRR ??
                                                                                                              0.00
                                                                                                              : 0.00),
                                                                                                      alignment: Alignment
                                                                                                          .bottomCenter,
                                                                                                      child: Container(
                                                                                                          color: AppColor
                                                                                                              .seaBlue
                                                                                                      )
                                                                                                  )
                                                                                                      : const SizedBox
                                                                                                      .shrink(),
                                                                                                ),
                                                                                                UIHelper
                                                                                                    .horizontalSpace(
                                                                                                    Sizes
                                                                                                        .dimen_2
                                                                                                        .w),
                                                                                                if(((chartData.benchmark3YR ?? 0.0) * 100000).round() != 0 && !(widget.currentLevel == 0 || widget.isSummary))
                                                                                                  Expanded(
                                                                                                    child: (chartData
                                                                                                        .benchmark3YR ??
                                                                                                        0.00) >=
                                                                                                        0.00
                                                                                                        ? AnimatedFractionallySizedBox(
                                                                                                        duration: const Duration(
                                                                                                            milliseconds: 500),
                                                                                                        heightFactor: AppHelpers
                                                                                                            .getPerformanceChartFraction(
                                                                                                            showBenchmark: !(widget.currentLevel == 0 || widget.isSummary),
                                                                                                            actualReturn: chartData
                                                                                                                .benchmark3YR ??
                                                                                                                0.00,
                                                                                                            twrMTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .MTD)
                                                                                                                ? chartData
                                                                                                                .twrMTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrQTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .QTD)
                                                                                                                ? chartData
                                                                                                                .twrQTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrCYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .CYTD)
                                                                                                                ? chartData
                                                                                                                .twrCYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrFYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .FYTD)
                                                                                                                ? chartData
                                                                                                                .twrFYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr1YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr1)
                                                                                                                ? chartData
                                                                                                                .twr1YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr2YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr2)
                                                                                                                ? chartData
                                                                                                                .twr2YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr3YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr3)
                                                                                                                ? chartData
                                                                                                                .twr3YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            inceptionTWR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncTwr)
                                                                                                                ? chartData
                                                                                                                .inceptionTWR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            inceptionIRR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncIrr)
                                                                                                                ? chartData
                                                                                                                .inceptionIRR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkMTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .MTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkMTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkQTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .QTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkQTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkCYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .CYTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkCYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkFYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .FYTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkFYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark1YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr1)
                                                                                                                ? chartData
                                                                                                                .benchmark1YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark2YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr2)
                                                                                                                ? chartData
                                                                                                                .benchmark2YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark3YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr3)
                                                                                                                ? chartData
                                                                                                                .benchmark3YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkTWR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncTwr)
                                                                                                                ? chartData
                                                                                                                .benchmarkTWR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkIRR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncIrr)
                                                                                                                ? chartData
                                                                                                                .benchmarkIRR ??
                                                                                                                0.00
                                                                                                                : 0.00),
                                                                                                        alignment: Alignment
                                                                                                            .bottomCenter,
                                                                                                        child: Container(
                                                                                                          color: AppColor
                                                                                                              .purple,
                                                                                                        )
                                                                                                    )
                                                                                                        : const SizedBox
                                                                                                        .shrink(),
                                                                                                  )
                                                                                              ],
                                                                                            ),
                                                                                          ),
                                                                                          if(selectedType ==
                                                                                              ReturnType
                                                                                                  .Yr3)
                                                                                            const DottedLine(
                                                                                              direction: Axis
                                                                                                  .vertical,
                                                                                              lineThickness: 1.0,
                                                                                              dashLength: 4.0,
                                                                                              dashColor: Colors
                                                                                                  .black,
                                                                                              dashGapLength: 4.0,
                                                                                              dashGapColor: Colors
                                                                                                  .transparent,
                                                                                            ),
                                                                                          Row(
                                                                                              children: [
                                                                                                Expanded(
                                                                                                    child: Column(
                                                                                                        children: [
                                                                                                          Expanded(
                                                                                                              child: Container(
                                                                                                                  color: AppColor
                                                                                                                      .transparent
                                                                                                              )
                                                                                                          )
                                                                                                        ]
                                                                                                    )
                                                                                                )
                                                                                              ]
                                                                                          )
                                                                                        ],
                                                                                      ),
                                                                                    ),
                                                                                  ],
                                                                                ),
                                                                              ),
                                                                            ),
                                                                          if(AppHelpers
                                                                              .shouldShowReturn(
                                                                              selectedReturnPercentList: returnState
                                                                                  .selectedPerformanceReturnPercentList,
                                                                              returnType: ReturnType
                                                                                  .Yr3))
                                                                            UIHelper
                                                                                .horizontalSpaceSmall,
                                                                          if(AppHelpers
                                                                              .shouldShowReturn(
                                                                              selectedReturnPercentList: returnState
                                                                                  .selectedPerformanceReturnPercentList,
                                                                              returnType: ReturnType
                                                                                  .IncTwr))
                                                                            Expanded(
                                                                              child: GestureDetector(
                                                                                onTap: () {
                                                                                  setState(() {
                                                                                    selectedType =
                                                                                        ReturnType
                                                                                            .IncTwr;
                                                                                    if (widget
                                                                                        .returnTypeChanged !=
                                                                                        null) {
                                                                                      widget
                                                                                          .returnTypeChanged!(
                                                                                          selectedType);
                                                                                    }
                                                                                  });
                                                                                },
                                                                                child: Column(
                                                                                  children: [
                                                                                    Expanded(
                                                                                      child: Stack(
                                                                                        alignment: Alignment
                                                                                            .bottomCenter,
                                                                                        children: [
                                                                                          AnimatedOpacity(
                                                                                            duration: const Duration(
                                                                                                milliseconds: 500),
                                                                                            opacity: selectedType ==
                                                                                                ReturnType
                                                                                                    .IncTwr
                                                                                                ? 1.0
                                                                                                : 0.5,
                                                                                            child: Row(
                                                                                              crossAxisAlignment: CrossAxisAlignment
                                                                                                  .end,
                                                                                              children: [
                                                                                                Expanded(
                                                                                                  child: (chartData
                                                                                                      .inceptionTWR ??
                                                                                                      0.00) >=
                                                                                                      0.00
                                                                                                      ? AnimatedFractionallySizedBox(
                                                                                                      duration: const Duration(
                                                                                                          milliseconds: 500),
                                                                                                      heightFactor: AppHelpers
                                                                                                          .getPerformanceChartFraction(
                                                                                                          showBenchmark: !(widget.currentLevel == 0 || widget.isSummary),
                                                                                                          actualReturn: chartData
                                                                                                              .inceptionTWR ??
                                                                                                              0.00,
                                                                                                          twrMTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .MTD)
                                                                                                              ? chartData
                                                                                                              .twrMTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrQTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .QTD)
                                                                                                              ? chartData
                                                                                                              .twrQTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrCYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .CYTD)
                                                                                                              ? chartData
                                                                                                              .twrCYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrFYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .FYTD)
                                                                                                              ? chartData
                                                                                                              .twrFYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr1YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr1)
                                                                                                              ? chartData
                                                                                                              .twr1YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr2YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr2)
                                                                                                              ? chartData
                                                                                                              .twr2YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr3YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr3)
                                                                                                              ? chartData
                                                                                                              .twr3YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          inceptionTWR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncTwr)
                                                                                                              ? chartData
                                                                                                              .inceptionTWR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          inceptionIRR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncIrr)
                                                                                                              ? chartData
                                                                                                              .inceptionIRR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkMTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .MTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkMTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkQTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .QTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkQTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkCYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .CYTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkCYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkFYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .FYTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkFYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark1YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr1)
                                                                                                              ? chartData
                                                                                                              .benchmark1YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark2YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr2)
                                                                                                              ? chartData
                                                                                                              .benchmark2YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark3YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr3)
                                                                                                              ? chartData
                                                                                                              .benchmark3YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkTWR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncTwr)
                                                                                                              ? chartData
                                                                                                              .benchmarkTWR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkIRR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncIrr)
                                                                                                              ? chartData
                                                                                                              .benchmarkIRR ??
                                                                                                              0.00
                                                                                                              : 0.00),
                                                                                                      alignment: Alignment
                                                                                                          .bottomCenter,
                                                                                                      child: Container(
                                                                                                          color: AppColor
                                                                                                              .seaBlue
                                                                                                      )
                                                                                                  )
                                                                                                      : const SizedBox
                                                                                                      .shrink(),
                                                                                                ),
                                                                                                UIHelper
                                                                                                    .horizontalSpace(
                                                                                                    Sizes
                                                                                                        .dimen_2
                                                                                                        .w),
                                                                                                if(((chartData.benchmarkTWR ?? 0.0) * 100000).round() != 0 && !(widget.currentLevel == 0 || widget.isSummary))
                                                                                                  Expanded(
                                                                                                    child: (chartData
                                                                                                        .benchmarkTWR ??
                                                                                                        0.00) >=
                                                                                                        0.00
                                                                                                        ? AnimatedFractionallySizedBox(
                                                                                                        duration: const Duration(
                                                                                                            milliseconds: 500),
                                                                                                        heightFactor: AppHelpers
                                                                                                            .getPerformanceChartFraction(
                                                                                                            showBenchmark: !(widget.currentLevel == 0 || widget.isSummary),
                                                                                                            actualReturn: chartData
                                                                                                                .benchmarkTWR ??
                                                                                                                0.00,
                                                                                                            twrMTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .MTD)
                                                                                                                ? chartData
                                                                                                                .twrMTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrQTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .QTD)
                                                                                                                ? chartData
                                                                                                                .twrQTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrCYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .CYTD)
                                                                                                                ? chartData
                                                                                                                .twrCYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrFYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .FYTD)
                                                                                                                ? chartData
                                                                                                                .twrFYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr1YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr1)
                                                                                                                ? chartData
                                                                                                                .twr1YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr2YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr2)
                                                                                                                ? chartData
                                                                                                                .twr2YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr3YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr3)
                                                                                                                ? chartData
                                                                                                                .twr3YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            inceptionTWR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncTwr)
                                                                                                                ? chartData
                                                                                                                .inceptionTWR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            inceptionIRR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncIrr)
                                                                                                                ? chartData
                                                                                                                .inceptionIRR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkMTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .MTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkMTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkQTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .QTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkQTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkCYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .CYTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkCYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkFYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .FYTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkFYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark1YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr1)
                                                                                                                ? chartData
                                                                                                                .benchmark1YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark2YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr2)
                                                                                                                ? chartData
                                                                                                                .benchmark2YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark3YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr3)
                                                                                                                ? chartData
                                                                                                                .benchmark3YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkTWR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncTwr)
                                                                                                                ? chartData
                                                                                                                .benchmarkTWR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkIRR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncIrr)
                                                                                                                ? chartData
                                                                                                                .benchmarkIRR ??
                                                                                                                0.00
                                                                                                                : 0.00),
                                                                                                        alignment: Alignment
                                                                                                            .bottomCenter,
                                                                                                        child: Container(
                                                                                                          color: AppColor
                                                                                                              .purple,
                                                                                                        )
                                                                                                    )
                                                                                                        : const SizedBox
                                                                                                        .shrink(),
                                                                                                  )
                                                                                              ],
                                                                                            ),
                                                                                          ),
                                                                                          if(selectedType ==
                                                                                              ReturnType
                                                                                                  .IncTwr)
                                                                                            const DottedLine(
                                                                                              direction: Axis
                                                                                                  .vertical,
                                                                                              lineThickness: 1.0,
                                                                                              dashLength: 4.0,
                                                                                              dashColor: Colors
                                                                                                  .black,
                                                                                              dashGapLength: 4.0,
                                                                                              dashGapColor: Colors
                                                                                                  .transparent,
                                                                                            ),
                                                                                          Row(
                                                                                              children: [
                                                                                                Expanded(
                                                                                                    child: Column(
                                                                                                        children: [
                                                                                                          Expanded(
                                                                                                              child: Container(
                                                                                                                  color: AppColor
                                                                                                                      .transparent
                                                                                                              )
                                                                                                          )
                                                                                                        ]
                                                                                                    )
                                                                                                )
                                                                                              ]
                                                                                          )
                                                                                        ],
                                                                                      ),
                                                                                    ),
                                                                                  ],
                                                                                ),
                                                                              ),
                                                                            ),
                                                                          if(AppHelpers
                                                                              .shouldShowReturn(
                                                                              selectedReturnPercentList: returnState
                                                                                  .selectedPerformanceReturnPercentList,
                                                                              returnType: ReturnType
                                                                                  .IncTwr))
                                                                            UIHelper
                                                                                .horizontalSpaceSmall,
                                                                          if(AppHelpers
                                                                              .shouldShowReturn(
                                                                              selectedReturnPercentList: returnState
                                                                                  .selectedPerformanceReturnPercentList,
                                                                              returnType: ReturnType
                                                                                  .IncIrr))
                                                                            Expanded(
                                                                              child: GestureDetector(
                                                                                onTap: () {
                                                                                  setState(() {
                                                                                    selectedType =
                                                                                        ReturnType
                                                                                            .IncIrr;
                                                                                    if (widget
                                                                                        .returnTypeChanged !=
                                                                                        null) {
                                                                                      widget
                                                                                          .returnTypeChanged!(
                                                                                          selectedType);
                                                                                    }
                                                                                  });
                                                                                },
                                                                                child: Column(
                                                                                  children: [
                                                                                    Expanded(
                                                                                      child: Stack(
                                                                                        alignment: Alignment
                                                                                            .bottomCenter,
                                                                                        children: [
                                                                                          AnimatedOpacity(
                                                                                            duration: const Duration(
                                                                                                milliseconds: 500),
                                                                                            opacity: selectedType ==
                                                                                                ReturnType
                                                                                                    .IncIrr
                                                                                                ? 1.0
                                                                                                : 0.5,
                                                                                            child: Row(
                                                                                              crossAxisAlignment: CrossAxisAlignment
                                                                                                  .end,
                                                                                              children: [
                                                                                                Expanded(
                                                                                                  child: (chartData
                                                                                                      .inceptionIRR ??
                                                                                                      0.00) >=
                                                                                                      0.00
                                                                                                      ? AnimatedFractionallySizedBox(
                                                                                                      duration: const Duration(
                                                                                                          milliseconds: 500),
                                                                                                      heightFactor: AppHelpers
                                                                                                          .getPerformanceChartFraction(
                                                                                                          showBenchmark: !(widget.currentLevel == 0 || widget.isSummary),
                                                                                                          actualReturn: chartData
                                                                                                              .inceptionIRR ??
                                                                                                              0.00,
                                                                                                          twrMTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .MTD)
                                                                                                              ? chartData
                                                                                                              .twrMTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrQTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .QTD)
                                                                                                              ? chartData
                                                                                                              .twrQTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrCYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .CYTD)
                                                                                                              ? chartData
                                                                                                              .twrCYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrFYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .FYTD)
                                                                                                              ? chartData
                                                                                                              .twrFYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr1YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr1)
                                                                                                              ? chartData
                                                                                                              .twr1YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr2YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr2)
                                                                                                              ? chartData
                                                                                                              .twr2YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr3YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr3)
                                                                                                              ? chartData
                                                                                                              .twr3YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          inceptionTWR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncTwr)
                                                                                                              ? chartData
                                                                                                              .inceptionTWR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          inceptionIRR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncIrr)
                                                                                                              ? chartData
                                                                                                              .inceptionIRR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkMTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .MTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkMTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkQTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .QTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkQTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkCYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .CYTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkCYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkFYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .FYTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkFYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark1YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr1)
                                                                                                              ? chartData
                                                                                                              .benchmark1YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark2YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr2)
                                                                                                              ? chartData
                                                                                                              .benchmark2YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark3YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr3)
                                                                                                              ? chartData
                                                                                                              .benchmark3YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkTWR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncTwr)
                                                                                                              ? chartData
                                                                                                              .benchmarkTWR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkIRR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncIrr)
                                                                                                              ? chartData
                                                                                                              .benchmarkIRR ??
                                                                                                              0.00
                                                                                                              : 0.00),
                                                                                                      alignment: Alignment
                                                                                                          .bottomCenter,
                                                                                                      child: Container(
                                                                                                          color: AppColor
                                                                                                              .seaBlue
                                                                                                      )
                                                                                                  )
                                                                                                      : const SizedBox
                                                                                                      .shrink(),
                                                                                                ),
                                                                                              ],
                                                                                            ),
                                                                                          ),
                                                                                          if(selectedType ==
                                                                                              ReturnType
                                                                                                  .IncIrr)
                                                                                            const DottedLine(
                                                                                              direction: Axis
                                                                                                  .vertical,
                                                                                              lineThickness: 1.0,
                                                                                              dashLength: 4.0,
                                                                                              dashColor: Colors
                                                                                                  .black,
                                                                                              dashGapLength: 4.0,
                                                                                              dashGapColor: Colors
                                                                                                  .transparent,
                                                                                            ),
                                                                                          Row(
                                                                                              children: [
                                                                                                Expanded(
                                                                                                    child: Column(
                                                                                                        children: [
                                                                                                          Expanded(
                                                                                                              child: Container(
                                                                                                                  color: AppColor
                                                                                                                      .transparent
                                                                                                              )
                                                                                                          )
                                                                                                        ]
                                                                                                    )
                                                                                                )
                                                                                              ]
                                                                                          )
                                                                                        ],
                                                                                      ),
                                                                                    ),
                                                                                  ],
                                                                                ),
                                                                              ),
                                                                            ),
                                                                          UIHelper
                                                                              .horizontalSpaceSmall,
                                                                        ],
                                                                      ),
                                                                    ),
                                                                    FractionallySizedBox(
                                                                      heightFactor: isNegativeValueContain
                                                                          ? 0.5
                                                                          : 0.0,
                                                                      alignment: Alignment
                                                                          .bottomCenter,
                                                                      child: Row(
                                                                        children: [
                                                                          UIHelper
                                                                              .horizontalSpaceSmall,
                                                                          if(AppHelpers
                                                                              .shouldShowReturn(
                                                                              selectedReturnPercentList: returnState
                                                                                  .selectedPerformanceReturnPercentList,
                                                                              returnType: ReturnType
                                                                                  .MTD))
                                                                            Expanded(
                                                                              child: GestureDetector(
                                                                                onTap: () {
                                                                                  setState(() {
                                                                                    selectedType =
                                                                                        ReturnType
                                                                                            .MTD;
                                                                                    if (widget
                                                                                        .returnTypeChanged !=
                                                                                        null) {
                                                                                      widget
                                                                                          .returnTypeChanged!(
                                                                                          selectedType);
                                                                                    }
                                                                                  });
                                                                                },
                                                                                child: Column(
                                                                                  children: [
                                                                                    Expanded(
                                                                                      child: Stack(
                                                                                        alignment: Alignment
                                                                                            .topCenter,
                                                                                        children: [
                                                                                          AnimatedOpacity(
                                                                                            duration: const Duration(
                                                                                                milliseconds: 500),
                                                                                            opacity: selectedType ==
                                                                                                ReturnType
                                                                                                    .MTD
                                                                                                ? 1.0
                                                                                                : 0.5,
                                                                                            child: Row(
                                                                                              crossAxisAlignment: CrossAxisAlignment
                                                                                                  .start,
                                                                                              children: [
                                                                                                Expanded(
                                                                                                  child: !((chartData
                                                                                                      .twrMTD ??
                                                                                                      0.00) >=
                                                                                                      0.00)
                                                                                                      ? AnimatedFractionallySizedBox(
                                                                                                      duration: const Duration(
                                                                                                          milliseconds: 500),
                                                                                                      heightFactor: AppHelpers
                                                                                                          .getPerformanceChartFraction(
                                                                                                          showBenchmark: !(widget.currentLevel == 0 || widget.isSummary),
                                                                                                          actualReturn: chartData
                                                                                                              .twrMTD ??
                                                                                                              0.00,
                                                                                                          twrMTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .MTD)
                                                                                                              ? chartData
                                                                                                              .twrMTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrQTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .QTD)
                                                                                                              ? chartData
                                                                                                              .twrQTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrCYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .CYTD)
                                                                                                              ? chartData
                                                                                                              .twrCYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrFYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .FYTD)
                                                                                                              ? chartData
                                                                                                              .twrFYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr1YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr1)
                                                                                                              ? chartData
                                                                                                              .twr1YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr2YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr2)
                                                                                                              ? chartData
                                                                                                              .twr2YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr3YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr3)
                                                                                                              ? chartData
                                                                                                              .twr3YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          inceptionTWR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncTwr)
                                                                                                              ? chartData
                                                                                                              .inceptionTWR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          inceptionIRR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncIrr)
                                                                                                              ? chartData
                                                                                                              .inceptionIRR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkMTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .MTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkMTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkQTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .QTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkQTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkCYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .CYTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkCYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkFYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .FYTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkFYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark1YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr1)
                                                                                                              ? chartData
                                                                                                              .benchmark1YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark2YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr2)
                                                                                                              ? chartData
                                                                                                              .benchmark2YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark3YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr3)
                                                                                                              ? chartData
                                                                                                              .benchmark3YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkTWR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncTwr)
                                                                                                              ? chartData
                                                                                                              .benchmarkTWR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkIRR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncIrr)
                                                                                                              ? chartData
                                                                                                              .benchmarkIRR ??
                                                                                                              0.00
                                                                                                              : 0.00),
                                                                                                      alignment: Alignment
                                                                                                          .topCenter,
                                                                                                      child: Container(
                                                                                                        color: AppColor
                                                                                                            .seaBlue,
                                                                                                      )
                                                                                                  )
                                                                                                      : const SizedBox
                                                                                                      .shrink(),
                                                                                                ),
                                                                                                UIHelper
                                                                                                    .horizontalSpace(
                                                                                                    Sizes
                                                                                                        .dimen_2
                                                                                                        .w),
                                                                                                if(((chartData.benchmarkMTD ?? 0.0) * 100000).round() != 0 && !(widget.currentLevel == 0 || widget.isSummary))
                                                                                                  Expanded(
                                                                                                    child: !((chartData
                                                                                                        .benchmarkMTD ??
                                                                                                        0.00) >=
                                                                                                        0.00)
                                                                                                        ? AnimatedFractionallySizedBox(
                                                                                                        duration: const Duration(
                                                                                                            milliseconds: 500),
                                                                                                        heightFactor: AppHelpers
                                                                                                            .getPerformanceChartFraction(
                                                                                                            showBenchmark: !(widget.currentLevel == 0 || widget.isSummary),
                                                                                                            actualReturn: chartData
                                                                                                                .benchmarkMTD ??
                                                                                                                0.00,
                                                                                                            twrMTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .MTD)
                                                                                                                ? chartData
                                                                                                                .twrMTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrQTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .QTD)
                                                                                                                ? chartData
                                                                                                                .twrQTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrCYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .CYTD)
                                                                                                                ? chartData
                                                                                                                .twrCYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrFYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .FYTD)
                                                                                                                ? chartData
                                                                                                                .twrFYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr1YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr1)
                                                                                                                ? chartData
                                                                                                                .twr1YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr2YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr2)
                                                                                                                ? chartData
                                                                                                                .twr2YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr3YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr3)
                                                                                                                ? chartData
                                                                                                                .twr3YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            inceptionTWR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncTwr)
                                                                                                                ? chartData
                                                                                                                .inceptionTWR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            inceptionIRR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncIrr)
                                                                                                                ? chartData
                                                                                                                .inceptionIRR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkMTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .MTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkMTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkQTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .QTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkQTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkCYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .CYTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkCYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkFYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .FYTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkFYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark1YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr1)
                                                                                                                ? chartData
                                                                                                                .benchmark1YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark2YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr2)
                                                                                                                ? chartData
                                                                                                                .benchmark2YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark3YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr3)
                                                                                                                ? chartData
                                                                                                                .benchmark3YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkTWR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncTwr)
                                                                                                                ? chartData
                                                                                                                .benchmarkTWR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkIRR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncIrr)
                                                                                                                ? chartData
                                                                                                                .benchmarkIRR ??
                                                                                                                0.00
                                                                                                                : 0.00),
                                                                                                        alignment: Alignment
                                                                                                            .topCenter,
                                                                                                        child: Container(
                                                                                                          color: AppColor
                                                                                                              .purple,
                                                                                                        )
                                                                                                    )
                                                                                                        : const SizedBox
                                                                                                        .shrink(),
                                                                                                  )
                                                                                              ],
                                                                                            ),
                                                                                          ),
                                                                                          if(selectedType ==
                                                                                              ReturnType
                                                                                                  .MTD)
                                                                                            const DottedLine(
                                                                                              direction: Axis
                                                                                                  .vertical,
                                                                                              lineThickness: 1.0,
                                                                                              dashLength: 4.0,
                                                                                              dashColor: Colors
                                                                                                  .black,
                                                                                              dashGapLength: 4.0,
                                                                                              dashGapColor: Colors
                                                                                                  .transparent,
                                                                                            ),
                                                                                          Row(
                                                                                              children: [
                                                                                                Expanded(
                                                                                                    child: Column(
                                                                                                        children: [
                                                                                                          Expanded(
                                                                                                              child: Container(
                                                                                                                  color: AppColor
                                                                                                                      .transparent
                                                                                                              )
                                                                                                          )
                                                                                                        ]
                                                                                                    )
                                                                                                )
                                                                                              ]
                                                                                          )
                                                                                        ],
                                                                                      ),
                                                                                    ),
                                                                                  ],
                                                                                ),
                                                                              ),
                                                                            ),
                                                                          if(AppHelpers
                                                                              .shouldShowReturn(
                                                                              selectedReturnPercentList: returnState
                                                                                  .selectedPerformanceReturnPercentList,
                                                                              returnType: ReturnType
                                                                                  .MTD))
                                                                            UIHelper
                                                                                .horizontalSpaceSmall,
                                                                          if(AppHelpers
                                                                              .shouldShowReturn(
                                                                              selectedReturnPercentList: returnState
                                                                                  .selectedPerformanceReturnPercentList,
                                                                              returnType: ReturnType
                                                                                  .QTD))
                                                                            Expanded(
                                                                              child: GestureDetector(
                                                                                onTap: () {
                                                                                  setState(() {
                                                                                    selectedType =
                                                                                        ReturnType
                                                                                            .QTD;
                                                                                    if (widget
                                                                                        .returnTypeChanged !=
                                                                                        null) {
                                                                                      widget
                                                                                          .returnTypeChanged!(
                                                                                          selectedType);
                                                                                    }
                                                                                  });
                                                                                },
                                                                                child: Column(
                                                                                  children: [

                                                                                    Expanded(
                                                                                      child: Stack(
                                                                                        alignment: Alignment
                                                                                            .topCenter,
                                                                                        children: [
                                                                                          AnimatedOpacity(
                                                                                            duration: const Duration(
                                                                                                milliseconds: 500),
                                                                                            opacity: selectedType ==
                                                                                                ReturnType
                                                                                                    .QTD
                                                                                                ? 1.0
                                                                                                : 0.5,
                                                                                            child: Row(
                                                                                              crossAxisAlignment: CrossAxisAlignment
                                                                                                  .start,
                                                                                              children: [
                                                                                                Expanded(
                                                                                                  child: !((chartData
                                                                                                      .twrQTD ??
                                                                                                      0.00) >=
                                                                                                      0.00)
                                                                                                      ? AnimatedFractionallySizedBox(
                                                                                                      duration: const Duration(
                                                                                                          milliseconds: 500),
                                                                                                      heightFactor: AppHelpers
                                                                                                          .getPerformanceChartFraction(
                                                                                                          showBenchmark: !(widget.currentLevel == 0 || widget.isSummary),
                                                                                                          actualReturn: chartData
                                                                                                              .twrQTD ??
                                                                                                              0.00,
                                                                                                          twrMTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .MTD)
                                                                                                              ? chartData
                                                                                                              .twrMTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrQTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .QTD)
                                                                                                              ? chartData
                                                                                                              .twrQTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrCYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .CYTD)
                                                                                                              ? chartData
                                                                                                              .twrCYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrFYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .FYTD)
                                                                                                              ? chartData
                                                                                                              .twrFYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr1YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr1)
                                                                                                              ? chartData
                                                                                                              .twr1YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr2YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr2)
                                                                                                              ? chartData
                                                                                                              .twr2YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr3YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr3)
                                                                                                              ? chartData
                                                                                                              .twr3YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          inceptionTWR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncTwr)
                                                                                                              ? chartData
                                                                                                              .inceptionTWR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          inceptionIRR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncIrr)
                                                                                                              ? chartData
                                                                                                              .inceptionIRR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkMTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .MTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkMTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkQTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .QTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkQTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkCYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .CYTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkCYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkFYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .FYTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkFYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark1YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr1)
                                                                                                              ? chartData
                                                                                                              .benchmark1YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark2YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr2)
                                                                                                              ? chartData
                                                                                                              .benchmark2YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark3YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr3)
                                                                                                              ? chartData
                                                                                                              .benchmark3YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkTWR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncTwr)
                                                                                                              ? chartData
                                                                                                              .benchmarkTWR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkIRR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncIrr)
                                                                                                              ? chartData
                                                                                                              .benchmarkIRR ??
                                                                                                              0.00
                                                                                                              : 0.00),
                                                                                                      alignment: Alignment
                                                                                                          .topCenter,
                                                                                                      child: Container(
                                                                                                        color: AppColor
                                                                                                            .seaBlue,
                                                                                                      )
                                                                                                  )
                                                                                                      : const SizedBox
                                                                                                      .shrink(),
                                                                                                ),
                                                                                                UIHelper
                                                                                                    .horizontalSpace(
                                                                                                    Sizes
                                                                                                        .dimen_2
                                                                                                        .w),
                                                                                                if(((chartData.benchmarkQTD ?? 0.0) * 100000).round() != 0 && !(widget.currentLevel == 0 || widget.isSummary))
                                                                                                  Expanded(
                                                                                                    child: !((chartData
                                                                                                        .benchmarkQTD ??
                                                                                                        0.00) >=
                                                                                                        0.00)
                                                                                                        ? AnimatedFractionallySizedBox(
                                                                                                        duration: const Duration(
                                                                                                            milliseconds: 500),
                                                                                                        heightFactor: AppHelpers
                                                                                                            .getPerformanceChartFraction(
                                                                                                            showBenchmark: !(widget.currentLevel == 0 || widget.isSummary),
                                                                                                            actualReturn: chartData
                                                                                                                .benchmarkQTD ??
                                                                                                                0.00,
                                                                                                            twrMTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .MTD)
                                                                                                                ? chartData
                                                                                                                .twrMTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrQTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .QTD)
                                                                                                                ? chartData
                                                                                                                .twrQTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrCYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .CYTD)
                                                                                                                ? chartData
                                                                                                                .twrCYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrFYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .FYTD)
                                                                                                                ? chartData
                                                                                                                .twrFYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr1YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr1)
                                                                                                                ? chartData
                                                                                                                .twr1YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr2YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr2)
                                                                                                                ? chartData
                                                                                                                .twr2YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr3YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr3)
                                                                                                                ? chartData
                                                                                                                .twr3YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            inceptionTWR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncTwr)
                                                                                                                ? chartData
                                                                                                                .inceptionTWR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            inceptionIRR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncIrr)
                                                                                                                ? chartData
                                                                                                                .inceptionIRR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkMTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .MTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkMTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkQTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .QTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkQTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkCYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .CYTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkCYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkFYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .FYTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkFYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark1YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr1)
                                                                                                                ? chartData
                                                                                                                .benchmark1YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark2YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr2)
                                                                                                                ? chartData
                                                                                                                .benchmark2YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark3YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr3)
                                                                                                                ? chartData
                                                                                                                .benchmark3YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkTWR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncTwr)
                                                                                                                ? chartData
                                                                                                                .benchmarkTWR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkIRR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncIrr)
                                                                                                                ? chartData
                                                                                                                .benchmarkIRR ??
                                                                                                                0.00
                                                                                                                : 0.00),
                                                                                                        alignment: Alignment
                                                                                                            .topCenter,
                                                                                                        child: Container(
                                                                                                          color: AppColor
                                                                                                              .purple,
                                                                                                        )
                                                                                                    )
                                                                                                        : const SizedBox
                                                                                                        .shrink(),
                                                                                                  )
                                                                                              ],
                                                                                            ),
                                                                                          ),
                                                                                          if(selectedType ==
                                                                                              ReturnType
                                                                                                  .QTD)
                                                                                            const DottedLine(
                                                                                              direction: Axis
                                                                                                  .vertical,
                                                                                              lineThickness: 1.0,
                                                                                              dashLength: 4.0,
                                                                                              dashColor: Colors
                                                                                                  .black,
                                                                                              dashGapLength: 4.0,
                                                                                              dashGapColor: Colors
                                                                                                  .transparent,
                                                                                            ),
                                                                                          Row(
                                                                                              children: [
                                                                                                Expanded(
                                                                                                    child: Column(
                                                                                                        children: [
                                                                                                          Expanded(
                                                                                                              child: Container(
                                                                                                                  color: AppColor
                                                                                                                      .transparent
                                                                                                              )
                                                                                                          )
                                                                                                        ]
                                                                                                    )
                                                                                                )
                                                                                              ]
                                                                                          )
                                                                                        ],
                                                                                      ),
                                                                                    ),
                                                                                  ],
                                                                                ),
                                                                              ),
                                                                            ),
                                                                          if(AppHelpers
                                                                              .shouldShowReturn(
                                                                              selectedReturnPercentList: returnState
                                                                                  .selectedPerformanceReturnPercentList,
                                                                              returnType: ReturnType
                                                                                  .QTD))
                                                                            UIHelper
                                                                                .horizontalSpaceSmall,
                                                                          if(AppHelpers
                                                                              .shouldShowReturn(
                                                                              selectedReturnPercentList: returnState
                                                                                  .selectedPerformanceReturnPercentList,
                                                                              returnType: ReturnType
                                                                                  .CYTD))
                                                                            Expanded(
                                                                              child: GestureDetector(
                                                                                onTap: () {
                                                                                  setState(() {
                                                                                    selectedType =
                                                                                        ReturnType
                                                                                            .CYTD;
                                                                                    if (widget
                                                                                        .returnTypeChanged !=
                                                                                        null) {
                                                                                      widget
                                                                                          .returnTypeChanged!(
                                                                                          selectedType);
                                                                                    }
                                                                                  });
                                                                                },
                                                                                child: Column(
                                                                                  children: [
                                                                                    Expanded(
                                                                                      child: Stack(
                                                                                        alignment: Alignment
                                                                                            .topCenter,
                                                                                        children: [
                                                                                          AnimatedOpacity(
                                                                                            duration: const Duration(
                                                                                                milliseconds: 500),
                                                                                            opacity: selectedType ==
                                                                                                ReturnType
                                                                                                    .CYTD
                                                                                                ? 1.0
                                                                                                : 0.5,
                                                                                            child: Row(
                                                                                              crossAxisAlignment: CrossAxisAlignment
                                                                                                  .start,
                                                                                              children: [
                                                                                                Expanded(
                                                                                                  child: !((chartData
                                                                                                      .twrCYTD ??
                                                                                                      0.00) >=
                                                                                                      0.00)
                                                                                                      ? AnimatedFractionallySizedBox(
                                                                                                      duration: const Duration(
                                                                                                          milliseconds: 500),
                                                                                                      heightFactor: AppHelpers
                                                                                                          .getPerformanceChartFraction(
                                                                                                          showBenchmark: !(widget.currentLevel == 0 || widget.isSummary),
                                                                                                          actualReturn: chartData
                                                                                                              .twrCYTD ??
                                                                                                              0.00,
                                                                                                          twrMTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .MTD)
                                                                                                              ? chartData
                                                                                                              .twrMTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrQTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .QTD)
                                                                                                              ? chartData
                                                                                                              .twrQTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrCYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .CYTD)
                                                                                                              ? chartData
                                                                                                              .twrCYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrFYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .FYTD)
                                                                                                              ? chartData
                                                                                                              .twrFYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr1YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr1)
                                                                                                              ? chartData
                                                                                                              .twr1YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr2YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr2)
                                                                                                              ? chartData
                                                                                                              .twr2YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr3YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr3)
                                                                                                              ? chartData
                                                                                                              .twr3YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          inceptionTWR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncTwr)
                                                                                                              ? chartData
                                                                                                              .inceptionTWR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          inceptionIRR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncIrr)
                                                                                                              ? chartData
                                                                                                              .inceptionIRR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkMTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .MTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkMTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkQTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .QTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkQTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkCYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .CYTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkCYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkFYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .FYTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkFYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark1YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr1)
                                                                                                              ? chartData
                                                                                                              .benchmark1YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark2YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr2)
                                                                                                              ? chartData
                                                                                                              .benchmark2YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark3YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr3)
                                                                                                              ? chartData
                                                                                                              .benchmark3YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkTWR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncTwr)
                                                                                                              ? chartData
                                                                                                              .benchmarkTWR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkIRR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncIrr)
                                                                                                              ? chartData
                                                                                                              .benchmarkIRR ??
                                                                                                              0.00
                                                                                                              : 0.00),
                                                                                                      alignment: Alignment
                                                                                                          .topCenter,
                                                                                                      child: Container(
                                                                                                          color: AppColor
                                                                                                              .seaBlue
                                                                                                      )
                                                                                                  )
                                                                                                      : const SizedBox
                                                                                                      .shrink(),
                                                                                                ),
                                                                                                UIHelper
                                                                                                    .horizontalSpace(
                                                                                                    Sizes
                                                                                                        .dimen_2
                                                                                                        .w),
                                                                                                if(((chartData.benchmarkCYTD ?? 0.0) * 100000).round() != 0 && !(widget.currentLevel == 0 || widget.isSummary))
                                                                                                  Expanded(
                                                                                                    child: !((chartData
                                                                                                        .benchmarkCYTD ??
                                                                                                        0.00) >=
                                                                                                        0.00)
                                                                                                        ? AnimatedFractionallySizedBox(
                                                                                                        duration: const Duration(
                                                                                                            milliseconds: 500),
                                                                                                        heightFactor: AppHelpers
                                                                                                            .getPerformanceChartFraction(
                                                                                                            showBenchmark: !(widget.currentLevel == 0 || widget.isSummary),
                                                                                                            actualReturn: chartData
                                                                                                                .benchmarkCYTD ??
                                                                                                                0.00,
                                                                                                            twrMTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .MTD)
                                                                                                                ? chartData
                                                                                                                .twrMTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrQTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .QTD)
                                                                                                                ? chartData
                                                                                                                .twrQTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrCYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .CYTD)
                                                                                                                ? chartData
                                                                                                                .twrCYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrFYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .FYTD)
                                                                                                                ? chartData
                                                                                                                .twrFYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr1YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr1)
                                                                                                                ? chartData
                                                                                                                .twr1YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr2YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr2)
                                                                                                                ? chartData
                                                                                                                .twr2YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr3YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr3)
                                                                                                                ? chartData
                                                                                                                .twr3YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            inceptionTWR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncTwr)
                                                                                                                ? chartData
                                                                                                                .inceptionTWR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            inceptionIRR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncIrr)
                                                                                                                ? chartData
                                                                                                                .inceptionIRR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkMTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .MTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkMTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkQTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .QTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkQTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkCYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .CYTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkCYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkFYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .FYTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkFYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark1YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr1)
                                                                                                                ? chartData
                                                                                                                .benchmark1YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark2YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr2)
                                                                                                                ? chartData
                                                                                                                .benchmark2YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark3YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr3)
                                                                                                                ? chartData
                                                                                                                .benchmark3YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkTWR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncTwr)
                                                                                                                ? chartData
                                                                                                                .benchmarkTWR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkIRR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncIrr)
                                                                                                                ? chartData
                                                                                                                .benchmarkIRR ??
                                                                                                                0.00
                                                                                                                : 0.00),
                                                                                                        alignment: Alignment
                                                                                                            .topCenter,
                                                                                                        child: Container(
                                                                                                          color: AppColor
                                                                                                              .purple,
                                                                                                        )
                                                                                                    )
                                                                                                        : const SizedBox
                                                                                                        .shrink(),
                                                                                                  )
                                                                                              ],
                                                                                            ),
                                                                                          ),
                                                                                          if(selectedType ==
                                                                                              ReturnType
                                                                                                  .CYTD)
                                                                                            const DottedLine(
                                                                                              direction: Axis
                                                                                                  .vertical,
                                                                                              lineThickness: 1.0,
                                                                                              dashLength: 4.0,
                                                                                              dashColor: Colors
                                                                                                  .black,
                                                                                              dashGapLength: 4.0,
                                                                                              dashGapColor: Colors
                                                                                                  .transparent,
                                                                                            ),
                                                                                          Row(
                                                                                              children: [
                                                                                                Expanded(
                                                                                                    child: Column(
                                                                                                        children: [
                                                                                                          Expanded(
                                                                                                              child: Container(
                                                                                                                  color: AppColor
                                                                                                                      .transparent
                                                                                                              )
                                                                                                          )
                                                                                                        ]
                                                                                                    )
                                                                                                )
                                                                                              ]
                                                                                          )
                                                                                        ],
                                                                                      ),
                                                                                    ),
                                                                                  ],
                                                                                ),
                                                                              ),
                                                                            ),
                                                                          if(AppHelpers
                                                                              .shouldShowReturn(
                                                                              selectedReturnPercentList: returnState
                                                                                  .selectedPerformanceReturnPercentList,
                                                                              returnType: ReturnType
                                                                                  .CYTD))
                                                                            UIHelper
                                                                                .horizontalSpaceSmall,
                                                                          if(AppHelpers
                                                                              .shouldShowReturn(
                                                                              selectedReturnPercentList: returnState
                                                                                  .selectedPerformanceReturnPercentList,
                                                                              returnType: ReturnType
                                                                                  .FYTD))
                                                                            Expanded(
                                                                              child: GestureDetector(
                                                                                onTap: () {
                                                                                  setState(() {
                                                                                    selectedType =
                                                                                        ReturnType
                                                                                            .FYTD;
                                                                                    if (widget
                                                                                        .returnTypeChanged !=
                                                                                        null) {
                                                                                      widget
                                                                                          .returnTypeChanged!(
                                                                                          selectedType);
                                                                                    }
                                                                                  });
                                                                                },
                                                                                child: Column(
                                                                                  children: [
                                                                                    Expanded(
                                                                                      child: Stack(
                                                                                        alignment: Alignment
                                                                                            .topCenter,
                                                                                        children: [
                                                                                          AnimatedOpacity(
                                                                                            duration: const Duration(
                                                                                                milliseconds: 500),
                                                                                            opacity: selectedType ==
                                                                                                ReturnType
                                                                                                    .FYTD
                                                                                                ? 1.0
                                                                                                : 0.5,
                                                                                            child: Row(
                                                                                              crossAxisAlignment: CrossAxisAlignment
                                                                                                  .start,
                                                                                              children: [
                                                                                                Expanded(
                                                                                                  child: !((chartData
                                                                                                      .twrFYTD ??
                                                                                                      0.00) >=
                                                                                                      0.00)
                                                                                                      ? AnimatedFractionallySizedBox(
                                                                                                      duration: const Duration(
                                                                                                          milliseconds: 500),
                                                                                                      heightFactor: AppHelpers
                                                                                                          .getPerformanceChartFraction(
                                                                                                          showBenchmark: !(widget.currentLevel == 0 || widget.isSummary),
                                                                                                          actualReturn: chartData
                                                                                                              .twrFYTD ??
                                                                                                              0.00,
                                                                                                          twrMTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .MTD)
                                                                                                              ? chartData
                                                                                                              .twrMTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrQTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .QTD)
                                                                                                              ? chartData
                                                                                                              .twrQTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrCYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .CYTD)
                                                                                                              ? chartData
                                                                                                              .twrCYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrFYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .FYTD)
                                                                                                              ? chartData
                                                                                                              .twrFYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr1YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr1)
                                                                                                              ? chartData
                                                                                                              .twr1YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr2YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr2)
                                                                                                              ? chartData
                                                                                                              .twr2YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr3YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr3)
                                                                                                              ? chartData
                                                                                                              .twr3YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          inceptionTWR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncTwr)
                                                                                                              ? chartData
                                                                                                              .inceptionTWR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          inceptionIRR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncIrr)
                                                                                                              ? chartData
                                                                                                              .inceptionIRR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkMTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .MTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkMTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkQTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .QTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkQTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkCYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .CYTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkCYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkFYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .FYTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkFYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark1YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr1)
                                                                                                              ? chartData
                                                                                                              .benchmark1YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark2YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr2)
                                                                                                              ? chartData
                                                                                                              .benchmark2YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark3YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr3)
                                                                                                              ? chartData
                                                                                                              .benchmark3YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkTWR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncTwr)
                                                                                                              ? chartData
                                                                                                              .benchmarkTWR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkIRR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncIrr)
                                                                                                              ? chartData
                                                                                                              .benchmarkIRR ??
                                                                                                              0.00
                                                                                                              : 0.00),
                                                                                                      alignment: Alignment
                                                                                                          .topCenter,
                                                                                                      child: Container(
                                                                                                          color: AppColor
                                                                                                              .seaBlue
                                                                                                      )
                                                                                                  )
                                                                                                      : const SizedBox
                                                                                                      .shrink(),
                                                                                                ),
                                                                                                UIHelper
                                                                                                    .horizontalSpace(
                                                                                                    Sizes
                                                                                                        .dimen_2
                                                                                                        .w),
                                                                                                if(((chartData.benchmarkFYTD ?? 0.0) * 100000).round() != 0 && !(widget.currentLevel == 0 || widget.isSummary))
                                                                                                  Expanded(
                                                                                                    child: !((chartData
                                                                                                        .benchmarkFYTD ??
                                                                                                        0.00) >=
                                                                                                        0.00)
                                                                                                        ? AnimatedFractionallySizedBox(
                                                                                                        duration: const Duration(
                                                                                                            milliseconds: 500),
                                                                                                        heightFactor: AppHelpers
                                                                                                            .getPerformanceChartFraction(
                                                                                                            showBenchmark: !(widget.currentLevel == 0 || widget.isSummary),
                                                                                                            actualReturn: chartData
                                                                                                                .benchmarkFYTD ??
                                                                                                                0.00,
                                                                                                            twrMTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .MTD)
                                                                                                                ? chartData
                                                                                                                .twrMTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrQTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .QTD)
                                                                                                                ? chartData
                                                                                                                .twrQTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrCYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .CYTD)
                                                                                                                ? chartData
                                                                                                                .twrCYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrFYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .FYTD)
                                                                                                                ? chartData
                                                                                                                .twrFYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr1YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr1)
                                                                                                                ? chartData
                                                                                                                .twr1YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr2YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr2)
                                                                                                                ? chartData
                                                                                                                .twr2YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr3YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr3)
                                                                                                                ? chartData
                                                                                                                .twr3YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            inceptionTWR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncTwr)
                                                                                                                ? chartData
                                                                                                                .inceptionTWR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            inceptionIRR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncIrr)
                                                                                                                ? chartData
                                                                                                                .inceptionIRR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkMTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .MTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkMTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkQTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .QTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkQTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkCYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .CYTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkCYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkFYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .FYTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkFYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark1YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr1)
                                                                                                                ? chartData
                                                                                                                .benchmark1YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark2YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr2)
                                                                                                                ? chartData
                                                                                                                .benchmark2YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark3YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr3)
                                                                                                                ? chartData
                                                                                                                .benchmark3YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkTWR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncTwr)
                                                                                                                ? chartData
                                                                                                                .benchmarkTWR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkIRR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncIrr)
                                                                                                                ? chartData
                                                                                                                .benchmarkIRR ??
                                                                                                                0.00
                                                                                                                : 0.00),
                                                                                                        alignment: Alignment
                                                                                                            .topCenter,
                                                                                                        child: Container(
                                                                                                          color: AppColor
                                                                                                              .purple,
                                                                                                        )
                                                                                                    )
                                                                                                        : const SizedBox
                                                                                                        .shrink(),
                                                                                                  )
                                                                                              ],
                                                                                            ),
                                                                                          ),
                                                                                          if(selectedType ==
                                                                                              ReturnType
                                                                                                  .FYTD)
                                                                                            const DottedLine(
                                                                                              direction: Axis
                                                                                                  .vertical,
                                                                                              lineThickness: 1.0,
                                                                                              dashLength: 4.0,
                                                                                              dashColor: Colors
                                                                                                  .black,
                                                                                              dashGapLength: 4.0,
                                                                                              dashGapColor: Colors
                                                                                                  .transparent,
                                                                                            ),
                                                                                          Row(
                                                                                              children: [
                                                                                                Expanded(
                                                                                                    child: Column(
                                                                                                        children: [
                                                                                                          Expanded(
                                                                                                              child: Container(
                                                                                                                  color: AppColor
                                                                                                                      .transparent
                                                                                                              )
                                                                                                          )
                                                                                                        ]
                                                                                                    )
                                                                                                )
                                                                                              ]
                                                                                          )
                                                                                        ],
                                                                                      ),
                                                                                    ),
                                                                                  ],
                                                                                ),
                                                                              ),
                                                                            ),
                                                                          if(AppHelpers
                                                                              .shouldShowReturn(
                                                                              selectedReturnPercentList: returnState
                                                                                  .selectedPerformanceReturnPercentList,
                                                                              returnType: ReturnType
                                                                                  .FYTD))
                                                                            UIHelper
                                                                                .horizontalSpaceSmall,
                                                                          if(AppHelpers
                                                                              .shouldShowReturn(
                                                                              selectedReturnPercentList: returnState
                                                                                  .selectedPerformanceReturnPercentList,
                                                                              returnType: ReturnType
                                                                                  .Yr1))
                                                                            Expanded(
                                                                              child: GestureDetector(
                                                                                onTap: () {
                                                                                  setState(() {
                                                                                    selectedType =
                                                                                        ReturnType
                                                                                            .Yr1;
                                                                                    if (widget
                                                                                        .returnTypeChanged !=
                                                                                        null) {
                                                                                      widget
                                                                                          .returnTypeChanged!(
                                                                                          selectedType);
                                                                                    }
                                                                                  });
                                                                                },
                                                                                child: Column(
                                                                                  children: [
                                                                                    Expanded(
                                                                                      child: Stack(
                                                                                        alignment: Alignment
                                                                                            .topCenter,
                                                                                        children: [
                                                                                          AnimatedOpacity(
                                                                                            duration: const Duration(
                                                                                                milliseconds: 500),
                                                                                            opacity: selectedType ==
                                                                                                ReturnType
                                                                                                    .Yr1
                                                                                                ? 1.0
                                                                                                : 0.5,
                                                                                            child: Row(
                                                                                              crossAxisAlignment: CrossAxisAlignment
                                                                                                  .start,
                                                                                              children: [
                                                                                                Expanded(
                                                                                                  child: !((chartData
                                                                                                      .twr1YR ??
                                                                                                      0.00) >=
                                                                                                      0.00)
                                                                                                      ? AnimatedFractionallySizedBox(
                                                                                                      duration: const Duration(
                                                                                                          milliseconds: 500),
                                                                                                      heightFactor: AppHelpers
                                                                                                          .getPerformanceChartFraction(
                                                                                                          showBenchmark: !(widget.currentLevel == 0 || widget.isSummary),
                                                                                                          actualReturn: chartData
                                                                                                              .twr1YR ??
                                                                                                              0.00,
                                                                                                          twrMTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .MTD)
                                                                                                              ? chartData
                                                                                                              .twrMTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrQTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .QTD)
                                                                                                              ? chartData
                                                                                                              .twrQTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrCYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .CYTD)
                                                                                                              ? chartData
                                                                                                              .twrCYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrFYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .FYTD)
                                                                                                              ? chartData
                                                                                                              .twrFYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr1YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr1)
                                                                                                              ? chartData
                                                                                                              .twr1YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr2YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr2)
                                                                                                              ? chartData
                                                                                                              .twr2YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr3YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr3)
                                                                                                              ? chartData
                                                                                                              .twr3YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          inceptionTWR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncTwr)
                                                                                                              ? chartData
                                                                                                              .inceptionTWR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          inceptionIRR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncIrr)
                                                                                                              ? chartData
                                                                                                              .inceptionIRR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkMTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .MTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkMTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkQTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .QTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkQTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkCYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .CYTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkCYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkFYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .FYTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkFYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark1YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr1)
                                                                                                              ? chartData
                                                                                                              .benchmark1YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark2YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr2)
                                                                                                              ? chartData
                                                                                                              .benchmark2YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark3YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr3)
                                                                                                              ? chartData
                                                                                                              .benchmark3YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkTWR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncTwr)
                                                                                                              ? chartData
                                                                                                              .benchmarkTWR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkIRR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncIrr)
                                                                                                              ? chartData
                                                                                                              .benchmarkIRR ??
                                                                                                              0.00
                                                                                                              : 0.00),
                                                                                                      alignment: Alignment
                                                                                                          .topCenter,
                                                                                                      child: Container(
                                                                                                          color: AppColor
                                                                                                              .seaBlue
                                                                                                      )
                                                                                                  )
                                                                                                      : const SizedBox
                                                                                                      .shrink(),
                                                                                                ),
                                                                                                UIHelper
                                                                                                    .horizontalSpace(
                                                                                                    Sizes
                                                                                                        .dimen_2
                                                                                                        .w),
                                                                                                Expanded(
                                                                                                  child: !((chartData
                                                                                                      .benchmark1YR ??
                                                                                                      0.00) >=
                                                                                                      0.00)
                                                                                                      ? AnimatedFractionallySizedBox(
                                                                                                      duration: const Duration(
                                                                                                          milliseconds: 500),
                                                                                                      heightFactor: AppHelpers
                                                                                                          .getPerformanceChartFraction(
                                                                                                          showBenchmark: !(widget.currentLevel == 0 || widget.isSummary),
                                                                                                          actualReturn: chartData
                                                                                                              .benchmark1YR ??
                                                                                                              0.00,
                                                                                                          twrMTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .MTD)
                                                                                                              ? chartData
                                                                                                              .twrMTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrQTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .QTD)
                                                                                                              ? chartData
                                                                                                              .twrQTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrCYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .CYTD)
                                                                                                              ? chartData
                                                                                                              .twrCYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrFYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .FYTD)
                                                                                                              ? chartData
                                                                                                              .twrFYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr1YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr1)
                                                                                                              ? chartData
                                                                                                              .twr1YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr2YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr2)
                                                                                                              ? chartData
                                                                                                              .twr2YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr3YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr3)
                                                                                                              ? chartData
                                                                                                              .twr3YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          inceptionTWR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncTwr)
                                                                                                              ? chartData
                                                                                                              .inceptionTWR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          inceptionIRR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncIrr)
                                                                                                              ? chartData
                                                                                                              .inceptionIRR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkMTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .MTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkMTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkQTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .QTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkQTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkCYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .CYTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkCYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkFYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .FYTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkFYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark1YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr1)
                                                                                                              ? chartData
                                                                                                              .benchmark1YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark2YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr2)
                                                                                                              ? chartData
                                                                                                              .benchmark2YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark3YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr3)
                                                                                                              ? chartData
                                                                                                              .benchmark3YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkTWR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncTwr)
                                                                                                              ? chartData
                                                                                                              .benchmarkTWR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkIRR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncIrr)
                                                                                                              ? chartData
                                                                                                              .benchmarkIRR ??
                                                                                                              0.00
                                                                                                              : 0.00),
                                                                                                      alignment: Alignment
                                                                                                          .topCenter,
                                                                                                      child: Container(
                                                                                                        color: AppColor
                                                                                                            .purple,
                                                                                                      )
                                                                                                  )
                                                                                                      : const SizedBox
                                                                                                      .shrink(),
                                                                                                )
                                                                                              ],
                                                                                            ),
                                                                                          ),
                                                                                          if(selectedType ==
                                                                                              ReturnType
                                                                                                  .Yr1)
                                                                                            const DottedLine(
                                                                                              direction: Axis
                                                                                                  .vertical,
                                                                                              lineThickness: 1.0,
                                                                                              dashLength: 4.0,
                                                                                              dashColor: Colors
                                                                                                  .black,
                                                                                              dashGapLength: 4.0,
                                                                                              dashGapColor: Colors
                                                                                                  .transparent,
                                                                                            ),
                                                                                          Row(
                                                                                              children: [
                                                                                                Expanded(
                                                                                                    child: Column(
                                                                                                        children: [
                                                                                                          Expanded(
                                                                                                              child: Container(
                                                                                                                  color: AppColor
                                                                                                                      .transparent
                                                                                                              )
                                                                                                          )
                                                                                                        ]
                                                                                                    )
                                                                                                )
                                                                                              ]
                                                                                          )
                                                                                        ],
                                                                                      ),
                                                                                    ),
                                                                                  ],
                                                                                ),
                                                                              ),
                                                                            ),
                                                                          if(AppHelpers
                                                                              .shouldShowReturn(
                                                                              selectedReturnPercentList: returnState
                                                                                  .selectedPerformanceReturnPercentList,
                                                                              returnType: ReturnType
                                                                                  .Yr1))
                                                                            UIHelper
                                                                                .horizontalSpaceSmall,
                                                                          if(AppHelpers
                                                                              .shouldShowReturn(
                                                                              selectedReturnPercentList: returnState
                                                                                  .selectedPerformanceReturnPercentList,
                                                                              returnType: ReturnType
                                                                                  .Yr2))
                                                                            Expanded(
                                                                              child: GestureDetector(
                                                                                onTap: () {
                                                                                  setState(() {
                                                                                    selectedType =
                                                                                        ReturnType
                                                                                            .Yr2;
                                                                                    if (widget
                                                                                        .returnTypeChanged !=
                                                                                        null) {
                                                                                      widget
                                                                                          .returnTypeChanged!(
                                                                                          selectedType);
                                                                                    }
                                                                                  });
                                                                                },
                                                                                child: Column(
                                                                                  children: [
                                                                                    Expanded(
                                                                                      child: Stack(
                                                                                        alignment: Alignment
                                                                                            .topCenter,
                                                                                        children: [
                                                                                          AnimatedOpacity(
                                                                                            duration: const Duration(
                                                                                                milliseconds: 500),
                                                                                            opacity: selectedType ==
                                                                                                ReturnType
                                                                                                    .Yr2
                                                                                                ? 1.0
                                                                                                : 0.5,
                                                                                            child: Row(
                                                                                              crossAxisAlignment: CrossAxisAlignment
                                                                                                  .start,
                                                                                              children: [
                                                                                                Expanded(
                                                                                                  child: !((chartData
                                                                                                      .twr2YR ??
                                                                                                      0.00) >=
                                                                                                      0.00)
                                                                                                      ? AnimatedFractionallySizedBox(
                                                                                                      duration: const Duration(
                                                                                                          milliseconds: 500),
                                                                                                      heightFactor: AppHelpers
                                                                                                          .getPerformanceChartFraction(
                                                                                                          showBenchmark: !(widget.currentLevel == 0 || widget.isSummary),
                                                                                                          actualReturn: chartData
                                                                                                              .twr2YR ??
                                                                                                              0.00,
                                                                                                          twrMTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .MTD)
                                                                                                              ? chartData
                                                                                                              .twrMTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrQTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .QTD)
                                                                                                              ? chartData
                                                                                                              .twrQTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrCYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .CYTD)
                                                                                                              ? chartData
                                                                                                              .twrCYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrFYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .FYTD)
                                                                                                              ? chartData
                                                                                                              .twrFYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr1YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr1)
                                                                                                              ? chartData
                                                                                                              .twr1YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr2YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr2)
                                                                                                              ? chartData
                                                                                                              .twr2YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr3YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr3)
                                                                                                              ? chartData
                                                                                                              .twr3YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          inceptionTWR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncTwr)
                                                                                                              ? chartData
                                                                                                              .inceptionTWR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          inceptionIRR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncIrr)
                                                                                                              ? chartData
                                                                                                              .inceptionIRR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkMTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .MTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkMTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkQTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .QTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkQTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkCYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .CYTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkCYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkFYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .FYTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkFYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark1YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr1)
                                                                                                              ? chartData
                                                                                                              .benchmark1YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark2YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr2)
                                                                                                              ? chartData
                                                                                                              .benchmark2YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark3YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr3)
                                                                                                              ? chartData
                                                                                                              .benchmark3YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkTWR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncTwr)
                                                                                                              ? chartData
                                                                                                              .benchmarkTWR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkIRR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncIrr)
                                                                                                              ? chartData
                                                                                                              .benchmarkIRR ??
                                                                                                              0.00
                                                                                                              : 0.00),
                                                                                                      alignment: Alignment
                                                                                                          .topCenter,
                                                                                                      child: Container(
                                                                                                          color: AppColor
                                                                                                              .seaBlue
                                                                                                      )
                                                                                                  )
                                                                                                      : const SizedBox
                                                                                                      .shrink(),
                                                                                                ),
                                                                                                UIHelper
                                                                                                    .horizontalSpace(
                                                                                                    Sizes
                                                                                                        .dimen_2
                                                                                                        .w),
                                                                                                if(((chartData.benchmark2YR ?? 0.0) * 100000).round() != 0 && !(widget.currentLevel == 0 || widget.isSummary))
                                                                                                  Expanded(
                                                                                                    child: !((chartData
                                                                                                        .benchmark2YR ??
                                                                                                        0.00) >=
                                                                                                        0.00)
                                                                                                        ? AnimatedFractionallySizedBox(
                                                                                                        duration: const Duration(
                                                                                                            milliseconds: 500),
                                                                                                        heightFactor: AppHelpers
                                                                                                            .getPerformanceChartFraction(
                                                                                                            showBenchmark: !(widget.currentLevel == 0 || widget.isSummary),
                                                                                                            actualReturn: chartData
                                                                                                                .benchmark2YR ??
                                                                                                                0.00,
                                                                                                            twrMTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .MTD)
                                                                                                                ? chartData
                                                                                                                .twrMTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrQTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .QTD)
                                                                                                                ? chartData
                                                                                                                .twrQTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrCYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .CYTD)
                                                                                                                ? chartData
                                                                                                                .twrCYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrFYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .FYTD)
                                                                                                                ? chartData
                                                                                                                .twrFYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr1YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr1)
                                                                                                                ? chartData
                                                                                                                .twr1YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr2YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr2)
                                                                                                                ? chartData
                                                                                                                .twr2YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr3YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr3)
                                                                                                                ? chartData
                                                                                                                .twr3YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            inceptionTWR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncTwr)
                                                                                                                ? chartData
                                                                                                                .inceptionTWR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            inceptionIRR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncIrr)
                                                                                                                ? chartData
                                                                                                                .inceptionIRR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkMTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .MTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkMTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkQTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .QTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkQTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkCYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .CYTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkCYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkFYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .FYTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkFYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark1YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr1)
                                                                                                                ? chartData
                                                                                                                .benchmark1YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark2YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr2)
                                                                                                                ? chartData
                                                                                                                .benchmark2YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark3YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr3)
                                                                                                                ? chartData
                                                                                                                .benchmark3YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkTWR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncTwr)
                                                                                                                ? chartData
                                                                                                                .benchmarkTWR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkIRR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncIrr)
                                                                                                                ? chartData
                                                                                                                .benchmarkIRR ??
                                                                                                                0.00
                                                                                                                : 0.00),
                                                                                                        alignment: Alignment
                                                                                                            .topCenter,
                                                                                                        child: Container(
                                                                                                          color: AppColor
                                                                                                              .purple,
                                                                                                        )
                                                                                                    )
                                                                                                        : const SizedBox
                                                                                                        .shrink(),
                                                                                                  )
                                                                                              ],
                                                                                            ),
                                                                                          ),
                                                                                          if(selectedType ==
                                                                                              ReturnType
                                                                                                  .Yr2)
                                                                                            const DottedLine(
                                                                                              direction: Axis
                                                                                                  .vertical,
                                                                                              lineThickness: 1.0,
                                                                                              dashLength: 4.0,
                                                                                              dashColor: Colors
                                                                                                  .black,
                                                                                              dashGapLength: 4.0,
                                                                                              dashGapColor: Colors
                                                                                                  .transparent,
                                                                                            ),
                                                                                          Row(
                                                                                              children: [
                                                                                                Expanded(
                                                                                                    child: Column(
                                                                                                        children: [
                                                                                                          Expanded(
                                                                                                              child: Container(
                                                                                                                  color: AppColor
                                                                                                                      .transparent
                                                                                                              )
                                                                                                          )
                                                                                                        ]
                                                                                                    )
                                                                                                )
                                                                                              ]
                                                                                          )
                                                                                        ],
                                                                                      ),
                                                                                    ),
                                                                                  ],
                                                                                ),
                                                                              ),
                                                                            ),
                                                                          if(AppHelpers
                                                                              .shouldShowReturn(
                                                                              selectedReturnPercentList: returnState
                                                                                  .selectedPerformanceReturnPercentList,
                                                                              returnType: ReturnType
                                                                                  .Yr2))
                                                                            UIHelper
                                                                                .horizontalSpaceSmall,
                                                                          if(AppHelpers
                                                                              .shouldShowReturn(
                                                                              selectedReturnPercentList: returnState
                                                                                  .selectedPerformanceReturnPercentList,
                                                                              returnType: ReturnType
                                                                                  .Yr3))
                                                                            Expanded(
                                                                              child: GestureDetector(
                                                                                onTap: () {
                                                                                  setState(() {
                                                                                    selectedType =
                                                                                        ReturnType
                                                                                            .Yr3;
                                                                                    if (widget
                                                                                        .returnTypeChanged !=
                                                                                        null) {
                                                                                      widget
                                                                                          .returnTypeChanged!(
                                                                                          selectedType);
                                                                                    }
                                                                                  });
                                                                                },
                                                                                child: Column(
                                                                                  children: [
                                                                                    Expanded(
                                                                                      child: Stack(
                                                                                        alignment: Alignment
                                                                                            .topCenter,
                                                                                        children: [
                                                                                          AnimatedOpacity(
                                                                                            duration: const Duration(
                                                                                                milliseconds: 500),
                                                                                            opacity: selectedType ==
                                                                                                ReturnType
                                                                                                    .Yr3
                                                                                                ? 1.0
                                                                                                : 0.5,
                                                                                            child: Row(
                                                                                              crossAxisAlignment: CrossAxisAlignment
                                                                                                  .start,
                                                                                              children: [
                                                                                                Expanded(
                                                                                                  child: !((chartData
                                                                                                      .twr3YR ??
                                                                                                      0.00) >=
                                                                                                      0.00)
                                                                                                      ? AnimatedFractionallySizedBox(
                                                                                                      duration: const Duration(
                                                                                                          milliseconds: 500),
                                                                                                      heightFactor: AppHelpers
                                                                                                          .getPerformanceChartFraction(
                                                                                                          showBenchmark: !(widget.currentLevel == 0 || widget.isSummary),
                                                                                                          actualReturn: chartData
                                                                                                              .twr3YR ??
                                                                                                              0.00,
                                                                                                          twrMTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .MTD)
                                                                                                              ? chartData
                                                                                                              .twrMTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrQTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .QTD)
                                                                                                              ? chartData
                                                                                                              .twrQTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrCYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .CYTD)
                                                                                                              ? chartData
                                                                                                              .twrCYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrFYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .FYTD)
                                                                                                              ? chartData
                                                                                                              .twrFYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr1YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr1)
                                                                                                              ? chartData
                                                                                                              .twr1YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr2YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr2)
                                                                                                              ? chartData
                                                                                                              .twr2YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr3YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr3)
                                                                                                              ? chartData
                                                                                                              .twr3YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          inceptionTWR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncTwr)
                                                                                                              ? chartData
                                                                                                              .inceptionTWR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          inceptionIRR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncIrr)
                                                                                                              ? chartData
                                                                                                              .inceptionIRR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkMTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .MTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkMTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkQTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .QTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkQTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkCYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .CYTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkCYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkFYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .FYTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkFYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark1YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr1)
                                                                                                              ? chartData
                                                                                                              .benchmark1YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark2YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr2)
                                                                                                              ? chartData
                                                                                                              .benchmark2YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark3YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr3)
                                                                                                              ? chartData
                                                                                                              .benchmark3YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkTWR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncTwr)
                                                                                                              ? chartData
                                                                                                              .benchmarkTWR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkIRR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncIrr)
                                                                                                              ? chartData
                                                                                                              .benchmarkIRR ??
                                                                                                              0.00
                                                                                                              : 0.00),
                                                                                                      alignment: Alignment
                                                                                                          .topCenter,
                                                                                                      child: Container(
                                                                                                          color: AppColor
                                                                                                              .seaBlue
                                                                                                      )
                                                                                                  )
                                                                                                      : const SizedBox
                                                                                                      .shrink(),
                                                                                                ),
                                                                                                UIHelper
                                                                                                    .horizontalSpace(
                                                                                                    Sizes
                                                                                                        .dimen_2
                                                                                                        .w),
                                                                                                if(((chartData.benchmark3YR ?? 0.0) * 100000).round() != 0 && !(widget.currentLevel == 0 || widget.isSummary))
                                                                                                  Expanded(
                                                                                                    child: !((chartData
                                                                                                        .benchmark3YR ??
                                                                                                        0.00) >=
                                                                                                        0.00)
                                                                                                        ? AnimatedFractionallySizedBox(
                                                                                                        duration: const Duration(
                                                                                                            milliseconds: 500),
                                                                                                        heightFactor: AppHelpers
                                                                                                            .getPerformanceChartFraction(
                                                                                                            showBenchmark: !(widget.currentLevel == 0 || widget.isSummary),
                                                                                                            actualReturn: chartData
                                                                                                                .benchmark3YR ??
                                                                                                                0.00,
                                                                                                            twrMTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .MTD)
                                                                                                                ? chartData
                                                                                                                .twrMTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrQTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .QTD)
                                                                                                                ? chartData
                                                                                                                .twrQTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrCYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .CYTD)
                                                                                                                ? chartData
                                                                                                                .twrCYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrFYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .FYTD)
                                                                                                                ? chartData
                                                                                                                .twrFYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr1YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr1)
                                                                                                                ? chartData
                                                                                                                .twr1YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr2YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr2)
                                                                                                                ? chartData
                                                                                                                .twr2YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr3YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr3)
                                                                                                                ? chartData
                                                                                                                .twr3YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            inceptionTWR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncTwr)
                                                                                                                ? chartData
                                                                                                                .inceptionTWR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            inceptionIRR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncIrr)
                                                                                                                ? chartData
                                                                                                                .inceptionIRR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkMTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .MTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkMTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkQTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .QTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkQTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkCYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .CYTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkCYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkFYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .FYTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkFYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark1YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr1)
                                                                                                                ? chartData
                                                                                                                .benchmark1YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark2YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr2)
                                                                                                                ? chartData
                                                                                                                .benchmark2YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark3YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr3)
                                                                                                                ? chartData
                                                                                                                .benchmark3YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkTWR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncTwr)
                                                                                                                ? chartData
                                                                                                                .benchmarkTWR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkIRR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncIrr)
                                                                                                                ? chartData
                                                                                                                .benchmarkIRR ??
                                                                                                                0.00
                                                                                                                : 0.00),
                                                                                                        alignment: Alignment
                                                                                                            .topCenter,
                                                                                                        child: Container(
                                                                                                          color: AppColor
                                                                                                              .purple,
                                                                                                        )
                                                                                                    )
                                                                                                        : const SizedBox
                                                                                                        .shrink(),
                                                                                                  )
                                                                                              ],
                                                                                            ),
                                                                                          ),
                                                                                          if(selectedType ==
                                                                                              ReturnType
                                                                                                  .Yr3)
                                                                                            const DottedLine(
                                                                                              direction: Axis
                                                                                                  .vertical,
                                                                                              lineThickness: 1.0,
                                                                                              dashLength: 4.0,
                                                                                              dashColor: Colors
                                                                                                  .black,
                                                                                              dashGapLength: 4.0,
                                                                                              dashGapColor: Colors
                                                                                                  .transparent,
                                                                                            ),
                                                                                          Row(
                                                                                              children: [
                                                                                                Expanded(
                                                                                                    child: Column(
                                                                                                        children: [
                                                                                                          Expanded(
                                                                                                              child: Container(
                                                                                                                  color: AppColor
                                                                                                                      .transparent
                                                                                                              )
                                                                                                          )
                                                                                                        ]
                                                                                                    )
                                                                                                )
                                                                                              ]
                                                                                          )
                                                                                        ],
                                                                                      ),
                                                                                    ),
                                                                                  ],
                                                                                ),
                                                                              ),
                                                                            ),
                                                                          if(AppHelpers
                                                                              .shouldShowReturn(
                                                                              selectedReturnPercentList: returnState
                                                                                  .selectedPerformanceReturnPercentList,
                                                                              returnType: ReturnType
                                                                                  .Yr3))
                                                                            UIHelper
                                                                                .horizontalSpaceSmall,
                                                                          if(AppHelpers
                                                                              .shouldShowReturn(
                                                                              selectedReturnPercentList: returnState
                                                                                  .selectedPerformanceReturnPercentList,
                                                                              returnType: ReturnType
                                                                                  .IncTwr))
                                                                            Expanded(
                                                                              child: GestureDetector(
                                                                                onTap: () {
                                                                                  setState(() {
                                                                                    selectedType =
                                                                                        ReturnType
                                                                                            .IncTwr;
                                                                                    if (widget
                                                                                        .returnTypeChanged !=
                                                                                        null) {
                                                                                      widget
                                                                                          .returnTypeChanged!(
                                                                                          selectedType);
                                                                                    }
                                                                                  });
                                                                                },
                                                                                child: Column(
                                                                                  children: [
                                                                                    Expanded(
                                                                                      child: Stack(
                                                                                        alignment: Alignment
                                                                                            .topCenter,
                                                                                        children: [
                                                                                          AnimatedOpacity(
                                                                                            duration: const Duration(
                                                                                                milliseconds: 500),
                                                                                            opacity: selectedType ==
                                                                                                ReturnType
                                                                                                    .IncTwr
                                                                                                ? 1.0
                                                                                                : 0.5,
                                                                                            child: Row(
                                                                                              crossAxisAlignment: CrossAxisAlignment
                                                                                                  .start,
                                                                                              children: [
                                                                                                Expanded(
                                                                                                  child: !((chartData
                                                                                                      .inceptionTWR ??
                                                                                                      0.00) >=
                                                                                                      0.00)
                                                                                                      ? AnimatedFractionallySizedBox(
                                                                                                      duration: const Duration(
                                                                                                          milliseconds: 500),
                                                                                                      heightFactor: AppHelpers
                                                                                                          .getPerformanceChartFraction(
                                                                                                          showBenchmark: !(widget.currentLevel == 0 || widget.isSummary),
                                                                                                          actualReturn: chartData
                                                                                                              .inceptionTWR ??
                                                                                                              0.00,
                                                                                                          twrMTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .MTD)
                                                                                                              ? chartData
                                                                                                              .twrMTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrQTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .QTD)
                                                                                                              ? chartData
                                                                                                              .twrQTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrCYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .CYTD)
                                                                                                              ? chartData
                                                                                                              .twrCYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrFYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .FYTD)
                                                                                                              ? chartData
                                                                                                              .twrFYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr1YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr1)
                                                                                                              ? chartData
                                                                                                              .twr1YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr2YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr2)
                                                                                                              ? chartData
                                                                                                              .twr2YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr3YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr3)
                                                                                                              ? chartData
                                                                                                              .twr3YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          inceptionTWR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncTwr)
                                                                                                              ? chartData
                                                                                                              .inceptionTWR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          inceptionIRR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncIrr)
                                                                                                              ? chartData
                                                                                                              .inceptionIRR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkMTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .MTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkMTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkQTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .QTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkQTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkCYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .CYTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkCYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkFYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .FYTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkFYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark1YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr1)
                                                                                                              ? chartData
                                                                                                              .benchmark1YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark2YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr2)
                                                                                                              ? chartData
                                                                                                              .benchmark2YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark3YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr3)
                                                                                                              ? chartData
                                                                                                              .benchmark3YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkTWR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncTwr)
                                                                                                              ? chartData
                                                                                                              .benchmarkTWR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkIRR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncIrr)
                                                                                                              ? chartData
                                                                                                              .benchmarkIRR ??
                                                                                                              0.00
                                                                                                              : 0.00),
                                                                                                      alignment: Alignment
                                                                                                          .topCenter,
                                                                                                      child: Container(
                                                                                                          color: AppColor
                                                                                                              .seaBlue
                                                                                                      )
                                                                                                  )
                                                                                                      : const SizedBox
                                                                                                      .shrink(),
                                                                                                ),
                                                                                                UIHelper
                                                                                                    .horizontalSpace(
                                                                                                    Sizes
                                                                                                        .dimen_2
                                                                                                        .w),
                                                                                                if(((chartData.benchmarkTWR ?? 0.0) * 100000).round() != 0 && !(widget.currentLevel == 0 || widget.isSummary))
                                                                                                  Expanded(
                                                                                                    child: !((chartData
                                                                                                        .benchmarkTWR ??
                                                                                                        0.00) >=
                                                                                                        0.00)
                                                                                                        ? AnimatedFractionallySizedBox(
                                                                                                        duration: const Duration(
                                                                                                            milliseconds: 500),
                                                                                                        heightFactor: AppHelpers
                                                                                                            .getPerformanceChartFraction(
                                                                                                            showBenchmark: !(widget.currentLevel == 0 || widget.isSummary),
                                                                                                            actualReturn: chartData
                                                                                                                .benchmarkTWR ??
                                                                                                                0.00,
                                                                                                            twrMTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .MTD)
                                                                                                                ? chartData
                                                                                                                .twrMTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrQTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .QTD)
                                                                                                                ? chartData
                                                                                                                .twrQTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrCYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .CYTD)
                                                                                                                ? chartData
                                                                                                                .twrCYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twrFYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .FYTD)
                                                                                                                ? chartData
                                                                                                                .twrFYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr1YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr1)
                                                                                                                ? chartData
                                                                                                                .twr1YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr2YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr2)
                                                                                                                ? chartData
                                                                                                                .twr2YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            twr3YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr3)
                                                                                                                ? chartData
                                                                                                                .twr3YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            inceptionTWR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncTwr)
                                                                                                                ? chartData
                                                                                                                .inceptionTWR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            inceptionIRR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncIrr)
                                                                                                                ? chartData
                                                                                                                .inceptionIRR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkMTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .MTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkMTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkQTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .QTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkQTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkCYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .CYTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkCYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkFYTD: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .FYTD)
                                                                                                                ? chartData
                                                                                                                .benchmarkFYTD ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark1YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr1)
                                                                                                                ? chartData
                                                                                                                .benchmark1YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark2YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr2)
                                                                                                                ? chartData
                                                                                                                .benchmark2YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmark3YR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .Yr3)
                                                                                                                ? chartData
                                                                                                                .benchmark3YR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkTWR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncTwr)
                                                                                                                ? chartData
                                                                                                                .benchmarkTWR ??
                                                                                                                0.00
                                                                                                                : 0.00,
                                                                                                            benchmarkIRR: AppHelpers
                                                                                                                .shouldShowReturn(
                                                                                                                selectedReturnPercentList: returnState
                                                                                                                    .selectedPerformanceReturnPercentList,
                                                                                                                returnType: ReturnType
                                                                                                                    .IncIrr)
                                                                                                                ? chartData
                                                                                                                .benchmarkIRR ??
                                                                                                                0.00
                                                                                                                : 0.00),
                                                                                                        alignment: Alignment
                                                                                                            .topCenter,
                                                                                                        child: Container(
                                                                                                          color: AppColor
                                                                                                              .purple,
                                                                                                        )
                                                                                                    )
                                                                                                        : const SizedBox
                                                                                                        .shrink(),
                                                                                                  )
                                                                                              ],
                                                                                            ),
                                                                                          ),
                                                                                          if(selectedType ==
                                                                                              ReturnType
                                                                                                  .IncTwr)
                                                                                            const DottedLine(
                                                                                              direction: Axis
                                                                                                  .vertical,
                                                                                              lineThickness: 1.0,
                                                                                              dashLength: 4.0,
                                                                                              dashColor: Colors
                                                                                                  .black,
                                                                                              dashGapLength: 4.0,
                                                                                              dashGapColor: Colors
                                                                                                  .transparent,
                                                                                            ),
                                                                                          Row(
                                                                                              children: [
                                                                                                Expanded(
                                                                                                    child: Column(
                                                                                                        children: [
                                                                                                          Expanded(
                                                                                                              child: Container(
                                                                                                                  color: AppColor
                                                                                                                      .transparent
                                                                                                              )
                                                                                                          )
                                                                                                        ]
                                                                                                    )
                                                                                                )
                                                                                              ]
                                                                                          )
                                                                                        ],
                                                                                      ),
                                                                                    ),
                                                                                  ],
                                                                                ),
                                                                              ),
                                                                            ),
                                                                          if(AppHelpers
                                                                              .shouldShowReturn(
                                                                              selectedReturnPercentList: returnState
                                                                                  .selectedPerformanceReturnPercentList,
                                                                              returnType: ReturnType
                                                                                  .IncTwr))
                                                                            UIHelper
                                                                                .horizontalSpaceSmall,
                                                                          if(AppHelpers
                                                                              .shouldShowReturn(
                                                                              selectedReturnPercentList: returnState
                                                                                  .selectedPerformanceReturnPercentList,
                                                                              returnType: ReturnType
                                                                                  .IncIrr))
                                                                            Expanded(
                                                                              child: GestureDetector(
                                                                                onTap: () {
                                                                                  setState(() {
                                                                                    selectedType =
                                                                                        ReturnType
                                                                                            .IncIrr;
                                                                                    if (widget
                                                                                        .returnTypeChanged !=
                                                                                        null) {
                                                                                      widget
                                                                                          .returnTypeChanged!(
                                                                                          selectedType);
                                                                                    }
                                                                                  });
                                                                                },
                                                                                child: Column(
                                                                                  children: [
                                                                                    Expanded(
                                                                                      child: Stack(
                                                                                        alignment: Alignment
                                                                                            .topCenter,
                                                                                        children: [
                                                                                          AnimatedOpacity(
                                                                                            duration: const Duration(
                                                                                                milliseconds: 500),
                                                                                            opacity: selectedType ==
                                                                                                ReturnType
                                                                                                    .IncIrr
                                                                                                ? 1.0
                                                                                                : 0.5,
                                                                                            child: Row(
                                                                                              crossAxisAlignment: CrossAxisAlignment
                                                                                                  .start,
                                                                                              children: [
                                                                                                Expanded(
                                                                                                  child: !((chartData
                                                                                                      .inceptionIRR ??
                                                                                                      0.00) >=
                                                                                                      0.00)
                                                                                                      ? AnimatedFractionallySizedBox(
                                                                                                      duration: const Duration(
                                                                                                          milliseconds: 500),
                                                                                                      heightFactor: AppHelpers
                                                                                                          .getPerformanceChartFraction(
                                                                                                          showBenchmark: !(widget.currentLevel == 0 || widget.isSummary),
                                                                                                          actualReturn: chartData
                                                                                                              .inceptionIRR ??
                                                                                                              0.00,
                                                                                                          twrMTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .MTD)
                                                                                                              ? chartData
                                                                                                              .twrMTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrQTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .QTD)
                                                                                                              ? chartData
                                                                                                              .twrQTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrCYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .CYTD)
                                                                                                              ? chartData
                                                                                                              .twrCYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twrFYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .FYTD)
                                                                                                              ? chartData
                                                                                                              .twrFYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr1YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr1)
                                                                                                              ? chartData
                                                                                                              .twr1YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr2YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr2)
                                                                                                              ? chartData
                                                                                                              .twr2YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          twr3YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr3)
                                                                                                              ? chartData
                                                                                                              .twr3YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          inceptionTWR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncTwr)
                                                                                                              ? chartData
                                                                                                              .inceptionTWR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          inceptionIRR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncIrr)
                                                                                                              ? chartData
                                                                                                              .inceptionIRR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkMTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .MTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkMTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkQTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .QTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkQTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkCYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .CYTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkCYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkFYTD: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .FYTD)
                                                                                                              ? chartData
                                                                                                              .benchmarkFYTD ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark1YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr1)
                                                                                                              ? chartData
                                                                                                              .benchmark1YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark2YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr2)
                                                                                                              ? chartData
                                                                                                              .benchmark2YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmark3YR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .Yr3)
                                                                                                              ? chartData
                                                                                                              .benchmark3YR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkTWR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncTwr)
                                                                                                              ? chartData
                                                                                                              .benchmarkTWR ??
                                                                                                              0.00
                                                                                                              : 0.00,
                                                                                                          benchmarkIRR: AppHelpers
                                                                                                              .shouldShowReturn(
                                                                                                              selectedReturnPercentList: returnState
                                                                                                                  .selectedPerformanceReturnPercentList,
                                                                                                              returnType: ReturnType
                                                                                                                  .IncIrr)
                                                                                                              ? chartData
                                                                                                              .benchmarkIRR ??
                                                                                                              0.00
                                                                                                              : 0.00),
                                                                                                      alignment: Alignment
                                                                                                          .topCenter,
                                                                                                      child: Container(
                                                                                                          color: AppColor
                                                                                                              .seaBlue
                                                                                                      )
                                                                                                  )
                                                                                                      : const SizedBox
                                                                                                      .shrink(),
                                                                                                ),

                                                                                              ],
                                                                                            ),
                                                                                          ),
                                                                                          if(selectedType ==
                                                                                              ReturnType
                                                                                                  .IncIrr)
                                                                                            const DottedLine(
                                                                                              direction: Axis
                                                                                                  .vertical,
                                                                                              lineThickness: 1.0,
                                                                                              dashLength: 4.0,
                                                                                              dashColor: Colors
                                                                                                  .black,
                                                                                              dashGapLength: 4.0,
                                                                                              dashGapColor: Colors
                                                                                                  .transparent,
                                                                                            ),
                                                                                          Row(
                                                                                              children: [
                                                                                                Expanded(
                                                                                                    child: Column(
                                                                                                        children: [
                                                                                                          Expanded(
                                                                                                              child: Container(
                                                                                                                  color: AppColor
                                                                                                                      .transparent
                                                                                                              )
                                                                                                          )
                                                                                                        ]
                                                                                                    )
                                                                                                )
                                                                                              ]
                                                                                          )
                                                                                        ],
                                                                                      ),
                                                                                    ),
                                                                                  ],
                                                                                ),
                                                                              ),
                                                                            ),
                                                                          UIHelper
                                                                              .horizontalSpaceSmall,
                                                                        ],
                                                                      ),
                                                                    )
                                                                  ],
                                                                ),


                                                              ],
                                                            ),
                                                          ),
                                                          Row(
                                                            children: [
                                                              SizedBox(width: Sizes.dimen_3.w),
                                                              if(AppHelpers
                                                                  .shouldShowReturn(
                                                                  selectedReturnPercentList: returnState
                                                                      .selectedPerformanceReturnPercentList,
                                                                  returnType: ReturnType
                                                                      .MTD))
                                                                Expanded(
                                                                    child: GestureDetector(
                                                                        onTap: () {
                                                                          setState(() {
                                                                            selectedType =
                                                                                ReturnType
                                                                                    .MTD;
                                                                            if (widget
                                                                                .returnTypeChanged !=
                                                                                null) {
                                                                              widget
                                                                                  .returnTypeChanged!(
                                                                                  selectedType);
                                                                            }
                                                                          });
                                                                        },
                                                                        child:  const PerformanceText(title: StringConstants.mtd)
                                                                    )
                                                                ),
                                                              if(AppHelpers
                                                                  .shouldShowReturn(
                                                                  selectedReturnPercentList: returnState
                                                                      .selectedPerformanceReturnPercentList,
                                                                  returnType: ReturnType
                                                                      .MTD))
                                                                SizedBox(width: Sizes.dimen_3.w),
                                                              if(AppHelpers
                                                                  .shouldShowReturn(
                                                                  selectedReturnPercentList: returnState
                                                                      .selectedPerformanceReturnPercentList,
                                                                  returnType: ReturnType
                                                                      .QTD))
                                                                Expanded(
                                                                    child: GestureDetector(
                                                                        onTap: () {
                                                                          setState(() {
                                                                            selectedType =
                                                                                ReturnType
                                                                                    .QTD;
                                                                            if (widget
                                                                                .returnTypeChanged !=
                                                                                null) {
                                                                              widget
                                                                                  .returnTypeChanged!(
                                                                                  selectedType);
                                                                            }
                                                                          });
                                                                        },
                                                                        child: PerformanceText(title: StringConstants.qtd)
                                                                    )
                                                                ),
                                                              if(AppHelpers
                                                                  .shouldShowReturn(
                                                                  selectedReturnPercentList: returnState
                                                                      .selectedPerformanceReturnPercentList,
                                                                  returnType: ReturnType
                                                                      .QTD))
                                                                SizedBox(width: Sizes.dimen_3.w),
                                                              if(AppHelpers
                                                                  .shouldShowReturn(
                                                                  selectedReturnPercentList: returnState
                                                                      .selectedPerformanceReturnPercentList,
                                                                  returnType: ReturnType
                                                                      .CYTD))
                                                                Expanded(
                                                                    child: GestureDetector(
                                                                        onTap: () {
                                                                          setState(() {
                                                                            selectedType =
                                                                                ReturnType
                                                                                    .CYTD;
                                                                            if (widget
                                                                                .returnTypeChanged !=
                                                                                null) {
                                                                              widget
                                                                                  .returnTypeChanged!(
                                                                                  selectedType);
                                                                            }
                                                                          });
                                                                        },
                                                                        child: PerformanceText(title: StringConstants.cytd)
                                                                    )
                                                                ),
                                                              if(AppHelpers
                                                                  .shouldShowReturn(
                                                                  selectedReturnPercentList: returnState
                                                                      .selectedPerformanceReturnPercentList,
                                                                  returnType: ReturnType
                                                                      .CYTD))
                                                                SizedBox(width: Sizes.dimen_3.w),
                                                              if(AppHelpers
                                                                  .shouldShowReturn(
                                                                  selectedReturnPercentList: returnState
                                                                      .selectedPerformanceReturnPercentList,
                                                                  returnType: ReturnType
                                                                      .FYTD))
                                                                Expanded(
                                                                    child: GestureDetector(
                                                                        onTap: () {
                                                                          setState(() {
                                                                            selectedType =
                                                                                ReturnType
                                                                                    .FYTD;
                                                                            if (widget
                                                                                .returnTypeChanged !=
                                                                                null) {
                                                                              widget
                                                                                  .returnTypeChanged!(
                                                                                  selectedType);
                                                                            }
                                                                          });
                                                                        },
                                                                        child: PerformanceText(title: StringConstants.fytd)
                                                                    )
                                                                ),
                                                              if(AppHelpers
                                                                  .shouldShowReturn(
                                                                  selectedReturnPercentList: returnState
                                                                      .selectedPerformanceReturnPercentList,
                                                                  returnType: ReturnType
                                                                      .FYTD))
                                                                SizedBox(width: Sizes.dimen_3.w),
                                                              if(AppHelpers
                                                                  .shouldShowReturn(
                                                                  selectedReturnPercentList: returnState
                                                                      .selectedPerformanceReturnPercentList,
                                                                  returnType: ReturnType
                                                                      .Yr1))
                                                                Expanded(
                                                                    child: GestureDetector(
                                                                        onTap: () {
                                                                          setState(() {
                                                                            selectedType =
                                                                                ReturnType
                                                                                    .Yr1;
                                                                            if (widget
                                                                                .returnTypeChanged !=
                                                                                null) {
                                                                              widget
                                                                                  .returnTypeChanged!(
                                                                                  selectedType);
                                                                            }
                                                                          });
                                                                        },
                                                                        child: PerformanceText(title: StringConstants.oneYear)
                                                                    )
                                                                ),
                                                              if(AppHelpers
                                                                  .shouldShowReturn(
                                                                  selectedReturnPercentList: returnState
                                                                      .selectedPerformanceReturnPercentList,
                                                                  returnType: ReturnType
                                                                      .Yr1))
                                                                SizedBox(width: Sizes.dimen_3.w),
                                                              if(AppHelpers
                                                                  .shouldShowReturn(
                                                                  selectedReturnPercentList: returnState
                                                                      .selectedPerformanceReturnPercentList,
                                                                  returnType: ReturnType
                                                                      .Yr2))
                                                                Expanded(
                                                                    child: GestureDetector(
                                                                        onTap: () {
                                                                          setState(() {
                                                                            selectedType =
                                                                                ReturnType
                                                                                    .Yr2;
                                                                            if (widget
                                                                                .returnTypeChanged !=
                                                                                null) {
                                                                              widget
                                                                                  .returnTypeChanged!(
                                                                                  selectedType);
                                                                            }
                                                                          });
                                                                        },
                                                                        child: PerformanceText(title: StringConstants.twoYear)
                                                                    )
                                                                ),
                                                              if(AppHelpers
                                                                  .shouldShowReturn(
                                                                  selectedReturnPercentList: returnState
                                                                      .selectedPerformanceReturnPercentList,
                                                                  returnType: ReturnType
                                                                      .Yr2))
                                                                SizedBox(width: Sizes.dimen_3.w),
                                                              if(AppHelpers
                                                                  .shouldShowReturn(
                                                                  selectedReturnPercentList: returnState
                                                                      .selectedPerformanceReturnPercentList,
                                                                  returnType: ReturnType
                                                                      .Yr3))
                                                                Expanded(
                                                                    child: GestureDetector(
                                                                        onTap: () {
                                                                          setState(() {
                                                                            selectedType =
                                                                                ReturnType
                                                                                    .Yr3;
                                                                            if (widget
                                                                                .returnTypeChanged !=
                                                                                null) {
                                                                              widget
                                                                                  .returnTypeChanged!(
                                                                                  selectedType);
                                                                            }
                                                                          });
                                                                        },
                                                                        child: PerformanceText(title: StringConstants.threeYear)
                                                                    )
                                                                ),
                                                              if(AppHelpers
                                                                  .shouldShowReturn(
                                                                  selectedReturnPercentList: returnState
                                                                      .selectedPerformanceReturnPercentList,
                                                                  returnType: ReturnType
                                                                      .Yr3))
                                                                SizedBox(width: Sizes.dimen_3.w),
                                                              if(AppHelpers
                                                                  .shouldShowReturn(
                                                                  selectedReturnPercentList: returnState
                                                                      .selectedPerformanceReturnPercentList,
                                                                  returnType: ReturnType
                                                                      .IncTwr))
                                                                Expanded(
                                                                    child: GestureDetector(
                                                                        onTap: () {
                                                                          setState(() {
                                                                            selectedType =
                                                                                ReturnType
                                                                                    .IncTwr;
                                                                            if (widget
                                                                                .returnTypeChanged !=
                                                                                null) {
                                                                              widget
                                                                                  .returnTypeChanged!(
                                                                                  selectedType);
                                                                            }
                                                                          });
                                                                        },
                                                                        child: PerformanceText(title: StringConstants.incTWR)
                                                                    )
                                                                ),
                                                              if(AppHelpers
                                                                  .shouldShowReturn(
                                                                  selectedReturnPercentList: returnState
                                                                      .selectedPerformanceReturnPercentList,
                                                                  returnType: ReturnType
                                                                      .IncTwr))
                                                                SizedBox(width: Sizes.dimen_3.w),
                                                              if(AppHelpers
                                                                  .shouldShowReturn(
                                                                  selectedReturnPercentList: returnState
                                                                      .selectedPerformanceReturnPercentList,
                                                                  returnType: ReturnType
                                                                      .IncIrr))
                                                                Expanded(
                                                                    child: GestureDetector(
                                                                        onTap: () {
                                                                          setState(() {
                                                                            selectedType =
                                                                                ReturnType
                                                                                    .IncIrr;
                                                                            if (widget
                                                                                .returnTypeChanged !=
                                                                                null) {
                                                                              widget
                                                                                  .returnTypeChanged!(
                                                                                  selectedType);
                                                                            }
                                                                          });
                                                                        },
                                                                        child: PerformanceText(title: StringConstants.irr)
                                                                    )
                                                                ),
                                                              SizedBox(width: Sizes.dimen_3.w),
                                                            ],
                                                          ),
                                                        ],
                                                      ),
                                                    ),


                                                  ],
                                                ),

                                                BlocBuilder<PerformanceDenominationCubit,
                                                    PerformanceDenominationState>(
                                                    bloc: widget
                                                        .performanceDenominationCubit,
                                                    builder: (context,
                                                        denominationState) {
                                                      return Padding(
                                                        padding: EdgeInsets.symmetric(vertical: Sizes.dimen_6.h),
                                                        child: Row(
                                                          crossAxisAlignment: CrossAxisAlignment.center,
                                                          children: [
                                                            Expanded(
                                                                child: ExcludeSemantics(
                                                                  child: Column(
                                                                    crossAxisAlignment: CrossAxisAlignment.start,
                                                                    children: [
                                                                      Text(
                                                                        StringConstants.marketValue,
                                                                        style: Theme.of(
                                                                            context)
                                                                            .textTheme
                                                                            .titleSmall
                                                                            ?.copyWith(
                                                                            fontSize: Sizes.dimen_12,
                                                                            fontWeight:
                                                                            FontWeight.normal,
                                                                            color: AppColor.grey),
                                                                      ),
                                                                      UIHelper
                                                                          .horizontalSpaceMedium,
                                                                      Semantics(
                                                                        identifier: "marketValue",
                                                                        child: Text(

                                                                          "${NumberFormat.simpleCurrency(name: widget.performanceCurrencyCubit.state.selectedPerformanceCurrency?.code).currencySymbol}${(chartData.marketValue ?? 0.00) < 0.0 ? '(${NumberFormat(widget.performanceCurrencyCubit.state.selectedPerformanceCurrency?.format ?? '###,###,##0.00').format((chartData.marketValue ?? 0.00).abs().denominate(denominator: denominationState.selectedPerformanceDenomination?.denomination))})' : NumberFormat(widget.performanceCurrencyCubit.state.selectedPerformanceCurrency?.format ?? '###,###,##0.00').format((chartData.marketValue ?? 0.00).denominate(denominator: denominationState.selectedPerformanceDenomination?.denomination))}${denominationState.selectedPerformanceDenomination?.suffix}"    .stealth(stealthValue),

                                                                          style: Theme.of(
                                                                              context)
                                                                              .textTheme
                                                                              .headlineSmall
                                                                              ?.copyWith(
                                                                              fontWeight:
                                                                              FontWeight.bold,
                                                                              color: stealthValue
                                                                                  ? null
                                                                                  : (chartData.marketValue ?? 0.00) >= 0.0
                                                                                  ? null
                                                                                  : AppColor.red),
                                                                        ),
                                                                      ),
                                                                    ],
                                                                  ),
                                                                )
                                                            ),
                                                            Flexible(
                                                              child: Row(
                                                                mainAxisAlignment: MainAxisAlignment.end,
                                                                children: [
                                                                  Flexible(
                                                                    child: Column(
                                                                      crossAxisAlignment: CrossAxisAlignment.start,
                                                                      children: [
                                                                        Row(
                                                                          mainAxisAlignment:
                                                                          MainAxisAlignment
                                                                              .start,
                                                                          crossAxisAlignment:
                                                                          CrossAxisAlignment
                                                                              .center,
                                                                          mainAxisSize: MainAxisSize.min,
                                                                          children: [
                                                                            PerformanceTooltip(  stealthValue: stealthValue,  isBenchmark: false,  title: AppHelpers.getReturnName(selectedType),  prefix: Container(    height: Sizes.dimen_8,    width: Sizes.dimen_8,    decoration:    const BoxDecoration(        shape: BoxShape            .circle,        color: AppColor            .seaBlue),  ),  value: "${AppHelpers.getPerformanceSelectedReturn(isBenchmark: false, chartData: chartData, selectedType: selectedType).toStringAsFixed(2)}%",  valueColor: AppHelpers.getPerformanceSelectedReturn(      isBenchmark: false,      chartData: chartData,      selectedType: selectedType  ) < 0.00000 ? AppColor.red : AppColor.green,  textAlign: TextAlign.end,),

                                                                          ],
                                                                        ),

                                                                      ],
                                                                    ),
                                                                  ),
                                                                  SizedBox(
                                                                      width: Sizes.dimen_3.h),

                                                                  if(!(selectedType ==
                                                                      ReturnType
                                                                          .IncIrr ||
                                                                      (widget.currentLevel ==
                                                                          0 ||
                                                                          widget
                                                                              .isSummary)))
                                                                    Flexible(
                                                                      child: Opacity(
                                                                        opacity: (selectedType ==
                                                                            ReturnType
                                                                                .IncIrr ||
                                                                            (widget.currentLevel ==
                                                                                0 ||
                                                                                widget
                                                                                    .isSummary))
                                                                            ? 0.0
                                                                            : 1.0,
                                                                        child: Column(
                                                                          crossAxisAlignment: CrossAxisAlignment.start,
                                                                          children: [
                                                                            Row(
                                                                              mainAxisAlignment:
                                                                              MainAxisAlignment
                                                                                  .start,
                                                                              crossAxisAlignment:
                                                                              CrossAxisAlignment
                                                                                  .center,
                                                                              mainAxisSize: MainAxisSize.min,
                                                                              children: [

                                                                                PerformanceTooltip(
                                                                                  isBenchmark: true,
                                                                                  title: (chartData.benchmark != null && (chartData.benchmark?.isNotEmpty ?? false))
                                                                                      ? '${chartData.benchmark}'
                                                                                      : 'Benchmark',
                                                                                  value: ((AppHelpers.getPerformanceSelectedReturn(
                                                                                      isBenchmark: true,
                                                                                      chartData: chartData,
                                                                                      selectedType: selectedType
                                                                                  )) * 100000).round() != 0 && !(widget.currentLevel == 0 || widget.isSummary)
                                                                                      ? "${AppHelpers.getPerformanceSelectedReturn(isBenchmark: true, chartData: chartData, selectedType: selectedType).toStringAsFixed(2)}%"
                                                                                      : "N/A",
                                                                                  valueColor: !(widget.currentLevel != 0 && !widget.isSummary)
                                                                                      ? AppColor.grey
                                                                                      : AppHelpers.getPerformanceSelectedReturn(isBenchmark: true, chartData: chartData, selectedType: selectedType) < 0.00000
                                                                                      ? AppColor.red
                                                                                      : AppColor.green,
                                                                                  textAlign: TextAlign.end,
                                                                                  prefix: Container(
                                                                                    margin: EdgeInsets
                                                                                        .symmetric(
                                                                                        vertical: Sizes
                                                                                            .dimen_2
                                                                                            .h),
                                                                                    height:
                                                                                    Sizes.dimen_8,
                                                                                    width:
                                                                                    Sizes.dimen_8,
                                                                                    decoration:
                                                                                    const BoxDecoration(
                                                                                        shape: BoxShape
                                                                                            .circle,
                                                                                        color: AppColor
                                                                                            .purple),
                                                                                  ),
                                                                                  stealthValue: stealthValue,
                                                                                )
                                                                              ],
                                                                            ),

                                                                          ],
                                                                        ),
                                                                      ),
                                                                    )
                                                                ],
                                                              ),
                                                            )
                                                          ],
                                                        ),
                                                      );
                                                    }
                                                )
                                              ],
                                            ),
                                          ),
                                        ],
                                      ),
                                    );
                                  }else {
                                    return Padding(
                                      padding: EdgeInsets.symmetric(horizontal: Sizes.dimen_14.w,),
                                      child: Column(
                                        children: [
                                          Container(
                                            width: double.infinity,
                                            decoration: !widget.isFavorite && widget.isSummary ? BoxDecoration(
                                              border: Border(
                                                  top: BorderSide(
                                                    color: const Color.fromARGB(255, 137, 35, 35).withValues(alpha: 0.2),
                                                    width: 0.6,
                                                  )),
                                            ):null ,
                                            padding: EdgeInsets.only(
                                              top: Sizes.dimen_4.h,
                                              bottom: Sizes.dimen_1.h,
                                            ),
                                          ),

                                          if(widget.isSummary && !widget.isFavorite)
                                            Expanded(
                                                child: LoadingBg(
                                                    message: Message.noPositionFound,
                                                    onRetry: () async{
                                                      await showModalBottomSheet(
                                                        context:
                                                        context,
                                                        shape:
                                                        RoundedRectangleBorder(
                                                          borderRadius:
                                                          BorderRadius.only(
                                                            topLeft:
                                                            Radius.circular(Sizes.dimen_10.r),
                                                            topRight:
                                                            Radius.circular(Sizes.dimen_10.r),
                                                          ),
                                                        ),
                                                        isScrollControlled:
                                                        true,
                                                        builder:
                                                            (context) {
                                                          return PerformanceUniversalFilter(
                                                            favorite:
                                                            widget.favorite,
                                                            changeBoolFromDetails: widget.changeBoolFromDetails ?? () {},
                                                            changeBool: changeBool,
                                                            isFavorite:
                                                            widget.isFavorite,
                                                            performanceEntityCubit:
                                                            widget.performanceEntityCubit,
                                                            performancePrimaryGroupingCubit:
                                                            widget.performancePrimaryGroupingCubit,
                                                            performanceSecondaryGroupingCubit:
                                                            widget.performanceSecondaryGroupingCubit,
                                                            performancePrimarySubGroupingCubit:
                                                            widget.performancePrimarySubGroupingCubit,
                                                            performanceSecondarySubGroupingCubit:
                                                            widget.performanceSecondarySubGroupingCubit,
                                                            performancePeriodCubit:
                                                            widget.performancePeriodCubit,
                                                            performanceNumberOfPeriodCubit:
                                                            widget.performanceNumberOfPeriodCubit,
                                                            performanceReturnPercentCubit:
                                                            widget.performanceReturnPercentCubit,
                                                            performanceCurrencyCubit:
                                                            widget.performanceCurrencyCubit,
                                                            performanceDenominationCubit:
                                                            widget.performanceDenominationCubit,
                                                            performanceAsOnDateCubit:
                                                            widget.performanceAsOnDateCubit,
                                                            performanceReportCubit:
                                                            widget.performanceReportCubit,
                                                            performanceLoadingCubit:
                                                            widget.performanceLoadingCubit,
                                                            performancePartnershipMethodCubit: widget.performancePartnershipMethodCubit,
                                                            performanceHoldingMethodCubit:  widget.performanceHoldingMethodCubit,
                                                          );
                                                        },
                                                      );
                                                    }
                                                )
                                            )
                                          else
                                            LoadingBg(
                                              height: widget.isFavorite ? ScreenUtil().screenHeight * 0.25 : ScreenUtil().screenHeight * 0.20,
                                              message: Message.noPositionFound,
                                              onRetry: () async{
                                                await showModalBottomSheet(
                                                  context:
                                                  context,
                                                  shape:
                                                  RoundedRectangleBorder(
                                                    borderRadius:
                                                    BorderRadius.only(
                                                      topLeft:
                                                      Radius.circular(Sizes.dimen_10.r),
                                                      topRight:
                                                      Radius.circular(Sizes.dimen_10.r),
                                                    ),
                                                  ),
                                                  isScrollControlled:
                                                  true,
                                                  builder:
                                                      (context) {
                                                    return PerformanceUniversalFilter(
                                                      favorite:
                                                      widget.favorite,
                                                      changeBool: changeBool,
                                                      changeBoolFromDetails: widget.changeBoolFromDetails ?? () {},
                                                      isFavorite:
                                                      widget.isFavorite,
                                                      performanceEntityCubit:
                                                      widget.performanceEntityCubit,
                                                      performancePrimaryGroupingCubit:
                                                      widget.performancePrimaryGroupingCubit,
                                                      performanceSecondaryGroupingCubit:
                                                      widget.performanceSecondaryGroupingCubit,
                                                      performancePrimarySubGroupingCubit:
                                                      widget.performancePrimarySubGroupingCubit,
                                                      performanceSecondarySubGroupingCubit:
                                                      widget.performanceSecondarySubGroupingCubit,
                                                      performancePeriodCubit:
                                                      widget.performancePeriodCubit,
                                                      performanceNumberOfPeriodCubit:
                                                      widget.performanceNumberOfPeriodCubit,
                                                      performanceReturnPercentCubit:
                                                      widget.performanceReturnPercentCubit,
                                                      performanceCurrencyCubit:
                                                      widget.performanceCurrencyCubit,
                                                      performanceDenominationCubit:
                                                      widget.performanceDenominationCubit,
                                                      performanceAsOnDateCubit:
                                                      widget.performanceAsOnDateCubit,
                                                      performanceReportCubit:
                                                      widget.performanceReportCubit,
                                                      performanceLoadingCubit:
                                                      widget.performanceLoadingCubit,
                                                      performancePartnershipMethodCubit: widget.performancePartnershipMethodCubit,
                                                      performanceHoldingMethodCubit:  widget.performanceHoldingMethodCubit,
                                                    );
                                                  },
                                                );
                                              },
                                              menu: widget.isFavorite && widget.isSummary ? CustomPopupMenu(
                                                  onSelect: (int index) async {
                                                    if (index == 1) {
                                                      context
                                                          .read<FavoritesCubit>()
                                                          .saveFilters(
                                                        context: context,
                                                        shouldUpdate: false,
                                                        isPinned: false,
                                                        reportId: FavoriteConstants.performanceId,
                                                        reportName: "${widget.favorite?.reportname} Copy",
                                                        entity: widget.performanceReportCubit.performanceEntityCubit
                                                            .state.selectedPerformanceEntity,
                                                        performancePrimaryGrouping:
                                                        widget.performanceReportCubit.performancePrimaryGroupingCubit
                                                            .state.selectedGrouping,
                                                        performancePrimarySubGrouping:
                                                        widget.performanceReportCubit.performancePrimarySubGroupingCubit
                                                            .state.selectedSubGroupingList,
                                                        performanceSecondaryGrouping:
                                                        widget.performanceReportCubit.performanceSecondaryGroupingCubit
                                                            .state.selectedGrouping,
                                                        performanceSecondarySubGrouping:
                                                        widget.performanceReportCubit.performanceSecondarySubGroupingCubit
                                                            .state.selectedSubGroupingList,
                                                        performanceReturnPercent: widget.performanceReportCubit.performanceReturnPercentCubit
                                                            .state.selectedPerformanceReturnPercentList,
                                                        currency: widget.performanceReportCubit.performanceCurrencyCubit
                                                            .state.selectedPerformanceCurrency,
                                                        denomination: widget.performanceReportCubit.performanceDenominationCubit
                                                            .state.selectedPerformanceDenomination,
                                                        asOnDate: widget.performanceReportCubit.performanceAsOnDateCubit.state.asOnDate,
                                                      );

                                                    } else if (index == 2) {

                                                      DeleteFavoriteDialog.show(
                                                          context: context,
                                                        onCancel: (){
                                                          Navigator.of(context).popUntil(
                                                                (route) =>
                                                            route.settings.name ==
                                                                RouteList.dashboard,
                                                          );
                                                        },
                                                        onDelete: (){
                                                          context
                                                              .read<FavoritesCubit>()
                                                              .removeFavorites(
                                                              context: context,
                                                              favorite: widget.favorite);
                                                          Navigator.of(context).pop();
                                                        }
                                                      );
                                                    }
                                                  },
                                                  isLoading:true
                                              ): null ,
                                          ),
                                         UIHelper.verticalSpaceSmall,
                                          Column(
                                            children: [
                                              SizedBox(
                                                height: Sizes.dimen_22.h,
                                                child: Row(
                                                  children: [
                                                    Expanded(child: LoadingBg()),
                                                    Expanded(child: LoadingBg()),
                                                    UIHelper.horizontalSpaceMedium,
                                                    Expanded(child: LoadingBg()),
                                                  ],
                                                ),
                                              ),
                                              if(widget.isSummary && !widget.isFavorite)
                                                ...[
                                                  UIHelper.verticalSpaceSmall,
                                                  SizedBox(
                                                    height: Sizes.dimen_10.h,
                                                    child: Row(
                                                      children: [
                                                        Expanded(child: Container()),
                                                        UIHelper.horizontalSpaceMedium,
                                                        Expanded(child: Container()),
                                                        UIHelper.horizontalSpaceMedium,
                                                        Expanded(child: Container()),
                                                      ],
                                                    ),
                                                  ),
                                                ],
                                              UIHelper.verticalSpaceSmall,
                                            ],
                                          ),
                                        ],
                                      ),
                                    );
                                  }
                                
                                } else if (state is PerformanceReportLoading) {
                                  return Padding(
                          padding: EdgeInsets.symmetric(horizontal: Sizes.dimen_14.w,),
                          child: Column(
                            children: [
                              Container(
                                width: double.infinity,
                                decoration: !widget.isFavorite && widget.isSummary ? BoxDecoration(
                                  border: Border(
                                      top: BorderSide(
                                        color: AppColor.textGrey.withValues(alpha: 0.2),
                                        width: 0.6,
                                      )),
                                ): null,
                                padding: EdgeInsets.only(
                                  top: Sizes.dimen_4.h,
                                  bottom: Sizes.dimen_1.h,
                                ),
                              ),

                              if(widget.isSummary && !widget.isFavorite)
                                Expanded(
                                    child: LoadingBg(message: Message.loading,)
                                )
                              else
                                LoadingBg(
                                  height: widget.isFavorite ? ScreenUtil().screenHeight * 0.25 : ScreenUtil().screenHeight * 0.20,
                                  message: Message.loading, 
                                  menu: widget.isFavorite || widget.isSummary ? CustomPopupMenu(
                                      onSelect: (int index) async {
                                                                if (index == 1) {
context
                      .read<FavoritesCubit>()
                      .saveFilters(
                    context: context,
                        shouldUpdate: false,
                        isPinned: false,
                        reportId: FavoriteConstants.performanceId,
                        reportName: "${widget.favorite?.reportname} Copy",
                        entity: widget.performanceReportCubit.performanceEntityCubit
                            .state.selectedPerformanceEntity,
                        performancePrimaryGrouping:
                            widget.performanceReportCubit.performancePrimaryGroupingCubit
                                .state.selectedGrouping,
                        performancePrimarySubGrouping:
                            widget.performanceReportCubit.performancePrimarySubGroupingCubit
                                .state.selectedSubGroupingList,
                        performanceSecondaryGrouping:
                            widget.performanceReportCubit.performanceSecondaryGroupingCubit
                                .state.selectedGrouping,
                        performanceSecondarySubGrouping:
                            widget.performanceReportCubit.performanceSecondarySubGroupingCubit
                                .state.selectedSubGroupingList,
                        performanceReturnPercent: widget.performanceReportCubit.performanceReturnPercentCubit
                            .state.selectedPerformanceReturnPercentList,
                        currency: widget.performanceReportCubit.performanceCurrencyCubit
                            .state.selectedPerformanceCurrency,
                        denomination: widget.performanceReportCubit.performanceDenominationCubit
                            .state.selectedPerformanceDenomination,
                        asOnDate: widget.performanceReportCubit.performanceAsOnDateCubit.state.asOnDate,
                      );

         } else if (index == 2) {

                   DeleteFavoriteDialog.show(
                 context: context,
             onCancel: (){
               Navigator.of(context).popUntil(
                     (route) =>
                 route.settings.name ==
                     RouteList.dashboard,
               );
             },
               onDelete: (){
                 context
                     .read<FavoritesCubit>()
                     .removeFavorites(
                     context: context,
                     favorite: widget.favorite);
                 Navigator.of(context).pop();
               }
             );
             }
              },
                                       isLoading:true,
                                        ):null,

                                ),
                              UIHelper.verticalSpaceSmall,
                              Column(
                                children: [
                                  SizedBox(
                                    height: Sizes.dimen_22.h,
                                    child: Row(
                                      children: [
                                        Expanded(child: LoadingBg()),
                                        Expanded(child: LoadingBg()),
                                        UIHelper.horizontalSpaceMedium,
                                        Expanded(child: LoadingBg()),
                                      ],
                                    ),
                                  ),
                                  if(widget.isSummary && !widget.isFavorite)
                                    ...[
                                      UIHelper.verticalSpaceSmall,
                                      SizedBox(
                                        height: Sizes.dimen_10.h,
                                        child: Row(
                                          children: [
                                            Expanded(child: Container()),
                                            UIHelper.horizontalSpaceMedium,
                                            Expanded(child: Container()),
                                            UIHelper.horizontalSpaceMedium,
                                            Expanded(child: Container()),
                                          ],
                                        ),
                                      ),
                                    ],
                                  UIHelper.verticalSpaceSmall,
                                ],
                              ),
                            ],
                          ),
                        );
                                
                                } else if (state is PerformanceReportError) {
                                  if (state.errorType ==
                                              AppErrorType.unauthorised) {
                                            AppHelpers.logout(context: context);
                                          }
                                  return Padding(
                          padding: EdgeInsets.symmetric(horizontal: Sizes.dimen_14.w,),
                          child: Column(
                            children: [
                              Container(
                                width: double.infinity,
                                decoration: BoxDecoration(
                                  border: Border(
                                      top: BorderSide(
                                        color: const Color.fromARGB(255, 137, 35, 35).withValues(alpha: 0.2),
                                        width: 0.6,
                                      )),
                                ),
                                padding: EdgeInsets.only(
                                  top: Sizes.dimen_4.h,
                                  bottom: Sizes.dimen_1.h,
                                ),
                              ),

                              if(widget.isSummary && !widget.isFavorite)
                                Expanded(
                                    child: LoadingBg(
                                    message: Message.error,
                                    onRetry: () async{
                                        await showModalBottomSheet(
                                                                        context:
                                                                            context,
                                                                        shape:
                                                                            RoundedRectangleBorder(
                                                                          borderRadius:
                                                                              BorderRadius.only(
                                                                            topLeft:
                                                                                Radius.circular(Sizes.dimen_10.r),
                                                                            topRight:
                                                                                Radius.circular(Sizes.dimen_10.r),
                                                                          ),
                                                                        ),
                                                                        isScrollControlled:
                                                                            true,
                                                                        builder:
                                                                            (context) {
                                                                          return PerformanceUniversalFilter(
                                                                            favorite:
                                                                                widget.favorite,
                                                                            changeBool: changeBool,
                                                                            changeBoolFromDetails: widget.changeBoolFromDetails ?? () {},
                                                                            isFavorite:
                                                                                widget.isFavorite,
                                                                            performanceEntityCubit:
                                                                                widget.performanceEntityCubit,
                                                                            performancePrimaryGroupingCubit:
                                                                                widget.performancePrimaryGroupingCubit,
                                                                            performanceSecondaryGroupingCubit:
                                                                                widget.performanceSecondaryGroupingCubit,
                                                                            performancePrimarySubGroupingCubit:
                                                                                widget.performancePrimarySubGroupingCubit,
                                                                            performanceSecondarySubGroupingCubit:
                                                                                widget.performanceSecondarySubGroupingCubit,
                                                                            performancePeriodCubit:
                                                                                widget.performancePeriodCubit,
                                                                            performanceNumberOfPeriodCubit:
                                                                                widget.performanceNumberOfPeriodCubit,
                                                                            performanceReturnPercentCubit:
                                                                                widget.performanceReturnPercentCubit,
                                                                            performanceCurrencyCubit:
                                                                                widget.performanceCurrencyCubit,
                                                                            performanceDenominationCubit:
                                                                                widget.performanceDenominationCubit,
                                                                            performanceAsOnDateCubit:
                                                                                widget.performanceAsOnDateCubit,
                                                                            performanceReportCubit:
                                                                                widget.performanceReportCubit,
                                                                            performanceLoadingCubit:
                                                                                widget.performanceLoadingCubit,
                                                                            performancePartnershipMethodCubit: widget.performancePartnershipMethodCubit,
                                                                            performanceHoldingMethodCubit:  widget.performanceHoldingMethodCubit,
                                                                          );
                                                                        },
                                                                      );
                                    }
                                    )
                                )
                              else
                                LoadingBg(
                                  height: widget.isFavorite ? ScreenUtil().screenHeight * 0.25 : ScreenUtil().screenHeight * 0.20,
                                  message: Message.error,
                                  onRetry: () async{
                                        await showModalBottomSheet(
                                                                        context:
                                                                            context,
                                                                        shape:
                                                                            RoundedRectangleBorder(
                                                                          borderRadius:
                                                                              BorderRadius.only(
                                                                            topLeft:
                                                                                Radius.circular(Sizes.dimen_10.r),
                                                                            topRight:
                                                                                Radius.circular(Sizes.dimen_10.r),
                                                                          ),
                                                                        ),
                                                                        isScrollControlled:
                                                                            true,
                                                                        builder:
                                                                            (context) {
                                                                          return PerformanceUniversalFilter(
                                                                            favorite:
                                                                                widget.favorite,
                                                                            changeBool: changeBool,
                                                                            changeBoolFromDetails: widget.changeBoolFromDetails ?? () {},
                                                                            isFavorite:
                                                                                widget.isFavorite,
                                                                            performanceEntityCubit:
                                                                                widget.performanceEntityCubit,
                                                                            performancePrimaryGroupingCubit:
                                                                                widget.performancePrimaryGroupingCubit,
                                                                            performanceSecondaryGroupingCubit:
                                                                                widget.performanceSecondaryGroupingCubit,
                                                                            performancePrimarySubGroupingCubit:
                                                                                widget.performancePrimarySubGroupingCubit,
                                                                            performanceSecondarySubGroupingCubit:
                                                                                widget.performanceSecondarySubGroupingCubit,
                                                                            performancePeriodCubit:
                                                                                widget.performancePeriodCubit,
                                                                            performanceNumberOfPeriodCubit:
                                                                                widget.performanceNumberOfPeriodCubit,
                                                                            performanceReturnPercentCubit:
                                                                                widget.performanceReturnPercentCubit,
                                                                            performanceCurrencyCubit:
                                                                                widget.performanceCurrencyCubit,
                                                                            performanceDenominationCubit:
                                                                                widget.performanceDenominationCubit,
                                                                            performanceAsOnDateCubit:
                                                                                widget.performanceAsOnDateCubit,
                                                                            performanceReportCubit:
                                                                                widget.performanceReportCubit,
                                                                            performanceLoadingCubit:
                                                                                widget.performanceLoadingCubit,
                                                                            performancePartnershipMethodCubit: widget.performancePartnershipMethodCubit,
                                                                            performanceHoldingMethodCubit:  widget.performanceHoldingMethodCubit,
                                                                          );
                                                                        },
                                                                      );
                                    },
                                  menu: CustomPopupMenu(
                                    onSelect: (int index) async {
                                                                if (index == 1) {
context
                      .read<FavoritesCubit>()
                      .saveFilters(
                    context: context,
                        shouldUpdate: false,
                        isPinned: false,
                        reportId: FavoriteConstants.performanceId,
                        reportName: "${widget.favorite?.reportname} Copy",
                        entity: widget.performanceReportCubit.performanceEntityCubit
                            .state.selectedPerformanceEntity,
                        performancePrimaryGrouping:
                            widget.performanceReportCubit.performancePrimaryGroupingCubit
                                .state.selectedGrouping,
                        performancePrimarySubGrouping:
                            widget.performanceReportCubit.performancePrimarySubGroupingCubit
                                .state.selectedSubGroupingList,
                        performanceSecondaryGrouping:
                            widget.performanceReportCubit.performanceSecondaryGroupingCubit
                                .state.selectedGrouping,
                        performanceSecondarySubGrouping:
                            widget.performanceReportCubit.performanceSecondarySubGroupingCubit
                                .state.selectedSubGroupingList,
                        performanceReturnPercent: widget.performanceReportCubit.performanceReturnPercentCubit
                            .state.selectedPerformanceReturnPercentList,
                        currency: widget.performanceReportCubit.performanceCurrencyCubit
                            .state.selectedPerformanceCurrency,
                        denomination: widget.performanceReportCubit.performanceDenominationCubit
                            .state.selectedPerformanceDenomination,
                        asOnDate: widget.performanceReportCubit.performanceAsOnDateCubit.state.asOnDate,
                      );

              } else if (index == 2) {

                DeleteFavoriteDialog.show(context: context,
                  onCancel: (){
                    Navigator.of(context).popUntil(
                          (route) =>
                      route.settings.name ==
                          RouteList.dashboard,
                    );
                  },
                  onDelete: (){
                    context
                        .read<FavoritesCubit>()
                        .removeFavorites(
                        context: context,
                        favorite: widget.favorite);
                    Navigator.of(context).pop();
                  });
                }
              },
                                    isLoading:true
                                  ),

                                ),
                              UIHelper.verticalSpaceSmall,
                              Column(
                                children: [
                                  SizedBox(
                                    height: Sizes.dimen_22.h,
                                    child: Row(
                                      children: [
                                        Expanded(child: LoadingBg()),
                                        Expanded(child: LoadingBg()),
                                        UIHelper.horizontalSpaceMedium,
                                        Expanded(child: LoadingBg()),
                                      ],
                                    ),
                                  ),
                                  if(widget.isSummary && !widget.isFavorite)
                                    ...[
                                      UIHelper.verticalSpaceSmall,
                                      SizedBox(
                                        height: Sizes.dimen_10.h,
                                        child: Row(
                                          children: [
                                            Expanded(child: Container()),
                                            UIHelper.horizontalSpaceMedium,
                                            Expanded(child: Container()),
                                            UIHelper.horizontalSpaceMedium,
                                            Expanded(child: Container()),
                                          ],
                                        ),
                                      ),
                                    ],
                                  UIHelper.verticalSpaceSmall,
                                ],
                              ),
                            ],
                          ),
                        );
                                
                                } else {
                                  return Padding(
                          padding: EdgeInsets.symmetric(horizontal: Sizes.dimen_14.w,),
                          child: Column(
                            children: [
                              Container(
                                width: double.infinity,
                                decoration: BoxDecoration(
                                  border: Border(
                                      top: BorderSide(
                                        color: const Color.fromARGB(255, 137, 35, 35).withValues(alpha: 0.2),
                                        width: 0.6,
                                      )),
                                ),
                                padding: EdgeInsets.only(
                                  top: Sizes.dimen_4.h,
                                  bottom: Sizes.dimen_1.h,
                                ),
                              ),

                              if(widget.isSummary && !widget.isFavorite)
                                Expanded(
                                    child: LoadingBg(message: Message.loading,)
                                )
                              else
                                LoadingBg(
                                  height: widget.isFavorite ? ScreenUtil().screenHeight * 0.25 : ScreenUtil().screenHeight * 0.20,
                                  message: Message.loading,
                                  menu: CustomPopupMenu(
                                    onSelect: (int index) async {
                                                                if (index == 1) {
context
                      .read<FavoritesCubit>()
                      .saveFilters(
                    context: context,
                        shouldUpdate: false,
                        isPinned: false,
                        reportId: FavoriteConstants.performanceId,
                        reportName: "${widget.favorite?.reportname} Copy",
                        entity: widget.performanceReportCubit.performanceEntityCubit
                            .state.selectedPerformanceEntity,
                        performancePrimaryGrouping:
                            widget.performanceReportCubit.performancePrimaryGroupingCubit
                                .state.selectedGrouping,
                        performancePrimarySubGrouping:
                            widget.performanceReportCubit.performancePrimarySubGroupingCubit
                                .state.selectedSubGroupingList,
                        performanceSecondaryGrouping:
                            widget.performanceReportCubit.performanceSecondaryGroupingCubit
                                .state.selectedGrouping,
                        performanceSecondarySubGrouping:
                            widget.performanceReportCubit.performanceSecondarySubGroupingCubit
                                .state.selectedSubGroupingList,
                        performanceReturnPercent: widget.performanceReportCubit.performanceReturnPercentCubit
                            .state.selectedPerformanceReturnPercentList,
                        currency: widget.performanceReportCubit.performanceCurrencyCubit
                            .state.selectedPerformanceCurrency,
                        denomination: widget.performanceReportCubit.performanceDenominationCubit
                            .state.selectedPerformanceDenomination,
                        asOnDate: widget.performanceReportCubit.performanceAsOnDateCubit.state.asOnDate,
                      );

               } else if (index == 2) {

               DeleteFavoriteDialog.show(context: context,
             onCancel: (){
               Navigator.of(context).popUntil(
                     (route) =>
                 route.settings.name ==
                     RouteList.dashboard,
               );
             },
             onDelete: (){
               context
                   .read<FavoritesCubit>()
                   .removeFavorites(
                   context: context,
                   favorite: widget.favorite);
               Navigator.of(context).pop();
             });

                }
             }
              ),

                                ),
                              UIHelper.verticalSpaceSmall,
                              Column(
                                children: [
                                  SizedBox(
                                    height: Sizes.dimen_22.h,
                                    child: Row(
                                      children: [
                                        Expanded(child: LoadingBg()),
                                        Expanded(child: LoadingBg()),
                                        UIHelper.horizontalSpaceMedium,
                                        Expanded(child: LoadingBg()),
                                      ],
                                    ),
                                  ),
                                  if(widget.isSummary && !widget.isFavorite)
                                    ...[
                                      UIHelper.verticalSpaceSmall,
                                      SizedBox(
                                        height: Sizes.dimen_10.h,
                                        child: Row(
                                          children: [
                                            Expanded(child: Container()),
                                            UIHelper.horizontalSpaceMedium,
                                            Expanded(child: Container()),
                                            UIHelper.horizontalSpaceMedium,
                                            Expanded(child: Container()),
                                          ],
                                        ),
                                      ),
                                    ],
                                  UIHelper.verticalSpaceSmall,
                                ],
                              ),
                            ],
                          ),
                        );
                                
                                }
                              });
                        });
                  });
                });
          });
    });
  }
}
class PerformanceTooltip extends StatefulWidget {
  final bool isBenchmark;
  final String title;
  final String value;
  final Color valueColor;
  final Widget? titleWidget;
  final TextAlign textAlign;
  final bool isValueShown;
  final Widget? valueWidget;
  final Widget? prefix;
  final bool stealthValue;

  const PerformanceTooltip({
    Key? key,
    required this.isBenchmark,
    required this.title,
    required this.value,
    required this.valueColor,
    this.textAlign = TextAlign.end,
    this.isValueShown = true,
    this.valueWidget, this.titleWidget,
    this.prefix,
    required this.stealthValue,
  }) : super(key: key);

  @override
  State<PerformanceTooltip> createState() => _PerformanceTooltipState();
}

class _PerformanceTooltipState extends State<PerformanceTooltip> {
  late final SuperTooltipController _tooltipController = SuperTooltipController();
  Timer? _timer;

  @override
  void dispose() {
    _tooltipController.dispose();
    _timer?.cancel();
    super.dispose();
  }
  String truncateWithEllipsis(String text, int maxLength) {
    return (text.length <= maxLength)
        ? text
        : '${text.substring(0, maxLength)}...';
  }

  @override
  Widget build(BuildContext context) {
    Widget titleContent;

    if (widget.prefix != null) {
      titleContent = GestureDetector(
        onTap: () {},
        onLongPress: () {
          if (_tooltipController.isVisible) {
            _tooltipController.hideTooltip();
          } else {
            HapticFeedback.lightImpact();
            SystemSound.play(SystemSoundType.click);
            _tooltipController.showTooltip();
          }
        },
        child: Transform.translate(
          offset: widget.isBenchmark ? Offset(0, 0) : Offset(-19, 0),
          child: Row(
            mainAxisSize: MainAxisSize.min,
            crossAxisAlignment: CrossAxisAlignment.center,
            children: [
              widget.prefix!,
              SizedBox(width: 8),
              Text(
                truncateWithEllipsis(widget.title, 9),
                style: Theme.of(context).textTheme.titleSmall?.copyWith(
                  fontSize: Sizes.dimen_12,
                  fontWeight: FontWeight.normal,
                  color: AppColor.grey,
                ),
                textAlign: widget.textAlign,
                overflow: TextOverflow.ellipsis,
                maxLines:  1 ,
                softWrap: false,
              ),
            ],
          ),
        ),
      );
    } else {
      titleContent = widget.isBenchmark
          ? Container(
        width: 70,
        child: Text(
          widget.title,
          style: Theme.of(context).textTheme.titleSmall?.copyWith(
            fontSize: Sizes.dimen_12,
            fontWeight: FontWeight.normal,
            color: AppColor.grey,
          ),
          textAlign: widget.textAlign,
          overflow: TextOverflow.ellipsis,
          maxLines: 1,
        ),
      )
          : Text(
        widget.title,
        style: Theme.of(context).textTheme.titleSmall?.copyWith(
          fontSize: Sizes.dimen_12,
          fontWeight: FontWeight.normal,
          color: AppColor.grey,
        ),
        textAlign: widget.textAlign,
        overflow: TextOverflow.ellipsis,
        softWrap: false,
        maxLines: 1,
      );
    }
    return Column(
      crossAxisAlignment: CrossAxisAlignment.end,
      children: [
        SuperTooltip(
            borderRadius: 15,
            arrowBaseWidth: 10,
            arrowLength: 15,
            arrowTipDistance: 18,
            hasShadow: false,
            controller: _tooltipController,
            onShow: () {
              _timer = Timer(const Duration(seconds: 3), () {
                if (_tooltipController.isVisible) {
                  _tooltipController.hideTooltip();
                }
              });
            },
            onLongPress: () {
              if (_tooltipController.isVisible) {
                _tooltipController.hideTooltip();
              } else {
                HapticFeedback.lightImpact();
                SystemSound.play(SystemSoundType.click);
                _tooltipController.showTooltip();
              }
            },
            content: Container(
              margin: EdgeInsets.symmetric(horizontal: Sizes.dimen_6.w),
              padding: EdgeInsets.symmetric(vertical: Sizes.dimen_4.h),
              child: Column(
                mainAxisSize: MainAxisSize.min,
                crossAxisAlignment: CrossAxisAlignment.start,
                children: [
                  Text(
                    widget.title,
                    style: Theme.of(context).textTheme.titleSmall?.copyWith(
                      fontSize: Sizes.dimen_12,
                      fontWeight: FontWeight.normal,
                      color: AppColor.grey,
                    ),
                  ),
                  UIHelper.verticalSpace(Sizes.dimen_2.h),
                  Text(
                    widget.value.stealth(widget.stealthValue),
                    style: Theme.of(context).textTheme.headlineSmall?.copyWith(
                      fontWeight: FontWeight.bold,
                      color: widget.stealthValue ? null : widget.valueColor,
                    ),
                  ),
                ],
              ),
            ),
            showBarrier: true,
            popupDirection: TooltipDirection.up,
            child: titleContent

        ),

        if (widget.isValueShown)
          widget.valueWidget ?? GestureDetector(
            onLongPress: () {
              if (_tooltipController.isVisible) {
                _tooltipController.hideTooltip();
              } else {
                HapticFeedback.lightImpact();
                SystemSound.play(SystemSoundType.click);
                _tooltipController.showTooltip();
              }
            },
            child: Text(
              widget.value.stealth(widget.stealthValue),
              style: Theme.of(context).textTheme.headlineSmall?.copyWith(
                fontWeight: FontWeight.bold,
                color: widget.stealthValue ? null : widget.valueColor,
              ),
              textAlign: widget.textAlign,
              overflow: TextOverflow.ellipsis,
              maxLines: 1,
            ),
          ),
      ],
    );
  }
}
